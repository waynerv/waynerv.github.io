<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN"><title type="text">Shall We Code?</title><subtitle type="html">è°ˆè°ˆå¤©ï¼Œå†™å†™ç </subtitle><updated>2021-01-04T03:47:53+00:00</updated><id>https://waynerv.github.io/</id><link rel="alternate" type="text/html" href="https://waynerv.github.io/"/><link rel="self" type="application/atom+xml" href="https://waynerv.github.io/atom.xml"/><author><name>Waynerv</name><uri>https://waynerv.github.io/</uri><email>ampedee@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><generator uri="https://gohugo.io/" version="0.79.1">Hugo</generator><entry><title type="text">æ„å»ºä¿éšœä»£ç è´¨é‡çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ</title><link rel="alternate" type="text/html" href="https://waynerv.github.io/posts/build-automatic-code-quality-workflow/"/><id>https://waynerv.github.io/posts/build-automatic-code-quality-workflow/</id><updated>2021-01-04T03:47:46+00:00</updated><published>2021-01-04T11:28:01+08:00</published><author><name>Waynerv</name><uri>https://waynerv.github.io</uri><email>ampedee@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä»£ç è´¨é‡å¯ä»¥è¯´æ˜¯æˆ‘ä»¬çš„èŒä¸šåº•çº¿ã€‚ç»´æŠ¤åº•çº¿ä¸èƒ½å…¨é è‡ªè§‰ï¼Œå› æ­¤æœ¬æ–‡å°†ä»‹ç»â€¦â€¦</summary><content type="html">&lt;p>ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä»£ç è´¨é‡å¯ä»¥è¯´æ˜¯æˆ‘ä»¬çš„èŒä¸šåº•çº¿ã€‚ç»´æŠ¤åº•çº¿ä¸èƒ½å…¨é è‡ªè§‰ï¼Œå› æ­¤æœ¬æ–‡å°†ä»‹ç»å‡ ç§è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œå¹¶å±•ç¤ºå¦‚ä½•å°†å®ƒä»¬é›†æˆåˆ°æ—¥å¸¸çš„å·¥ä½œæµä¸­ï¼Œçœå¿ƒçœåŠ›çš„æŒç»­ä¿éšœä»£ç è´¨é‡ã€‚&lt;/p>
&lt;h2 id="linter">Linter&lt;/h2>
&lt;p>Linter æ˜¯ä¸€ç±»ç”¨äºæ ‡è®°ç¨‹åºé”™è¯¯ã€bugã€é£æ ¼é”™è¯¯å’Œå¯ç–‘ç»“æ„çš„é™æ€ä»£ç åˆ†æå·¥å…·ï¼Œæ¯”å¦‚ Python ä¸­çš„ &lt;code>Pylint&lt;/code>ã€ &lt;code>flake8&lt;/code>ï¼ŒJavaScript ä¸­çš„ &lt;code>EsLint&lt;/code>ï¼Œè¿™ç±»å·¥å…·ä¼šæ‰¾åˆ°ä½ ä»£ç ä¸­çš„é”™è¯¯ï¼Œå¹¶ç»™å‡ºå¦‚ä½•ä¿®å¤çš„æç¤ºã€‚&lt;/p>
&lt;h3 id="ä¸ºä½•è¦ä½¿ç”¨-linter">ä¸ºä½•è¦ä½¿ç”¨ Linter&lt;/h3>
&lt;p>äººæ€»æ˜¯ä¼šç²—å¿ƒå’ŒçŠ¯é”™ï¼Œå€ŸåŠ© Linter æˆ‘ä»¬å¯ä»¥å‘ç°ä»£ç ä¸­ä¸æ˜“å¯Ÿè§‰æˆ–é—æ¼çš„é”™è¯¯ï¼Œå¹¶è¿›è¡Œçº æ­£ã€‚ä½¿ç”¨ Linter æœ‰ä»¥ä¸‹å¥½å¤„ï¼š&lt;/p>
&lt;ul>
&lt;li>æ ¹æ® &lt;a href="https://www.python.org/dev/peps/pep-0008/">PEP8&lt;/a> ç­‰è¯­è¨€è§„èŒƒæŒç»­çš„æç¤ºä¸çº æ­£ï¼Œå¸®åŠ©ä½ å†™å‡ºæ›´å¥½çš„ä»£ç &lt;/li>
&lt;li>å‡å°‘ä»£ç ä¸­çš„æ ¼å¼é”™è¯¯ã€ç¬”è¯¯åŠç³Ÿç³•çš„é£æ ¼ç­‰ä½çº§é”™è¯¯&lt;/li>
&lt;li>èŠ‚çœå›¢é˜Ÿæˆå‘˜ review ä½ ä»£ç çš„æ—¶é—´ï¼Œæé«˜åä½œæ•ˆç‡&lt;/li>
&lt;li>é…ç½®ç®€å•ï¼Œä»…éœ€å‡ æ­¥å³å¯ä¸Šæ‰‹&lt;/li>
&lt;/ul>
&lt;h3 id="flake8-ç¤ºä¾‹">&lt;code>flake8&lt;/code> ç¤ºä¾‹&lt;/h3>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ Python ä¸­çš„ &lt;code>flake8&lt;/code> ä¸ºä¾‹ï¼Œä»‹ç»å…¶ç”¨æ³•ã€‚&lt;/p>
&lt;p>é¦–å…ˆé€šè¿‡ &lt;code>pip&lt;/code> å®‰è£… &lt;code>flake8&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">pip install flake8
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>flake8&lt;/code> çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œç›´æ¥ä»¥éœ€è¦æ£€æŸ¥çš„æ–‡ä»¶æˆ–æ•´ä¸ªç›®å½•çš„è·¯å¾„ä½œä¸º &lt;code>flake8&lt;/code> å‘½ä»¤çš„å‚æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ flake8 . &lt;span class="c1"># æ£€æŸ¥å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶&lt;/span>
./__init__.py:4:1: E402 module level import not at top of file
./__init__.py:4:1: F401 &lt;span class="s1">&amp;#39;.md_toc.main&amp;#39;&lt;/span> imported but unused
./__init__.py:4:25: W292 no newline at end of file
./md_toc.py:6:18: E999 SyntaxError: non-default argument follows default argument
./md_toc.py:28:80: E501 line too long &lt;span class="o">(&lt;/span>&lt;span class="m">108&lt;/span> &amp;gt; &lt;span class="m">79&lt;/span> characters&lt;span class="o">)&lt;/span>
./md_toc.py:48:80: E501 line too long &lt;span class="o">(&lt;/span>&lt;span class="m">113&lt;/span> &amp;gt; &lt;span class="m">79&lt;/span> characters&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿è¡Œç»“æœä¸­ï¼Œ &lt;code>flake8&lt;/code> ä¸ä»…æŒ‡å‡ºäº†å…·ä½“çš„é”™è¯¯åŸå› ï¼Œè¿˜ç»™å‡ºäº†å‡ºé”™çš„æ–‡ä»¶ä½ç½®åŠä»£ç æ‰€åœ¨è¡Œæ•°ã€‚&lt;/p>
&lt;p>æ›´å¤šå…¶ä»–çš„é€‰é¡¹å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å–å¸®åŠ©ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ flake8 --help
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>flake8&lt;/code> çš„å¯è‡ªå®šä¹‰ç¨‹åº¦å¾ˆé«˜ï¼Œé™¤äº†åœ¨è¿è¡Œæ—¶æ·»åŠ å‘½ä»¤é€‰é¡¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥è‡ªå®šä¹‰æ£€æŸ¥è§„åˆ™ã€‚æ–¹æ³•æ˜¯åœ¨è¿è¡Œ &lt;code>flake8&lt;/code> çš„é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  &lt;code>.flake8&lt;/code> æ–‡ä»¶ï¼Œå¹¶å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">[&lt;/span>flake8&lt;span class="o">]&lt;/span>
max-line-length &lt;span class="o">=&lt;/span> &lt;span class="m">120&lt;/span> &lt;span class="c1"># é€‚å½“æé«˜æœ€å¤§è¡Œé•¿åº¦&lt;/span>
max-complexity &lt;span class="o">=&lt;/span> &lt;span class="m">24&lt;/span> &lt;span class="c1"># è®¾ç½®æœ€å¤§å¤æ‚åº¦ä¸º24&lt;/span>
&lt;span class="nv">ignore&lt;/span> &lt;span class="o">=&lt;/span> F401, W503, E203 &lt;span class="c1"># å¿½ç•¥è¿™äº›é”™è¯¯ç±»å‹&lt;/span>
&lt;span class="nv">exclude&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="c1"># å¿½ç•¥ä»¥ä¸‹æ–‡ä»¶&lt;/span>
.git,
__pycache__,
scripts,
logs,
upload,
build,
dist,
docs,
migrations
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>flake8&lt;/code> è¿˜å¯ä»¥æ·»åŠ æ’ä»¶å®ç°æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³å¼ºåˆ¶è¦æ±‚ç¼–å†™å‡½æ•° &lt;code>docstring&lt;/code>ï¼Œå¯ä»¥å®‰è£… &lt;code>flake8-docstrings&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ pip install flake8-docstrings
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°è¿è¡Œæ£€æŸ¥åï¼Œä¼šå‘ç°ç»“æœä¸­å¤šå‡ºäº†å¦‚ä¸‹é”™è¯¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">./__init__.py:1:1: D104 Missing docstring in public package
./md_toc.py:6:1: D103 Missing docstring in public &lt;span class="k">function&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šå…¶ä»–åŠŸèƒ½å’Œæ’ä»¶å¯æŸ¥çœ‹ &lt;code>flake8&lt;/code> çš„&lt;a href="https://flake8.pycqa.org/en/latest/index.html">æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;p>é™¤äº† &lt;code>flake8&lt;/code> ä»¥å¤–ï¼ŒPython è¿˜æœ‰ä»¥ä¸‹ Linter å¯ä¾›é€‰æ‹©ï¼Œå®ƒä»¬çš„ç”¨æ³•å¤§åŒå°å¼‚ï¼Œä½†åœ¨æ£€æŸ¥èŒƒå›´ã€å®¹å¿åº¦ç­‰æ–¹é¢æœ‰æ‰€åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/PyCQA/pylint">Pylint&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/PyCQA/pyflakes">Pyflakes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://pypi.python.org/pypi/PyChecker">Pychecker&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://pypi.python.org/pypi/pep8">Pep8&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="static-type-checker">Static Type Checker&lt;/h2>
&lt;p>Python ä» &lt;a href="https://www.python.org/dev/peps/pep-0484/">PEP 484&lt;/a> å¼•å…¥ &lt;code>Type Hints&lt;/code> ï¼ˆç±»å‹æç¤ºï¼‰ä»¥æ¥ï¼Œé…å¥—çš„å·¥å…·é“¾ç”Ÿæ€ä¹Ÿåœ¨é€æ¸æˆç†Ÿï¼Œå‡ºç°äº†å¦‚ &lt;code>mypy&lt;/code>ã€ &lt;code>pyright&lt;/code> ç­‰é™æ€ç±»å‹æ£€æŸ¥å·¥å…·ã€‚&lt;/p>
&lt;p>å®ƒä»¬å¯ä»¥æ ¹æ® Python ä»£ç ä¸­çš„ç±»å‹æç¤ºè¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥ï¼Œä¸éœ€è¦è¿è¡Œç¨‹åºå°±å¯ä»¥æ‰¾åˆ°ç¨‹åºä¸­çš„é”™è¯¯ã€‚è€Œä¸”å¦‚æœæœ‰é—ç•™ä»£ç ä¸å¥½å¤„ç†ï¼Œè¿˜å¯ä»¥åœ¨ç¨‹åºä¸­æ··åˆä½¿ç”¨åŠ¨æ€å’Œé™æ€ç±»å‹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä»¥ &lt;code>mypy&lt;/code> åšç®€å•ç¤ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># test_mypy.py&lt;/span>
def greeting&lt;span class="o">(&lt;/span>name: str&lt;span class="o">)&lt;/span> -&amp;gt; str:
&lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;Hello &amp;#39;&lt;/span> + name
greeting&lt;span class="o">(&lt;/span>3&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ &lt;code>pip&lt;/code> å®‰è£… &lt;code>mypy&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">pip install mypy
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹è¯¥æ–‡ä»¶è¿è¡Œæ£€æŸ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">â¯ mypy test_mypy.py
test_mypy.py:4: error: Argument &lt;span class="m">1&lt;/span> to &lt;span class="s2">&amp;#34;greeting&amp;#34;&lt;/span> has incompatible &lt;span class="nb">type&lt;/span> &lt;span class="s2">&amp;#34;int&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> expected &lt;span class="s2">&amp;#34;str&amp;#34;&lt;/span>
Found &lt;span class="m">1&lt;/span> error in &lt;span class="m">1&lt;/span> file &lt;span class="o">(&lt;/span>checked &lt;span class="m">1&lt;/span> &lt;span class="nb">source&lt;/span> file&lt;span class="o">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æ£€æŸ¥ç»“æœä¸­ï¼Œ &lt;code>mypy&lt;/code> æç¤ºæˆ‘ä»¬åœ¨è°ƒç”¨ &lt;code>greeting()&lt;/code> æ—¶ä¼ å…¥çš„å‚æ•°ç±»å‹å‡ºé”™ã€‚&lt;/p>
&lt;h3 id="ç±»å‹æç¤ºå¸¦æ¥çš„å¥½å¤„">ç±»å‹æç¤ºå¸¦æ¥çš„å¥½å¤„&lt;/h3>
&lt;p>é™æ€ç±»å‹æ£€æŸ¥å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬åƒé™æ€è¯­è¨€ä¸€æ ·åœ¨è¿è¡Œä»£ç ä¹‹å‰å°±æ•è·åˆ°æŸäº›é”™è¯¯ï¼Œä½†éœ€è¦æˆ‘ä»¬åœ¨ç¨‹åºä¸­åŠ å…¥å¤§é‡çš„ç±»å‹æç¤ºæ‰èƒ½å®Œæ•´å‘æŒ¥å…¶ä½œç”¨ã€‚è™½ç„¶ç¨å¾®åŠ å¤§äº†å·¥ä½œé‡ï¼Œä½†å¼•å…¥ç±»å‹æç¤ºè¿˜ä¼šå¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š&lt;/p>
&lt;ul>
&lt;li>ç›¸æ¯”ä¼ ç»Ÿçš„Â &lt;a href="https://link.zhihu.com/?target=https%3A//realpython.com/documenting-python-code/">docstrings&lt;/a>ï¼Œç±»å‹æç¤ºé…åˆè‰¯å¥½çš„å‘½åæ—¢èƒ½ä½œä¸ºè§£é‡Šæ–‡æ¡£ï¼Œä¹Ÿèƒ½ç”¨äºè‡ªåŠ¨æ£€æŸ¥ã€‚&lt;/li>
&lt;li>å¯ä»¥ä½¿ IDE é€šè¿‡ç±»å‹æ¨æ–­æä¾›æ›´å¥½çš„ä»£ç è¡¥å…¨å’Œæç¤ºåŠŸèƒ½ã€‚&lt;/li>
&lt;li>å¼ºåˆ¶ä½ å»æ€è€ƒåŠ¨æ€è¯­è¨€ç¨‹åºçš„ç±»å‹å¯èƒ½ä¼šå¸®åŠ©ä½ æ„å»ºæ›´æ¸…æ™°çš„ä»£ç æ¶æ„ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="autoformatter">Autoformatter&lt;/h2>
&lt;p>Autoformatter ï¼ˆè‡ªåŠ¨æ ¼å¼åŒ–å™¨ï¼‰é¡¾åæ€ä¹‰æ˜¯å¯ä»¥å°†ä»£ç æŒ‰ç‰¹å®šè§„åˆ™è‡ªåŠ¨æ ¼å¼åŒ–çš„ä¸€ç±»å·¥å…·ã€‚Linter å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘ç°ä»£ç ä¸­çš„æ ¼å¼é”™è¯¯å’Œé£æ ¼é—®é¢˜ï¼Œä½†å¹¶ä¸ä¼šè‡ªåŠ¨çº æ­£ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦å€ŸåŠ©è‡ªåŠ¨æ ¼å¼åŒ–å™¨ï¼Œè¿›ä¸€æ­¥å°†æˆ‘ä»¬ä»é‡å¤çç¢çš„æ‰‹åŠ¨ä¿®æ”¹ä¸­è§£æ”¾å‡ºæ¥ã€‚&lt;/p>
&lt;p>Python ä¸­æœ‰ &lt;code>black&lt;/code> ã€ &lt;code>yapf&lt;/code>ã€ &lt;code>autopep8&lt;/code>ã€ &lt;code>isort&lt;/code> ç­‰ä¼—å¤šæ ¼å¼åŒ–å·¥å…·ï¼Œé™¤äº†æ•´ä½“ä¸Šéµå¾ª PEP8 ä»¥å¤–ï¼Œå„è‡ªéƒ½æœ‰ä¸åŒçš„é£æ ¼è§„èŒƒå’Œé€‚ç”¨èŒƒå›´ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œé€‰æ‹©ã€‚&lt;/p>
&lt;p>ä»¥ &lt;code>black&lt;/code> å’Œä¸‹é¢è¿™æ®µä»£ç ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># test_black.py&lt;/span>
def f &lt;span class="o">(&lt;/span> a: List&lt;span class="o">[&lt;/span> int &lt;span class="o">])&lt;/span> :
&lt;span class="k">return&lt;/span> 37-a&lt;span class="o">[&lt;/span>42-u : y**3&lt;span class="o">]&lt;/span>
def very_important_function&lt;span class="o">(&lt;/span>template: str,*variables,file: os.PathLike,debug:bool&lt;span class="o">=&lt;/span>False,&lt;span class="o">)&lt;/span>:
&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Applies `variables` to the `template` and writes to `file`.&amp;#34;&amp;#34;&amp;#34;&lt;/span>
with open&lt;span class="o">(&lt;/span>file, &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> as f:
...
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆé€šè¿‡ &lt;code>pip&lt;/code> å®‰è£… &lt;code>balck&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">pip install black
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå¯¹éœ€è¦æ ¼å¼åŒ–çš„æ–‡ä»¶æˆ–æ•´ä¸ªç›®å½•çš„è·¯å¾„æ‰§è¡Œ &lt;code>black&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ black test_balck.py
reformatted /Users/waynerv/Repos/github-markdown-toc/gfm_toc/__init__.py
reformatted /Users/waynerv/Repos/github-markdown-toc/gfm_toc/md_toc.py
All &lt;span class="k">done&lt;/span>! âœ¨ ğŸ° âœ¨
&lt;span class="m">2&lt;/span> files reformatted.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>balck&lt;/code> ä¼šé¦–å…ˆæ£€æŸ¥å‡ºä¸ç¬¦åˆå…¶è§„èŒƒçš„æ–‡ä»¶ï¼Œç„¶åç¼–è¾‘æ–‡ä»¶å®Œæˆä¿®æ”¹ï¼Œå¹¶è¾“å‡ºä¿®æ”¹çš„æ–‡ä»¶è·¯å¾„åŠæ•°é‡ã€‚æ ¼å¼åŒ–åçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># test_black.py&lt;/span>
&lt;span class="k">def&lt;/span> &lt;span class="nf">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">37&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">42&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">**&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">def&lt;/span> &lt;span class="nf">very_important_function&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">template&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="o">*&lt;/span>&lt;span class="n">variables&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nb">file&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">PathLike&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">debug&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">bool&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">False&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">):&lt;/span>
&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Applies `variables` to the `template` and writes to `file`.&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="o">...&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>balck&lt;/code> å·ç§°ã€Œä¸å¦¥åçš„ä»£ç æ ¼å¼åŒ–å™¨ã€ï¼Œå…¶ä¸å¦¥åä½“ç°åœ¨åŸºæœ¬æ²¡æœ‰å¯ä¾›è‡ªå®šä¹‰çš„é€‰é¡¹ï¼Œè¦ä¹ˆå…¨ç›˜æ¥å—å®ƒçš„ä»£ç é£æ ¼ï¼Œè¦ä¹ˆå°±ä¸ç”¨å®ƒã€‚å¦‚æœä½ æˆ–è€…ä½ çš„å›¢é˜Ÿèƒ½å¤Ÿæ¥å—å®ƒçš„é£æ ¼ï¼Œä½¿ç”¨ &lt;code>balck&lt;/code> å¯ä»¥èŠ‚çœå¾ˆå¤šèŠ±åœ¨ä»£ç é£æ ¼ä¸Šçš„ç²¾åŠ›å’Œæ—¶é—´ï¼ˆå†ä¹Ÿä¸ç”¨äº‰è®ºæŸç§é£æ ¼å­°ä¼˜å­°åŠ£äº†ï¼‰ã€‚&lt;/p>
&lt;p>å®è·µä¸­æˆ‘ä»¬å¯ä»¥å¯¹æœ€å¤§è¡Œé•¿åº¦ä»¥åŠå¼•å·æ ¼å¼åŒ–é€‰é¡¹åšä¸€äº›è°ƒæ•´ï¼Œæ–¹æ³•æ˜¯åœ¨æ‰§è¡Œ &lt;code>black&lt;/code> çš„é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  &lt;code>pyproject.tomal&lt;/code> æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="p">[&lt;/span>&lt;span class="n">tool&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">black&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">line&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">120&lt;/span>
&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">normalization&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">true&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ide-çš„è‡ªå¸¦å·¥å…·">IDE çš„è‡ªå¸¦å·¥å…·&lt;/h3>
&lt;p>ç°ä»£çš„ IDE å’Œç¼–è¾‘å™¨åŸºæœ¬éƒ½ä¼šè‡ªå¸¦ Linter å’Œæ ¼å¼åŒ–ç­‰åŠŸèƒ½ï¼Œæ¯”å¦‚ &lt;code>PyCharm&lt;/code> å°±å¯ä»¥é€šè¿‡ &lt;code>âŒ¥ âŒ˜ L&lt;/code> å¿«æ·é”®æ ¼å¼åŒ–å½“å‰æ–‡ä»¶çš„ä»£ç ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬è¿˜æœ‰å¿…è¦æ‰‹åŠ¨é›†æˆè¿™äº›ç¬¬ä¸‰æ–¹å·¥å…·å—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯æœ‰å¿…è¦ï¼Œæˆ‘ä»¬ä»¥ç¬¬ä¸‰æ–¹å’Œ IDE è‡ªå¸¦çš„ä»£ç å·¥å…·ä½œå¯¹æ¯”ï¼š&lt;/p>
&lt;ul>
&lt;li>è‡ªå¸¦å·¥å…·å¯¹ç¯å¢ƒä¾èµ–ç¨‹åº¦å¾ˆé«˜ï¼Œå¿…é¡»è¦æœ‰ç‰¹å®šçš„äºŒè¿›åˆ¶åŒ…åŠé…ç½®æ–‡ä»¶æ‰èƒ½æ‰§è¡Œï¼›è€Œä½¿ç”¨ä¸é¡¹ç›®ç›¸åŒè¯­è¨€å®ç°çš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä½œä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–ï¼Œé…ç½®ä¹Ÿèƒ½å¾ˆæ–¹ä¾¿åœ°æ•´åˆåˆ°é¡¹ç›®æœ¬èº«çš„é…ç½®æ–‡ä»¶ä¸­ï¼ˆå¦‚&lt;code>pyproject.toml&lt;/code>ã€&lt;code>tox.ini&lt;/code>ç­‰ï¼‰ï¼Œä¸”é€šå¸¸éƒ½å¯ä»¥å¾ˆå¿«åœ°é›†æˆåˆ°ä¸åŒ IDE ä¸­ã€‚&lt;/li>
&lt;li>è‡ªå¸¦å·¥å…·åªèƒ½åœ¨ IDE çš„å›¾å½¢ç•Œé¢ä¸­æ‰‹åŠ¨æ‰§è¡Œï¼›è€Œç¬¬ä¸‰æ–¹å·¥å…·åªè¦æœ‰åŸºç¡€çš„ä»£ç è¿è¡Œç¯å¢ƒå°±å¯ä»¥æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬å¾ˆæ–¹ä¾¿çš„é›†æˆåˆ° Hooksã€CI ä¸­è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚&lt;/li>
&lt;li>è‡ªå¸¦å·¥å…·å¹¶ä¸ä¸€å®šä¸¥æ ¼éµå¾ª PEP8 ç­‰é€šç”¨è§„èŒƒï¼Œè€Œä¸”ä¸æ–¹ä¾¿åœ¨åä½œæˆå‘˜ä¸­åˆ†äº«é…ç½®ï¼Œè¯è¯´å›æ¥ï¼Œå‡å¦‚ä½ ç”¨ &lt;code>PyCharm&lt;/code> ä½†ä½ çš„åŒäº‹ç”¨ &lt;code>VSCode&lt;/code> å‘¢ï¼Ÿ&lt;/li>
&lt;/ul>
&lt;p>åœ¨æ¥ä¸‹æ¥çš„ Hooks å’Œ Pipeline ä¸¤èŠ‚å†…å®¹ä¸­ï¼Œä½ å°†è¿›ä¸€æ­¥è®¤è¯†åˆ°é›†æˆç¬¬ä¸‰æ–¹å·¥å…·å¸¦æ¥çš„ä¼˜åŠ¿ã€‚&lt;/p>
&lt;h2 id="hooks">Hooks&lt;/h2>
&lt;p>åœ¨ä¸Šæ–‡ä¸­æˆ‘ä»¬ä»‹ç»äº†å¾ˆå¤šä¿éšœè´¨é‡çš„å·¥å…·ï¼Œä½†åœ¨æ—¥å¸¸ç¼–ç ä¸­ï¼Œæˆ‘ä»¬æ€»ä¸èƒ½æ¯ä¸€æ¬¡æäº¤ä»£ç å‰ï¼Œéƒ½æŠŠè¿™äº›å·¥å…·æ‰‹åŠ¨æ‰§è¡Œä¸€éå§ï¼Ÿè¿™çœ‹ä¸Šå»ä¸æ˜¯é«˜æ•ˆçš„åšæ³•ï¼Œåº†å¹¸åœ°æ˜¯æˆ‘ä»¬æœ‰ç°æˆé€”å¾„è§£å†³è¿™äº›é—®é¢˜ã€‚&lt;/p>
&lt;h3 id="git-hooks">Git Hooks&lt;/h3>
&lt;p>Git å¯ä»¥åœ¨ä»“åº“ä¸­å‘ç”Ÿç‰¹å®šäº‹ä»¶æ—¶è‡ªåŠ¨è¿è¡Œè‡ªå®šä¹‰çš„è„šæœ¬ï¼Œè¿™äº›è‡ªå®šä¹‰è„šæœ¬å³ç§°ä¸º &lt;code>hooks&lt;/code>ã€‚ å®ƒä»¬è®©ä½ å¯ä»¥åœ¨å¼€å‘å‘¨æœŸçš„å…³é”®ç‚¹è§¦å‘å¯å®šåˆ¶çš„åŠ¨ä½œï¼Œæ¯”å¦‚æ¯æ¬¡æ‰§è¡Œæäº¤å‰éƒ½æ‰§è¡Œä¸€æ¬¡ &lt;code>flake8&lt;/code> å‘½ä»¤ã€‚å¤§éƒ¨åˆ†å…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¹Ÿä¼šæä¾›ç±»ä¼¼çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;p>&lt;code>hooks&lt;/code> ä¿å­˜åœ¨ Git ä»“åº“çš„ &lt;code>.git/hooks&lt;/code> ç›®å½•ä¸­ï¼Œå®ƒå¯ä»¥æ˜¯æ™®é€šçš„ shell è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯ Pythonã€Ruby ç­‰è¯­è¨€çš„å¯æ‰§è¡Œè„šæœ¬ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†å¸¸ç”¨å·¥å…·é›†æˆåˆ° &lt;code>hooks&lt;/code> ä¸­ã€‚ &lt;code>hooks&lt;/code> é€šå¸¸æŒ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå¸¸ç”¨çš„å®¢æˆ·ç«¯ç±»æœ‰ &lt;code>pre-commit&lt;/code> ã€ &lt;code>prepare-commit-msg&lt;/code>ã€ &lt;code>commit-msg&lt;/code>ã€ &lt;code>post-commit&lt;/code>ã€ &lt;code>pre-rebase&lt;/code> ç­‰ &lt;code>hooks&lt;/code>ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨åç§°æ‰€ä»£è¡¨çš„äº‹ä»¶è§¦å‘æ—¶è¿è¡Œã€‚&lt;/p>
&lt;p>ä»¥ &lt;code>pre-commit&lt;/code> ä¸ºä¾‹ï¼Œè¯¥ &lt;code>hooks&lt;/code> åœ¨è¾“å…¥æäº¤ä¿¡æ¯å‰è¿è¡Œã€‚ å®ƒå¯ä»¥æ£€æŸ¥å³å°†æäº¤çš„å¿«ç…§ï¼Œå¦‚æœè¯¥ &lt;code>hooks&lt;/code> ä»¥éé›¶å€¼é€€å‡ºï¼ŒGit å°†æ”¾å¼ƒæ­¤æ¬¡æäº¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥æ£€æŸ¥æäº¤çš„ä»£ç é£æ ¼æ˜¯å¦æ­£ç¡®ï¼ˆè¿è¡Œä¾‹å¦‚ &lt;code>flake8&lt;/code>ã€ &lt;code>black&lt;/code> ç­‰ç¨‹åºï¼‰ã€æ˜¯å¦å¼•å…¥å®‰å…¨é£é™©ç­‰ç­‰ã€‚æ•´ä¸ªæµç¨‹ç¤ºæ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-pre-commit-workflow.png" alt="2020-01-04-pre-commit-workflow">&lt;/p>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å±•ç¤ºï¼Œå¦‚ä½•å°†ä¸Šæ–‡ä»‹ç»çš„ä¼—å¤šå·¥å…·å¿«é€Ÿåœ°é›†æˆåˆ° &lt;code>pre-commit hooks&lt;/code> ä¸­ã€‚&lt;/p>
&lt;h3 id="pre-commit">pre-commit&lt;/h3>
&lt;p>&lt;code>pre-commit&lt;/code> æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å’Œç»´æŠ¤å¤šç§è¯­è¨€ &lt;code>pre-commit hooks&lt;/code> çš„æ¡†æ¶ï¼Œå°±åƒ Python çš„åŒ…ç®¡ç†å™¨ &lt;code>pip&lt;/code> ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code>pre-commit&lt;/code> å°†ä»–äººåˆ›å»ºå¹¶åˆ†äº«çš„ &lt;code>pre-commit hooks&lt;/code> å®‰è£…åˆ°è‡ªå·±çš„é¡¹ç›®ä»“åº“ä¸­ã€‚ &lt;code>pre-commit&lt;/code> å¤§å¤§å‡å°‘äº†æˆ‘ä»¬ä½¿ç”¨ &lt;code>git hooks&lt;/code> çš„éš¾åº¦ï¼Œä½ åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæƒ³è¦çš„ &lt;code>hooks&lt;/code>ï¼Œå®ƒä¼šæ›¿ä½ å®‰è£…ä»»æ„è¯­è¨€ç¼–å†™çš„ &lt;code>hooks&lt;/code> å¹¶è§£å†³ç¯å¢ƒä¾èµ–é—®é¢˜ï¼Œç„¶ååœ¨æ¯æ¬¡æäº¤å‰æ‰§è¡Œã€‚&lt;/p>
&lt;p>&lt;code>pre-commit&lt;/code> çš„ç®€å•ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é€šè¿‡ &lt;code>pip&lt;/code> å®‰è£… &lt;code>pre-commit&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>pre-commit&lt;/code> æ˜¯é¢å‘å¤šè¯­è¨€çš„ï¼Œå› æ­¤å®ƒè¿˜æ”¯æŒé€šè¿‡ &lt;code>homebrew&lt;/code> ç­‰æ–¹å¼å®‰è£…ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ·»åŠ é…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º &lt;code>.pre-commit-config.yml&lt;/code> çš„æ–‡ä»¶ï¼Œé€šå¸¸æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬æŒ‰ç‰¹å®šæ ¼å¼æ·»åŠ éœ€è¦è¿è¡Œçš„ &lt;code>hooks&lt;/code> å¹¶æŒ‡å®šå‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">repos&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="n">repo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">psf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">black&lt;/span>
&lt;span class="n">rev&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">20.8&lt;/span>&lt;span class="n">b1&lt;/span>
&lt;span class="n">hooks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="nb">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">black&lt;/span>
&lt;span class="n">language_version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">python3&lt;/span>
&lt;span class="n">exclude&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">^&lt;/span>&lt;span class="n">migrations&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">uploads&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">scripts&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">logs&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="n">repo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pycqa&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">flake8&lt;/span>
&lt;span class="n">rev&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">3.8&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;span class="n">hooks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="nb">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">flake8&lt;/span>
&lt;span class="n">exclude&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">^&lt;/span>&lt;span class="n">migrations&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">uploads&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">scripts&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">logs&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="o">/|^&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="n">repo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hooks&lt;/span>
&lt;span class="n">rev&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">3.0&lt;/span>
&lt;span class="n">hooks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="nb">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">check&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">added&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">large&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">files&lt;/span>
&lt;span class="n">args&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">maxkb&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">512&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¯¥ç¤ºä¾‹æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº† &lt;code>black&lt;/code> ã€ &lt;code>flake8&lt;/code> ä»¥åŠä¸€ä¸ªæ£€æŸ¥æ˜¯å¦æ·»åŠ äº†å¤§ä½“ç§¯æ–‡ä»¶åˆ° Git çš„ &lt;code>hooks&lt;/code>ï¼Œè¿˜åˆ†åˆ«æŒ‡å®šäº†è¯­è¨€ç‰ˆæœ¬ã€è·³è¿‡æ£€æŸ¥è·¯å¾„ç­‰é€‰é¡¹ã€‚&lt;/p>
&lt;p>é…ç½®æ–‡ä»¶çš„é€‰é¡¹å«ä¹‰å‚è§ &lt;a href="https://pre-commit.com/#plugins">https://pre-commit.com/#plugins&lt;/a>ï¼Œæ‰€æœ‰æ”¯æŒå®‰è£…çš„ &lt;code>hooks&lt;/code> åˆ—è¡¨å‚è§&lt;a href="https://pre-commit.com/hooks.html">https://pre-commit.com/hooks.html&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£… &lt;code>git hook&lt;/code> è„šæœ¬ã€‚åœ¨é…ç½®æ–‡ä»¶æ‰€åœ¨çš„æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">$ pre-commit install
pre-commit installed at .git/hooks/pre-commit
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¼šåœ¨ &lt;code>.git/hooks&lt;/code> æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª &lt;code>pre-commit&lt;/code> è„šæœ¬æ–‡ä»¶ï¼Œå¹¶åœ¨æ¥ä¸‹æ¥ä½ æ¯ä¸€æ¬¡æäº¤ä¹‹å‰è¿è¡Œï¼ç°åœ¨æˆ‘ä»¬å¯ä»¥å°è¯•æäº¤ä¸€æ¬¡ä»£ç äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ï¼ˆå¯é€‰æ­¥éª¤ï¼‰å¯¹æ‰€æœ‰æ–‡ä»¶è¿è¡Œ &lt;code>hooks&lt;/code>ã€‚&lt;/p>
&lt;p>é€šå¸¸ &lt;code>pre-commit&lt;/code> åªä¼šåœ¨è§¦å‘ &lt;code>git hooks&lt;/code> æ—¶å¯¹å‘ç”Ÿæ›´æ”¹çš„æ–‡ä»¶è¿è¡Œï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨å¯¹å½“å‰ä»“åº“çš„æ‰€æœ‰æ–‡ä»¶è¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="err">$&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nb">all&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">files&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Initializing&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">psf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">black&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Initializing&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pycqa&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">flake8&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Initializing&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hooks&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">psf&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">black&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Once&lt;/span> &lt;span class="n">installed&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">reused&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">few&lt;/span> &lt;span class="n">minutes&lt;/span>&lt;span class="o">...&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pycqa&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">flake8&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Once&lt;/span> &lt;span class="n">installed&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">reused&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">few&lt;/span> &lt;span class="n">minutes&lt;/span>&lt;span class="o">...&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hooks&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Once&lt;/span> &lt;span class="n">installed&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">reused&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">few&lt;/span> &lt;span class="n">minutes&lt;/span>&lt;span class="o">...&lt;/span>
&lt;span class="n">black&lt;/span>&lt;span class="o">....................................................................&lt;/span>&lt;span class="n">Failed&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="n">hook&lt;/span> &lt;span class="nb">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">black&lt;/span>
&lt;span class="o">-&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="n">were&lt;/span> &lt;span class="n">modified&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">hook&lt;/span>
&lt;span class="n">reformatted&lt;/span> &lt;span class="o">/.../&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;span class="n">reformatted&lt;/span> &lt;span class="o">/.../&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">generate_toc_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;span class="n">All&lt;/span> &lt;span class="n">done&lt;/span>&lt;span class="err">!&lt;/span> &lt;span class="err">âœ¨&lt;/span> &lt;span class="err">ğŸ°&lt;/span> &lt;span class="err">âœ¨&lt;/span>
&lt;span class="mi">2&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="n">reformatted&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="n">unchanged&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="n">flake8&lt;/span>&lt;span class="o">...................................................................&lt;/span>&lt;span class="n">Passed&lt;/span>
&lt;span class="n">Check&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="n">large&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="o">..............................................&lt;/span>&lt;span class="n">Passed&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç»“æœæ˜¾ç¤ºæˆ‘ä»¬æœ‰æ–‡ä»¶æœªé€šè¿‡ &lt;code>black&lt;/code> æ£€æŸ¥ï¼Œä½† &lt;code>black&lt;/code> åŒæ—¶ä¹Ÿå¸®æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œäº†æ ¼å¼åŒ–ï¼Œå› æ­¤åªéœ€è¦æš‚å­˜å¹¶é‡æ–°æäº¤è¿™äº›æ–‡ä»¶å³å¯ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="pre-commit-hooks-çš„é™åˆ¶">&lt;code>pre-commit hooks&lt;/code> çš„é™åˆ¶&lt;/h3>
&lt;p>ä½¿ç”¨ &lt;code>pre-commit&lt;/code> ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ä¸°å¯Œå¤šæ ·çš„ä»£ç å·¥å…·é›†æˆåˆ° Git çš„å·¥ä½œæµä¸­ï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†æˆ‘ä»¬çš„æ•ˆç‡ï¼Œä½† &lt;code>pre-commit hooks&lt;/code> æœ¬èº«å­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼š&lt;/p>
&lt;ul>
&lt;li>å®¢æˆ·ç«¯ &lt;code>hooks&lt;/code> å¹¶ä¸ä¼šéšä»£ç åº“ä¸€èµ·è¢«å¤åˆ¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æœ¬åœ°ä»“åº“é€šè¿‡ &lt;code>pre-commit install&lt;/code> æ‰§è¡Œå®‰è£…ä¹‹å &lt;code>hooks&lt;/code> æ‰ä¼šç”Ÿæ•ˆã€‚&lt;/li>
&lt;li>ä½¿ç”¨ &lt;code>git commit --no-verify&lt;/code> å³å¯ç»•è¿‡æ‰€æœ‰çš„ &lt;code>pre-commit hooks&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>pre-commit&lt;/code> è§£å†³äº†åœ¨æœ¬åœ°é›†æˆä»£ç å·¥å…·çš„é—®é¢˜ï¼Œä½†åœ¨å›¢é˜Ÿåˆä½œçš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ç§æœºåˆ¶å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯å¯¹æ‰€æœ‰æˆå‘˜æ¨é€çš„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ–½åŠ ç‰¹å®šçš„çº¦æŸï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° Pipelines äº†ã€‚&lt;/p>
&lt;h2 id="pipelines">Pipelines&lt;/h2>
&lt;p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ CI/CD è¿™ä¸€æ¦‚å¿µã€‚&lt;/p>
&lt;h3 id="cicd">CI/CD&lt;/h3>
&lt;p>CIï¼ˆContinuous Integrationï¼ŒæŒç»­é›†æˆï¼‰æ˜¯ä¸€ç§è½¯ä»¶å®è·µï¼Œå®ƒè¦æ±‚æˆ‘ä»¬é¢‘ç¹åœ°å‘å…±äº«ä»“åº“æäº¤ä»£ç ã€‚æ›´é¢‘ç¹åœ°æäº¤ä»£ç å¯ä»¥æ›´å¿«åœ°å‘ç°é”™è¯¯ï¼Œå‡å°‘æˆ‘ä»¬åœ¨å‘ç°é”™è¯¯æ—¶éœ€è¦è°ƒè¯•çš„ä»£ç é‡ï¼Œä¹Ÿä½¿å¾—å›¢é˜Ÿä¸åŒæˆå‘˜é—´çš„å˜æ›´æ›´å®¹æ˜“åˆå¹¶ã€‚CI å¯ä»¥èŠ‚çœæˆ‘ä»¬è°ƒè¯•é”™è¯¯æˆ–è§£å†³åˆå¹¶å†²çªçš„æ—¶é—´ï¼Œè®©æˆ‘ä»¬æœ‰æ›´å¤šçš„æ—¶é—´æ¥ç¼–å†™ä»£ç ã€‚&lt;/p>
&lt;p>å½“æäº¤ä»£ç åˆ°å…±äº«ä»“åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸€æ¬¡æäº¤çš„ä»£ç è¿›è¡Œæ„å»ºå’Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿æäº¤ä¸ä¼šå¼•å…¥é”™è¯¯ã€‚è¿™äº›æµ‹è¯•æ—¢åŒ…æ‹¬ä¸Šæ–‡æåˆ°çš„ Linterï¼Œä¹ŸåŒ…æ‹¬å®‰å…¨æ€§æ£€æŸ¥ã€æµ‹è¯•è¦†ç›–ç‡ã€åŠŸèƒ½æµ‹è¯•å’Œå…¶ä»–è‡ªå®šä¹‰æ£€æŸ¥ã€‚æˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ª CI æœåŠ¡å™¨ä½œä¸º Runner ä»¥è¿è¡Œå¯¹æäº¤ä»£ç çš„æ„å»ºå’Œæ£€æŸ¥ã€‚&lt;/p>
&lt;p>CDï¼ˆContinuous Deploymentï¼ŒæŒç»­éƒ¨ç½²ï¼‰æ˜¯ CI çš„ä¸‹ä¸€æ­¥ã€‚æˆ‘ä»¬ä¸ä»…åœ¨æ¯æ¬¡æ¨é€ä»£ç åˆ°å…±äº«ä»£ç åº“æ—¶è¿›è¡Œæ„å»ºå’Œæµ‹è¯•ï¼Œè¿˜ä¼šåœ¨ä¸éœ€è¦ä»»ä½•äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨éƒ¨ç½²ä»£ç åˆ°ç”Ÿäº§ç¯å¢ƒã€‚æ­¤å¤–è¿˜æœ‰Continuous Delivery ï¼ˆæŒç»­äº¤ä»˜ï¼‰ï¼Œå®ƒå’ŒæŒç»­éƒ¨ç½²çš„åŒºåˆ«åœ¨äºéœ€è¦äººå·¥å¹²é¢„æ‰ä¼šæ‰§è¡Œéƒ¨ç½²ã€‚&lt;/p>
&lt;h3 id="pipeline">Pipeline&lt;/h3>
&lt;p>Pipeline æ˜¯æŒç»­é›†æˆã€äº¤ä»˜å’Œéƒ¨ç½²çš„é¡¶å±‚å…·è±¡åŒ–ç»„ä»¶ï¼Œå®ƒç”±é¡ºåºæ‰§è¡Œçš„é˜¶æ®µï¼ˆstageï¼‰ä»¥åŠæ¯ä¸ªé˜¶æ®µä¸­å¹¶è¡Œçš„ä»»åŠ¡ï¼ˆjobï¼‰ç»„æˆã€‚ä¸€ä¸ªç®€å•çš„ pipeline å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-pipelines.png" alt="2020-01-04-pipelines">&lt;/p>
&lt;p>é¦–å…ˆå¹¶è¡Œåœ°æ‰§è¡Œ &lt;code>build&lt;/code> é˜¶æ®µçš„æ‰€æœ‰ä»»åŠ¡ï¼ˆ&lt;code>build_a&lt;/code> å’Œ &lt;code>build_b&lt;/code>ï¼‰ï¼Œæ‰€æœ‰ä»»åŠ¡æˆåŠŸåç»§ç»­æ‰§è¡Œä¸‹ä¸€é˜¶æ®µçš„ä»»åŠ¡ï¼Œä»¥æ­¤ç±»æ¨ã€‚pipeline è¿˜èƒ½å®šä¹‰æˆæŒ‰æ›´å¤æ‚çš„é€»è¾‘è§„åˆ™è¿è¡Œã€‚&lt;/p>
&lt;p>ä¸‹é¢æˆ‘ä»¬ä»¥ GitLab CI ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•é…ç½®ä¸€ä¸ª pipelineï¼Œå¹¶åœ¨æµ‹è¯•é˜¶æ®µæ‰§è¡Œä¸Šæ–‡ä»‹ç»çš„æ£€æŸ¥å·¥å…·ï¼Œè§£å†³ä¸èƒ½å¯¹å›¢é˜Ÿæˆå‘˜æäº¤ä»£ç è¿›è¡Œå¼ºåˆ¶çº¦æŸçš„é—®é¢˜ã€‚&lt;/p>
&lt;h3 id="gitlab-ci-ç¤ºä¾‹">GitLab CI ç¤ºä¾‹&lt;/h3>
&lt;h4 id="é…ç½®-runner">é…ç½® Runner&lt;/h4>
&lt;p>é¦–å…ˆæˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸ªè¿è¡Œä»»åŠ¡çš„æœåŠ¡å™¨ä½œä¸º Runnerï¼Œè¿™éœ€è¦æˆ‘ä»¬æœ‰å¯ç”¨çš„æœåŠ¡å™¨ä¸»æœºï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬åœ°çš„å¼€å‘æœºå™¨æˆ–è´­ä¹° GitLab æä¾›çš„ Runnerï¼‰ã€‚é…ç½® Runner æ•´ä½“åˆ†ä¸¤æ­¥ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨ä¸»æœºä¸Š&lt;a href="https://docs.gitlab.com/runner/install/">å®‰è£… GitLab Runner&lt;/a>ï¼ŒGitLab Runner æ˜¯ä¸€ä¸ªç”¨äº GitLab CI/CD å¹¶åœ¨ä¸»æœºä¸Šç®¡ç†ã€æ‰§è¡Œ pipeline ä»»åŠ¡çš„åº”ç”¨ã€‚å¯¹äºä¸åŒçš„æ“ä½œç³»ç»Ÿä¸æ¶æ„ï¼Œå…·ä½“çš„å®‰è£…æ­¥éª¤ä¹Ÿæœ‰å¾ˆå¤§åŒºåˆ«ï¼Œè¯¦æƒ…å‚è§æ–‡æ¡£ã€‚&lt;/li>
&lt;li>ä¸ºé¡¹ç›®ï¼ˆæˆ–é¡¹ç›®ç»„ï¼‰&lt;a href="https://docs.gitlab.com/runner/register/">æ³¨å†Œ Runner&lt;/a>ã€‚è¿™ä¸€æ­¥é¦–å…ˆéœ€è¦ä» GitLab é¡¹ç›®ä¸»é¡µçš„ &lt;strong>Settings &amp;gt; CI/CD&lt;/strong> &lt;strong>&amp;gt; Runners settings&lt;/strong> è·å–é¡¹ç›®çš„ URL å’Œæ³¨å†Œä»¤ç‰Œï¼Œç„¶ååœ¨ Runner æ‰€åœ¨çš„æœºå™¨è¿è¡Œ &lt;code>register&lt;/code> å‘½ä»¤ä½¿ç”¨ URL å’Œä»¤ç‰Œå®Œæˆæ³¨å†Œï¼Œå¹¶é€‰æ‹©åˆé€‚çš„ Runner ç±»å‹ï¼Œè¯¦ç»†æ­¥éª¤å‚è§æ–‡æ¡£ã€‚&lt;/li>
&lt;/ul>
&lt;p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å°†å¯ä»¥åœ¨ &lt;strong>Runners settings&lt;/strong> é¡µé¢æŸ¥çœ‹å¯ç”¨çš„ Runner å’ŒçŠ¶æ€ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-runner-status.png" alt="2020-01-04-runner-status">&lt;/p>
&lt;h4 id="åˆ›å»º-gitlabyml">åˆ›å»º &lt;code>.gitlab.yml&lt;/code>&lt;/h4>
&lt;p>æˆ‘ä»¬å°†åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªé…ç½® pipeline çš„ &lt;code>.gitlab.yml&lt;/code> æ–‡ä»¶ï¼ŒGitLab å°†åœ¨æ¯ä¸€æ¬¡æˆ‘ä»¬æ¨é€ä»£ç åˆ°å…±äº«ä»“åº“æ—¶ï¼Œè¯»å–è¯¥æ–‡ä»¶ä¸­çš„å®šä¹‰å’ŒæŒ‡ä»¤ï¼Œåˆ›å»ºä¸€æ¡ä¸åŒé˜¶æ®µåŠä»»åŠ¡ç»„æˆçš„ pipelineï¼Œå¹¶å°†é˜¶æ®µä¸­çš„ä»»åŠ¡æ´¾å‘ç»™å¯ç”¨çš„ Runner æ‰§è¡Œã€‚æˆ‘ä»¬ä»¥å¦‚ä¸‹ &lt;code>.gitlab.yml&lt;/code> æ–‡ä»¶ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="nt">before_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">python --version&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">pip install -r requirements-ci.txt&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">stages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">Pre-commit Hooks&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">Static Analysis&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">pre-commit&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pre-commit Hooks&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">variables&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">PRE_COMMIT_HOME&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${CI_PROJECT_DIR}/.cache/pre-commit&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">cache&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">20201116dash&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">paths&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">${PRE_COMMIT_HOME}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">pre-commit run --all-files&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">mypy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Static Analysis&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">allow_failure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">only&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">refs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">master&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">pwd&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">ls -l&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">python -m mypy app&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">flake8&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Static Analysis&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">pwd&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">python -m flake8&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">git-lint&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Static Analysis&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">git log -1 --pretty=%B | gitlint --contrib=CT1 --ignore=body-is-missing&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ï¼š&lt;/p>
&lt;ul>
&lt;li>Runner åº”è¯¥æ‰§è¡Œçš„ä»»åŠ¡çš„ç»“æ„å’Œé¡ºåºã€‚&lt;/li>
&lt;li>é‡åˆ°ç‰¹å®šæ¡ä»¶æ—¶ï¼ŒRunner åº”åšå‡ºçš„å†³å®šã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸Šé¢çš„ç¤ºä¾‹å®šä¹‰äº†å¦‚ä¸‹ pipelineï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-pipeline-graph.png" alt="2020-01-04-pipeline-graph">&lt;/p>
&lt;ul>
&lt;li>&lt;code>before_script&lt;/code>å…³é”®å­—å®šä¹‰äº†åœ¨æ¯ä¸ªä»»åŠ¡å‰æ‰§è¡Œçš„ä¸€ç»„å‘½ä»¤ï¼Œæˆ‘ä»¬é€šè¿‡è¿™é‡Œè®¾ç½®çš„å‘½ä»¤å®‰è£…è¿è¡Œ pipeline æ‰€éœ€çš„ä¾èµ–ã€‚&lt;/li>
&lt;li>&lt;code>stage&lt;/code> å…³é”®å­—å®šä¹‰äº† &lt;code>Pre-commit Hooks&lt;/code> å’Œ &lt;code>Static Analysis&lt;/code> ä¸¤ä¸ªé˜¶æ®µã€‚&lt;/li>
&lt;li>ä¹‹ååˆ™å®šä¹‰äº† &lt;code>pre-commit&lt;/code> ã€ &lt;code>git-lint&lt;/code>ã€ &lt;code>mypy&lt;/code> å’Œ &lt;code>flake8&lt;/code> ç­‰å¤šä¸ªä»»åŠ¡åŠæ‰€å±é˜¶æ®µã€‚&lt;/li>
&lt;li>æ¯ä¸ªä»»åŠ¡ä¸­é€šè¿‡ &lt;code>script&lt;/code> å…³é”®å­—å®šä¹‰è¯¥ä»»åŠ¡æ‰€è¿è¡Œçš„è„šæœ¬å‘½ä»¤ã€‚&lt;/li>
&lt;li>åœ¨ &lt;code>pre-commit&lt;/code> ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†ä¸Šä¸€èŠ‚ä»‹ç»çš„ &lt;code>pre-commit&lt;/code> æ”¾åœ¨æœåŠ¡ç«¯è¿è¡Œï¼Œè¿™èƒ½ç¡®ä¿å¯¹ä»»ä½•äººæäº¤çš„ä»£ç éƒ½ä¼šè¿è¡ŒåŸå…ˆåªåœ¨æœ¬åœ°ç”Ÿæ•ˆçš„ &lt;code>pre-commit hooks&lt;/code>ã€‚æˆ‘ä»¬è¿˜é€šè¿‡&lt;a href="https://docs.gitlab.com/ee/ci/variables/predefined_variables.html">é¢„å®šä¹‰å˜é‡&lt;/a>å’Œ &lt;code>cache&lt;/code> å…³é”®å­—ç¼“å­˜è¿è¡Œä»»åŠ¡æ‰€éœ€çš„æ–‡ä»¶ä»¥åŠ å¿«æ‰§è¡Œé€Ÿåº¦ã€‚&lt;/li>
&lt;li>åœ¨ &lt;code>mypy&lt;/code> ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ &lt;code>allow_failure&lt;/code> å…³é”®å­—æ›´æ”¹äº†ä»»åŠ¡æˆåŠŸæ‰ä¼šè¿›å…¥ä¸‹ä¸€é˜¶æ®µè¿™ä¸€é»˜è®¤è¡Œä¸ºï¼Œå¹¶é€šè¿‡ &lt;code>only&lt;/code> å…³é”®å­—é™åˆ¶å…¶åªå¯¹ &lt;code>master&lt;/code> åˆ†æ”¯çš„æäº¤æ‰§è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;p>å…³äº &lt;code>.gitlab.yml&lt;/code> çš„æ›´å¤šè¯´æ˜è¯·å‚é˜… &lt;a href="https://docs.gitlab.com/ee/ci/yaml/README.html">GitLab CI/CD pipeline é…ç½®å‚è€ƒæ‰‹å†Œ&lt;/a> ä»¥åŠ &lt;a href="https://docs.gitlab.com/ee/ci/examples/README.html">GitLab CI/CD ç¤ºä¾‹&lt;/a>ã€‚&lt;/p>
&lt;h4 id="æŸ¥çœ‹-pipeline-çš„è¿è¡ŒçŠ¶æ€">æŸ¥çœ‹ pipeline çš„è¿è¡ŒçŠ¶æ€&lt;/h4>
&lt;p>ç°åœ¨å½“æˆ‘ä»¬æ¨é€æ–°çš„ä»£ç åˆ°å…±äº«ä»“åº“æ—¶ï¼Œä¸€ä¸ªæ–°çš„ pipeline ä¼šè¢«è§¦å‘è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹é€”å¾„åœ¨ GitLab ä»“åº“æŸ¥çœ‹ pipeline çš„è¿è¡ŒçŠ¶æ€ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¿›å…¥ &lt;strong>CI/CD &amp;gt; Pipelines&lt;/strong>ã€‚å°†å±•ç¤ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé˜¶æ®µçš„ pipelineï¼ˆå½“å‰çŠ¶æ€ä¸ºå·²é€šè¿‡ï¼‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-pipeline-entry.png" alt="2020-01-04-pipeline-entry">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç‚¹å‡» pipeline çš„ ID å³å¯æŸ¥çœ‹è¯¥ pipeline çš„è¿è¡Œç¤ºæ„å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-pipeline-graph.png" alt="2020-01-04-pipeline-graph">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç‚¹å‡»ä¸€ä¸ªä»»åŠ¡åç§°ï¼Œå¯æŸ¥çœ‹è¯¥ä»»åŠ¡çš„è¯¦ç»†è¿è¡Œä¿¡æ¯ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-job-detail.png" alt="2020-01-04-job-detail">&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä»¥ä¸Šå³ä¸ºä¸€ä¸ªå®Œæ•´çš„ GitLab CI pipeline ç¤ºä¾‹ã€‚åœ¨è¯¥ pipeline ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¯ä¸€æ¬¡æäº¤ä»£ç åï¼š&lt;/p>
&lt;ul>
&lt;li>å¯¹æ‰€æœ‰æ–‡ä»¶è¿è¡Œé›†æˆäº†ä¼—å¤š &lt;code>hooks&lt;/code> çš„ &lt;code>pre-commit&lt;/code>ï¼Œç¡®ä¿ä»£ç å·²åœ¨æœ¬åœ°é€šè¿‡äº† &lt;code>pre-commit&lt;/code> æ£€æŸ¥ã€‚&lt;/li>
&lt;li>å•ç‹¬æ‰§è¡Œ &lt;code>mypy&lt;/code> ã€&lt;code>git-lint&lt;/code> ç­‰æ£€æŸ¥å·¥å…·ã€‚&lt;/li>
&lt;li>è¿˜èƒ½å¤Ÿæ‰§è¡Œæ‰“åŒ…ã€è¿è¡Œæµ‹è¯•ã€å®‰å…¨æ£€æŸ¥ç­‰æ›´å¤šæ›´å¤æ‚çš„ä»»åŠ¡ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€šè¿‡ GitHub Actions ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è¿è¡Œä¸€ä¸ªç®€å•çš„ CD pipelineã€‚&lt;/p>
&lt;h3 id="github-cd-ç¤ºä¾‹">Github CD ç¤ºä¾‹&lt;/h3>
&lt;h4 id="å’Œ-gitlab-cicd-çš„åŒºåˆ«">å’Œ GitLab CI/CD çš„åŒºåˆ«&lt;/h4>
&lt;p>GitHub Actions æ˜¯ GitHub åœ¨ 2018å¹´10æœˆæ¨å‡ºçš„æŒç»­é›†æˆæœåŠ¡ï¼Œå®ƒå’Œä¸Šæ–‡ä»‹ç»çš„ GitLab CI åŸç†å’Œä½¿ç”¨æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œä½†å­˜åœ¨ä»¥ä¸‹åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>æœ¯è¯­å®šä¹‰æœ‰æ‰€ä¸åŒï¼ŒGitHub Actions æœ‰ä»¥ä¸‹ç»„æˆéƒ¨åˆ†ï¼š
&lt;ol>
&lt;li>&lt;strong>workflow&lt;/strong>Â ï¼ˆå·¥ä½œæµç¨‹ï¼‰ï¼šæŒç»­é›†æˆä¸€æ¬¡è¿è¡Œçš„è¿‡ç¨‹ï¼Œå³ GitLab ä¸­çš„ pipelineã€‚&lt;/li>
&lt;li>&lt;strong>job&lt;/strong>Â ï¼ˆä»»åŠ¡ï¼‰ï¼šä¸€ä¸ª workflow ç”±ä¸€ä¸ªæˆ–å¤šä¸ª jobs æ„æˆï¼Œç±»ä¼¼äº GitLab ä¸­çš„ stageï¼Œä½†é»˜è®¤åœ¨ä¸åŒçš„ Runner å¹¶è¡Œæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºé¡ºåºæ‰§è¡Œã€‚&lt;/li>
&lt;li>&lt;strong>step&lt;/strong>ï¼ˆæ­¥éª¤ï¼‰ï¼šæ¯ä¸ª job ç”±å¤šä¸ª step æ„æˆï¼Œç±»ä¼¼äº GitLab ä¸­çš„ jobï¼Œä½† step è¦ä¹ˆæ˜¯ä¸€è¡Œå‘½ä»¤ï¼Œè¦ä¹ˆå°±æ˜¯ä¸€ä¸ªactionï¼Œstep ä¹‹é—´æŒ‰é¡ºåºæ‰§è¡Œä¸”èƒ½å¤Ÿå…±äº«æ•°æ®ã€‚&lt;/li>
&lt;li>&lt;strong>action&lt;/strong>Â ï¼ˆåŠ¨ä½œï¼‰ï¼šä½ å¯ä»¥å°†å¤šä¸ªè„šæœ¬å‘½ä»¤å°è£…æˆä¸€ä¸ª actionï¼Œé€šè¿‡ GitHub å¸‚åœºåˆ†äº«ç»™å…¶ä»–äººï¼Œç„¶ååœ¨ step ä¸­ä½¿ç”¨è‡ªå»ºæˆ–æ¥è‡ªç¤¾åŒºçš„ actionã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>GitHub å…è´¹æä¾›å¸¸è§ç±»å‹çš„ Runnerï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸éœ€è¦å†è‡ªè¡Œé…ç½®æœåŠ¡å™¨åŠæ³¨å†Œã€‚&lt;/li>
&lt;li>workflow çš„é…ç½®æ–‡ä»¶ä¹Ÿæ˜¯ç±»ä¼¼äº &lt;code>.gitlab.yml&lt;/code> çš„ &lt;code>yaml&lt;/code> æ–‡ä»¶ï¼Œä½†éœ€è¦æ·»åŠ åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ &lt;code>.github/workflows&lt;/code> è·¯å¾„ä¸­ã€‚&lt;/li>
&lt;li>å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å…±äº«æˆ–ä½¿ç”¨ä»–äººåˆ›å»ºçš„è„šæœ¬å‘½ä»¤ï¼Œå³ actionã€‚&lt;/li>
&lt;/ul>
&lt;p>æ¥ä¸‹æ¥æˆ‘å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ GitHub Actions è‡ªåŠ¨å‘å¸ƒä¸€ä¸ª Hugo é™æ€ç«™ç‚¹åˆ° GitHub Pagesã€‚&lt;/p>
&lt;h4 id="ä½¿ç”¨-github-actions-è‡ªåŠ¨å‘å¸ƒé™æ€ç«™ç‚¹">ä½¿ç”¨ GitHub Actions è‡ªåŠ¨å‘å¸ƒé™æ€ç«™ç‚¹&lt;/h4>
&lt;p>å¤§è‡´çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>åœ¨æœ¬åœ°å†…å®¹ä»“åº“å¼€å‘ç«™ç‚¹å†…å®¹ï¼Œå®Œæˆåå°†å†…å®¹æ¨é€åˆ°å…±äº«ä»“åº“ã€‚è¯¥å…±äº«ä»“åº“å¯èƒ½æ˜¯ç§æœ‰çš„ã€‚&lt;/li>
&lt;li>å…±äº«ä»“åº“æ¥å—æ¨é€åè§¦å‘ workflowï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
&lt;ol>
&lt;li>åœ¨ Runner ä¸­æ‹‰å–æäº¤çš„å†…å®¹ã€‚&lt;/li>
&lt;li>é…ç½®ç¯å¢ƒå¹¶å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Hugoã€‚&lt;/li>
&lt;li>è¿è¡Œ Hugo æ ¹æ®æäº¤å†…å®¹ç”Ÿæˆé™æ€ç«™ç‚¹ã€‚&lt;/li>
&lt;li>å°†é™æ€æ–‡ä»¶æ¨é€åˆ°å‘å¸ƒä»“åº“ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>å‘å¸ƒä»“åº“åœ¨æ¥æ”¶åˆ°æ¨é€å†…å®¹åä¼šè‡ªåŠ¨æ›´æ–° Pages é¡µé¢ã€‚&lt;/li>
&lt;/ol>
&lt;p>GitHub ä¸Šæœ‰è®¸å¤šè¿™ç±»è‡ªåŠ¨åŒ–éƒ¨ç½²ä»»åŠ¡çš„å¼€æº Actions é¡¹ç›®ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å…¶ä¸­ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Â &lt;a href="https://github.com/peaceiris/actions-hugo#getting-started">GitHub Actions for Hugo&lt;/a>ã€‚å…·ä½“çš„æ“ä½œæ­¥éª¤æˆªå›¾å’Œè¯¦ç»†é…ç½®é¡¹å¯ä»¥æŸ¥çœ‹è¯¥é¡¹ç›®çš„Â &lt;a href="https://github.com/peaceiris/actions-hugo#github-actions-for-hugo">README&lt;/a>ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸‹é…ç½®è¿‡ç¨‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨æœ¬åœ°å†…å®¹ä»“åº“ä¸­æ·»åŠ ç›®å½•å’Œæ–‡ä»¶ï¼š&lt;code>.github/workflows/gh-pages.yml&lt;/code>ï¼Œ&lt;code>gh-pages.yml&lt;/code>Â æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;pre>&lt;code>name: github pages
on:
push:
branches:
- main # æ¯æ¬¡æ¨é€åˆ° main åˆ†æ”¯éƒ½ä¼šè§¦å‘éƒ¨ç½²ä»»åŠ¡
jobs:
deploy:
runs-on: ubuntu-18.04
steps:
- uses: actions/checkout@v2
with:
submodules: true # Fetch Hugo themes (true OR recursive)
fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod
- name: Setup Hugo
uses: peaceiris/actions-hugo@v2
with:
hugo-version: '0.79.1'
extended: true
- name: Build
run: hugo --minify
- name: Deploy
uses: peaceiris/actions-gh-pages@v3
with:
deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }}
external_repository: &amp;lt;USERNAME&amp;gt;/&amp;lt;USERNAME&amp;gt;.github.io # å‘å¸ƒä»“åº“åç§°
publish_branch: main
publish_dir: ./public
&lt;/code>&lt;/pre>&lt;p>åœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†å¦‚ä¸‹çš„ workflowï¼š&lt;/p>
&lt;ol>
&lt;li>workflow åç§°ä¸º &lt;code>github pages&lt;/code>ã€‚&lt;/li>
&lt;li>ä»…åœ¨æ¨é€æäº¤åˆ° &lt;code>main&lt;/code> åˆ†æ”¯æ—¶æ‰§è¡Œã€‚&lt;/li>
&lt;li>å«æœ‰ä¸€ä¸ªåä¸º &lt;code>deploy&lt;/code> çš„ä»»åŠ¡ï¼Œå¹¶éœ€è¦åœ¨&lt;code>ubuntu-18.04&lt;/code>å¹³å°çš„ Runner æ‰§è¡Œã€‚&lt;/li>
&lt;li>ä»»åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ä½¿ç”¨äº†åä¸º &lt;code>actions/checkout@v2&lt;/code> çš„ &lt;code>action&lt;/code>ï¼Œä»¥æ‹‰å–æäº¤çš„å†…å®¹åˆ° Runnerã€‚&lt;/li>
&lt;li>ç¬¬äºŒä¸ªæ­¥éª¤ä½¿ç”¨ &lt;code>peaceiris/actions-hugo@v2&lt;/code> action é…ç½® Hugoï¼Œå¹¶æŒ‡å®šç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>ç¬¬ä¸‰ä¸ªæ­¥éª¤ç›´æ¥æ‰§è¡Œ &lt;code>hugo --minify&lt;/code> å‘½ä»¤ï¼Œç”Ÿæˆé™æ€ç«™ç‚¹ï¼ˆé»˜è®¤è¾“å‡ºæ–‡ä»¶åˆ° &lt;code>public&lt;/code> ç›®å½•ï¼‰&lt;/li>
&lt;li>ç¬¬å››ä¸ªæ­¥éª¤ä½¿ç”¨ &lt;code>peaceiris/actions-gh-pages@v3&lt;/code> action å°†ç”Ÿæˆçš„é™æ€æ–‡ä»¶æ¨é€åˆ°æŒ‡å®šçš„å¤–éƒ¨ä»“åº“ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿™ä¸ªÂ &lt;code>workflow&lt;/code>Â åŸºäºå†…å®¹ä»“åº“è¿è¡Œï¼Œä½†æˆ‘ä»¬éœ€è¦å°†è¿è¡Œè¿‡ç¨‹ç”Ÿæˆçš„é™æ€æ–‡ä»¶æ¨é€åˆ°å‘å¸ƒä»“åº“è¿›è¡Œå‘å¸ƒï¼Œå› æ­¤è¿˜éœ€è¦åœ¨ä¸¤ä¸ªä»“åº“ä¸­åˆ†åˆ«è®¾ç½®å¯†é’¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨æœ¬åœ°ç”Ÿæˆ SSH éƒ¨ç½²å¯†é’¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span> -C &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>git config user.email&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -f gh-pages -N &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;span class="c1"># å°†åœ¨å½“å‰ç›®å½•ç”Ÿæˆå¦‚ä¸‹å¯†é’¥æ–‡ä»¶:&lt;/span>
&lt;span class="c1"># gh-pages.pub (å…¬é’¥)&lt;/span>
&lt;span class="c1"># gh-pages (ç§é’¥)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨ GitHub åˆ†åˆ«è¿›å…¥å†…å®¹ä»“åº“å’Œå‘å¸ƒä»“åº“çš„Â &lt;code>Settings&lt;/code>Â é¡µé¢ï¼š&lt;/p>
&lt;ul>
&lt;li>å°†å…¬é’¥Â &lt;code>gh-pages.pub&lt;/code>Â ä½œä¸ºÂ &lt;code>Secret&lt;/code>Â æ·»åŠ åˆ°å†…å®¹ä»“åº“ï¼Œå¹¶è®¾ç½®Â &lt;code>Name&lt;/code>Â ä¸ºÂ &lt;code>ACTIONS_DEPLOY_KEY&lt;/code>ã€‚&lt;/li>
&lt;li>å°†ç§é’¥Â &lt;code>gh-pages&lt;/code>Â ä½œä¸ºÂ &lt;code>Deploy Key&lt;/code>Â æ·»åŠ åˆ°å‘å¸ƒä»“åº“ï¼Œå¹¶è®¾ç½®ä¸ºÂ &lt;code>Allow write access&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æ•ˆæœã€‚&lt;/p>
&lt;p>åœ¨æœ¬åœ°å†…å®¹ä»“åº“åšä¸€äº›æ›´æ”¹ï¼Œé¢„è§ˆæ•ˆæœåæäº¤å¹¶æ¨é€ï¼Œç„¶ååœ¨å…±äº«ä»“åº“çš„ &lt;strong>GitHub Actions&lt;/strong> é¡µé¢æ£€æŸ¥ç›¸åº”Â &lt;code>workflow&lt;/code>Â çš„è¿è¡ŒçŠ¶æ€ä¸è¯¦ç»†ç»“æœï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/2020-01-04-actions-page.png" alt="2020-01-04-actions-page">&lt;/p>
&lt;p>è¿è¡ŒæˆåŠŸåï¼Œå¾ˆå¿«å‘å¸ƒä»“åº“å°†æ–°å¢ä¸€ä¸ªç”±è¯¥Â &lt;code>workflow&lt;/code>Â åˆ›å»ºçš„æäº¤ï¼Œç›¸åº”çš„ GitHub Pages ä¹Ÿä¼šæ›´æ–°ç›¸åº”çš„å†…å®¹ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å›´ç»•ä¿éšœä»£ç è´¨é‡è¿™ä¸€ç›®çš„ï¼š&lt;/p>
&lt;ol>
&lt;li>é¦–å…ˆä»‹ç»äº† Linterã€Static Type Checkerã€Autoformatter ä¸‰ç§å·¥å…·å¹¶å„å±•ç¤ºäº†ä¸€ä¸ªä»£è¡¨æ€§å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚&lt;/li>
&lt;li>å°†è¿™äº›å·¥å…·é€šè¿‡ &lt;code>pre-commit&lt;/code> é›†æˆåˆ° &lt;code>git hooks&lt;/code> ä¸­ï¼Œåœ¨ä»£ç å¼€å‘å·¥ä½œæµä¸­è‡ªåŠ¨æ‰§è¡Œã€‚&lt;/li>
&lt;li>ä»‹ç»äº†CI/CDï¼Œå¹¶ä»¥ GitLab CI pipeline ä¸ºä¾‹å°†ä»¥ä¸Šæ£€æŸ¥éƒ¨ç½²åˆ°å…±äº«ä»“åº“ï¼Œåœ¨æ¯æ¬¡ä»£ç æäº¤åè‡ªåŠ¨æ‰§è¡Œã€‚&lt;/li>
&lt;li>é¡ºä¾¿ä»‹ç»äº†ä¸€ä¸ªé€šè¿‡ GitHub Actions å®ç°æŒç»­éƒ¨ç½²çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº† GitHub æŒç»­é›†æˆæœåŠ¡çš„åŸºæœ¬ç”¨æ³•ã€‚&lt;/li>
&lt;/ol>
&lt;p>ç»è¿‡ç®€å•å‡ æ­¥çš„ä¸€æ¬¡æ€§é…ç½®ï¼Œä½ å°±å¯ä»¥æ‹¥æœ‰ä¸€å¥—é«˜åº¦è‡ªåŠ¨åŒ–çš„ä»£ç è´¨é‡å·¥å…·å·¥ä½œæµç¨‹ã€‚ä½†å·¥å…·åªæ˜¯ä¿éšœä»£ç è´¨é‡ä¼—å¤šç¯èŠ‚ä¸­æœ€å®¹æ˜“å‘åŠ›ï¼Œè§æ•ˆå¿«ï¼Œä½†ä½œç”¨ä¹Ÿå¾ˆæœ‰é™çš„ä¸€ç¯ã€‚çœŸæ­£å®ç°ä¿è¯ä»£ç è´¨é‡è¿™ä¸€ç›®æ ‡ä»»é‡è€Œé“è¿œï¼Œè¿˜éœ€è¦æˆ‘ä»¬åœ¨ä¸ªäººå’Œå›¢é˜Ÿè¿™ä¸¤ä¸ªæ–¹é¢è®¤è¯†åˆ°ä»£ç è´¨é‡çš„é‡è¦æ€§ï¼Œå¹¶ä¸æ–­è·µè¡Œå„ç§ä»£ç è´¨é‡è®¾è®¡ä¸æ´»åŠ¨ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Lint_(software)">Linter-Wikipedia&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://flake8.pycqa.org/en/latest/">Flake8&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mypy.readthedocs.io/en/stable/">Mypy&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://realpython.com/python-type-checking">Python Type Checking (Guide)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://black.readthedocs.io/en/stable/">Black&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">Customizing Git - Git Hooks&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://pre-commit.com/">pre-commit&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.github.com/en/free-pro-team@latest/actions/guides/about-continuous-integration">About continuous integration&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.gitlab.com/ee/ci/README.html">GitLab CI/CD&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.github.com/en/free-pro-team@latest/actions/quickstart">Quickstart for GitHub Actions&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.github.com/en/free-pro-team@latest/actions/learn-github-actions/introduction-to-github-actions">Introduction to GitHub Actions&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">GitHub Actions å…¥é—¨æ•™ç¨‹&lt;/a>&lt;/li>
&lt;/ul></content><category scheme="https://waynerv.github.io/categories/%E5%B7%A5%E5%85%B7/" term="å·¥å…·" label="å·¥å…·"/><category scheme="https://waynerv.github.io/tags/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/" term="ä»£ç è´¨é‡" label="ä»£ç è´¨é‡"/><category scheme="https://waynerv.github.io/tags/ci/" term="CI" label="CI"/></entry><entry><title type="text">Git åˆå¹¶æµ…æ</title><link rel="alternate" type="text/html" href="https://waynerv.github.io/posts/git-merge-intro/"/><id>https://waynerv.github.io/posts/git-merge-intro/</id><updated>2021-01-04T03:47:46+00:00</updated><published>2020-12-29T07:17:23+08:00</published><author><name>Waynerv</name><uri>https://waynerv.github.io</uri><email>ampedee@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">åˆå¹¶åœ¨ Git ä¸­æ˜¯ä¸€ä¸ªååˆ†å¸¸è§çš„æ“ä½œï¼šæ•´åˆä¸åŒåˆ†æ”¯ä¹‹é—´çš„æ›´æ”¹ï¼Œæˆ–è€…å¯¹è¿œç¨‹åˆ†æ”¯æ‰§è¡Œ pull åŠ push æ“ä½œâ€¦â€¦</summary><content type="html">&lt;p>åˆå¹¶åœ¨ Git ä¸­æ˜¯ä¸€ä¸ªååˆ†å¸¸è§çš„æ“ä½œï¼šæ•´åˆä¸åŒåˆ†æ”¯ä¹‹é—´çš„æ›´æ”¹ï¼Œæˆ–è€…å¯¹è¿œç¨‹åˆ†æ”¯æ‰§è¡Œ &lt;code>pull&lt;/code> åŠ &lt;code>push&lt;/code> æ“ä½œï¼Œéƒ½éœ€è¦è¿›è¡Œåˆå¹¶ã€‚&lt;/p>
&lt;p>ä½†å¯¹æ–°æ‰‹æ¥è¯´ï¼Œ &lt;code>git merge&lt;/code> è¿™ä¸€å‘½ä»¤æœ‰äº›ä»¤äººç”Ÿç•ï¼Œå› ä¸ºåœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œæ‰§è¡Œ &lt;code>merge&lt;/code> å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚è¿™ç§å¯¹äºç»“æœçš„ä¸ç¡®å®šæ€§ï¼Œä½¿æˆ‘å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¸æ•¢ä¸»åŠ¨å»ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯ä¾èµ– GitHub çš„ &lt;code>Pull Request&lt;/code> æˆ–è€… GitLab çš„ &lt;code>Merge Request&lt;/code> ç­‰å¯è§†åŒ–ç•Œé¢æ‰‹åŠ¨åˆå¹¶ã€‚&lt;/p>
&lt;p>ä¸ºäº†ä»Šåå¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„ &lt;code>merge&lt;/code>ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥å¯¹ &lt;code>merge&lt;/code> ä¸€æ¢ç©¶ç«Ÿã€‚&lt;/p>
&lt;h2 id="è®¤è¯†åˆå¹¶">è®¤è¯†åˆå¹¶&lt;/h2>
&lt;p>åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œåˆå¹¶æ˜¯å°†ä¸€ç»„æ–‡ä»¶ä¸­æ‰€å‘ç”Ÿçš„ä¸åŒæ›´æ”¹è¿›è¡Œæ•´åˆçš„åŸºç¡€æ“ä½œã€‚é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ Git æ—¶ä¼šå»ºç«‹ä¸åŒçš„åˆ†æ”¯ï¼Œç”±ä¸åŒçš„äººå¯¹åŒä¸€ç»„æ–‡ä»¶æ‰§è¡Œæ–°å¢ã€ç¼–è¾‘ç­‰æ“ä½œï¼Œæœ€ç»ˆæˆ‘ä»¬éœ€è¦åˆå¹¶è¿™äº›åä½œçš„åˆ†æ”¯ï¼Œæ•´åˆæ‰€æœ‰çš„æ›´æ”¹å½¢æˆä¸€ä»½æ–‡ä»¶ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>åˆå¹¶ä¸€èˆ¬ç”± Git æ ¹æ®ç®—æ³•è‡ªåŠ¨æ‰§è¡Œï¼Œä½†å¦‚æœå‘ç”Ÿäº†å†²çªï¼Œæ¯”å¦‚å¯¹åŒä¸€æ–‡ä»¶çš„åŒä¸€å¤„å†…å®¹æ‰§è¡Œäº†ä¸åŒçš„æ›´æ”¹ï¼Œåˆ™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆå¹¶ã€‚&lt;/p>
&lt;h3 id="é€’å½’ä¸‰è·¯åˆå¹¶ç®—æ³•">é€’å½’ä¸‰è·¯åˆå¹¶ç®—æ³•&lt;/h3>
&lt;p>Git åœ¨è‡ªåŠ¨åˆå¹¶æ—¶ä¼šä½¿ç”¨ã€Œ&lt;a href="https://en.wikipedia.org/wiki/Merge_(version_control)#Recursive_three-way_merge">é€’å½’ä¸‰è·¯åˆå¹¶&lt;/a>ã€ç®—æ³•å¯¹ä¸åŒæ–‡ä»¶è¿›è¡Œå·®å¼‚åˆ†æï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹è¯¥ç®—æ³•ã€‚&lt;/p>
&lt;p>é¦–å…ˆä»ã€Œä¸‰è·¯åˆå¹¶ã€ç®—æ³•å¼€å§‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æäº¤å†å²ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/Dec-29-2020-merge.gif" alt="Dec-29-2020 22-40-46">&lt;/p>
&lt;p>ä¸Šå›¾ä¸­æˆ‘ä»¬åœ¨ &lt;code>master&lt;/code> åˆå¹¶äº† &lt;code>feature&lt;/code> åˆ†æ”¯ï¼Œç°åœ¨æˆ‘ä»¬å›æº¯ä¸€ä¸‹åˆå¹¶çš„è¿‡ç¨‹ï¼š&lt;/p>
&lt;p>æ­¤æ—¶ &lt;code>master&lt;/code> æ­£æŒ‡å‘æäº¤ Cï¼ŒGit é¦–å…ˆæ‰¾åˆ°ä¸¤ä¸ªåˆ†æ”¯æœ€è¿‘çš„å”¯ä¸€å…±åŒç¥–å…ˆæäº¤ Aï¼Œç„¶ååˆ†åˆ«å¯¹ Aã€Cã€F æäº¤çš„æ–‡ä»¶å¿«ç…§è¿›è¡Œå¯¹æ¯”ï¼Œæˆ‘ä»¬ä¸‹æ–‡ç§°å‘¼å®ƒä»¬ä¸º Aã€Cã€F æ–‡ä»¶ã€‚æ¥ä¸‹æ¥ Git å°†é€ã€Œè¡Œã€å¯¹ä¸‰ä¸ªæ–‡ä»¶çš„å†…å®¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸‰ä¸ªæ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶è¯¥è¡Œçš„å†…å®¹ä¸€è‡´ï¼Œåˆ™ä¸¢å¼ƒ A æ–‡ä»¶ä¸­è¯¥è¡Œçš„å†…å®¹ï¼Œä¿ç•™ä¸ A æ–‡ä»¶ä¸­ä¸åŒçš„å†…å®¹æ”¾åˆ°ç»“æœæ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;p>å…·ä½“æ¥è¯´ï¼Œå‡å¦‚ Aã€C å†…å®¹ä¸€è‡´ï¼Œè¯´æ˜è¿™æ˜¯åœ¨ F ä¸­æ›´æ”¹çš„å†…å®¹ï¼Œéœ€è¦ä¿ç•™è¯¥æ›´æ”¹ï¼›Aã€F å†…å®¹ä¸€è‡´åŒç†ï¼›å‡å¦‚ Cã€F å†…å®¹ä¸€è‡´ï¼Œè¯´æ˜ C å’Œ F éƒ½ç›¸å¯¹äº A åšäº†åŒæ ·çš„æ›´æ”¹ï¼ŒåŒæ ·éœ€è¦ä¿ç•™ã€‚é™¤æ­¤ä¹‹å¤–çš„å†…å®¹å·®å¼‚ä»…å‰©ä¸¤ç§æƒ…å†µï¼šå¦‚æœ Aã€Cã€F çš„å†…å®¹éƒ½ä¸€è‡´ï¼Œè¯´æ˜ä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿï¼›å¦‚æœè¯¥è¡Œåœ¨ Aã€Cã€F çš„å†…å®¹éƒ½ä¸ä¸€è‡´ï¼Œè¯´æ˜å‘ç”Ÿäº†å†²çªï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆå¹¶é€‰æ‹©éœ€è¦ä¿ç•™çš„å†…å®¹ã€‚&lt;/p>
&lt;p>ç»“æŸå¯¹æ¯”å Git ä¼šä»¥æœ€ç»ˆçš„ç»“æœæ–‡ä»¶å¿«ç…§åˆ›å»ºä¸€ä¸ªæ–°çš„ Merge æäº¤å¹¶æŒ‡å‘å®ƒã€‚&lt;/p>
&lt;p>ä¸‰è·¯åˆå¹¶ç®—æ³•çš„åŸºç¡€æ˜¯æ‰¾åˆ°è¢«åˆå¹¶æ–‡ä»¶çš„å…±åŒç¥–å…ˆï¼Œåœ¨ä¸€äº›ç®€å•çš„åœºæ™¯ä¸­è¿™è¿˜èƒ½è¡Œçš„é€šï¼Œä½†åœ¨é‡åˆ°&lt;a href="https://zh.wikipedia.org/wiki/%E5%90%88%E5%B9%B6_(%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6)#cite_note-2">åå­—äº¤å‰åˆå¹¶ï¼ˆcriss-cross mergeï¼‰&lt;/a>æ—¶ï¼Œä¸å­˜åœ¨å”¯ä¸€çš„æœ€è¿‘å…±åŒç¥–å…ˆï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/20201229152228-criss-cross-merge.png" alt="20201229152228-criss-cross-merge">&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬éœ€è¦ä» &lt;code>main&lt;/code> åˆ†æ”¯åˆå¹¶ &lt;code>feature&lt;/code> åˆ†æ”¯ï¼Œå³æŠŠ C7 åˆå¹¶åˆ° C8ï¼Œä¼šå‘ç° C8 å’Œ C7 æœ‰ä¸¤ä¸ªå…±åŒç¥–å…ˆï¼Œè¿™ä¸‹æ€ä¹ˆåŠå‘¢ï¼ŸGit é‡‡å–çš„æ˜¯é€’å½’ä¸‰è·¯åˆå¹¶ï¼ˆRecursive three-way mergeï¼‰ï¼Œä¼šå…ˆåˆå¹¶ C3 å’Œ C5 è¿™ä¸¤ä¸ªå…±åŒç¥–å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„å”¯ä¸€æœ€è¿‘ç¥–å…ˆï¼ˆå‡è®¾ä¸º C9ï¼‰ï¼Œæ¥ç€åœ¨ C9ã€C7ã€C8 ä¹‹é—´æ‰§è¡Œä¸‰è·¯åˆå¹¶ï¼Œå¦‚æœåœ¨åˆå¹¶ C3 å’Œ C5 çš„è¿‡ç¨‹ä¸­åˆå‘ç”Ÿæ²¡æœ‰å”¯ä¸€å…±åŒç¥–å…ˆçš„æƒ…å†µï¼Œåˆ™é€’å½’æ‰§è¡Œä¸Šè¿°è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>å…³äºé€’å½’ä¸‰è·¯åˆå¹¶ç®—æ³•æˆ‘ä»¬å°±äº†è§£åˆ°è¿™é‡Œã€‚&lt;/p>
&lt;h3 id="åˆå¹¶å†²çª">åˆå¹¶å†²çª&lt;/h3>
&lt;p>å¦‚æœä½ åœ¨ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ä¸­ï¼Œå¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªéƒ¨åˆ†è¿›è¡Œäº†ä¸åŒçš„ä¿®æ”¹ï¼ŒGit å°±æ— æ³•è‡ªåŠ¨åœ°åˆå¹¶å®ƒä»¬ï¼Œè€Œæ˜¯ä¼šæš‚åœåˆå¹¶è¿‡ç¨‹ï¼Œç­‰å¾…ä½ å»æ‰‹åŠ¨è§£å†³å†²çªã€‚&lt;/p>
&lt;p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™äº›éœ€è¦è§£å†³å†²çªçš„æ–‡ä»¶ï¼Œä½¿ç”¨ &lt;code>git status&lt;/code> å¯ä»¥æŸ¥çœ‹è¿™äº›å› åŒ…å«åˆå¹¶å†²çªè€Œå¤„äºæœªåˆå¹¶çŠ¶æ€çš„æ–‡ä»¶ï¼š&lt;/p>
&lt;pre>&lt;code>$ git status
On branch master
You have unmerged paths.
(fix conflicts and run &amp;quot;git commit&amp;quot;)
Unmerged paths:
(use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to mark resolution)
both modified: main.py
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
&lt;/code>&lt;/pre>&lt;p>æ‰‹åŠ¨è§£å†³å†²çªç±»ä¼¼äºäºŒé€‰ä¸€çš„è¿‡ç¨‹ï¼ŒGit ä¼šåœ¨æœ‰å†²çªçš„æ–‡ä»¶ä¸­åŠ å…¥ç‰¹æ®Šçš„æ ‡è®°ï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š&lt;/p>
&lt;pre>&lt;code>&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEAD:main.py
print(&amp;quot;Hello World&amp;quot;)
=======
print(&amp;quot;World Hello&amp;quot;)
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; feature:main.py
&lt;/code>&lt;/pre>&lt;p>é€šè¿‡ &lt;code>=======&lt;/code> è¿›è¡Œåˆ†å‰²ï¼Œä»¥ &lt;code>&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEAD:main.py&lt;/code> æ ‡è®°ä¸ºä¸Šç•Œçš„ä¸ŠåŠéƒ¨åˆ†æ˜¯å½“å‰åˆ†æ”¯ &lt;code>master&lt;/code> æ‰€åšçš„æ›´æ”¹ï¼Œä»¥ &lt;code>&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; feature:main.py&lt;/code> æ ‡è®°ä¸ºä¸‹ç•Œçš„ä¸‹åŠéƒ¨åˆ†æ˜¯è¦åˆå¹¶çš„ &lt;code>feature&lt;/code> å¯¹åŒä¸€å†…å®¹æ‰€åšçš„ä¸åŒæ›´æ”¹ã€‚æˆ‘ä»¬éœ€è¦ç¼–è¾‘æ–‡ä»¶åˆ é™¤è¿™äº›æ ‡è®°ï¼Œä»…ä¿ç•™æˆ‘ä»¬éœ€è¦çš„å†…å®¹ï¼š&lt;/p>
&lt;pre>&lt;code>print(&amp;quot;Hello World&amp;quot;)
&lt;/code>&lt;/pre>&lt;p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸ä»ä¸­é€‰æ‹©ï¼Œè€Œæ˜¯ç”¨ä¸€æ®µå…¨æ–°çš„å†…å®¹å»æ›¿æ¢å®ƒã€‚&lt;/p>
&lt;p>åœ¨è§£å†³äº†æ‰€æœ‰æ–‡ä»¶é‡Œçš„å†²çªä¹‹åï¼Œéœ€è¦ä½¿ç”¨ &lt;code>git add&lt;/code> æš‚å­˜è¿™äº›æ–‡ä»¶æ¥å°†å…¶æ ‡è®°ä¸ºå†²çªå·²è§£å†³ã€‚ç„¶åå†æ‰§è¡Œ &lt;code>git commit&lt;/code> æ¥å®Œæˆåˆå¹¶æäº¤ã€‚ Git ä¼šå°†è§£å†³çš„è¿™äº›å†²çªï¼ŒåŠ å…¥åˆ°ä¸Šæ–‡æåˆ°çš„æ–°å¢çš„ Merge æäº¤é‡Œã€‚&lt;/p>
&lt;h3 id="å¿«è¿›åˆå¹¶">å¿«è¿›åˆå¹¶&lt;/h3>
&lt;p>ä¹Ÿæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œäº†åˆå¹¶æ“ä½œåï¼Œä¼šå‘ç°å¹¶æ²¡æœ‰å¢åŠ ä¸€ä¸ªæ–°çš„ Merge æäº¤ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬ç§°ä¹‹ä¸ºå¿«è¿›ï¼ˆfast-forwardï¼‰åˆå¹¶ã€‚&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬åŸºäº &lt;code>master&lt;/code> åˆ›å»ºäº† &lt;code>feature&lt;/code> åˆ†æ”¯ï¼Œå¹¶æ–°å¢äº†ä¸€äº›æäº¤ã€‚ç°åœ¨æˆ‘ä»¬å°† &lt;code>feature&lt;/code> çš„æ›´æ”¹åˆå…¥ &lt;code>master&lt;/code> åˆ†æ”¯ï¼š&lt;/p>
&lt;pre>&lt;code>$ git checkout master
$ git merge feature
Updating f42c576..3a0874c
Fast-forward
main.py | 2 ++
task.py | 3 ++
worker.py | 1 ++
3 file changed, 6 insertions(+)
&lt;/code>&lt;/pre>&lt;p>è¿‡ç¨‹ç¤ºæ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/Dec-29-2020-fast-forward.gif" alt="Dec-29-2020 22-50-28">&lt;/p>
&lt;p>ç”±äºæˆ‘ä»¬æƒ³è¦åˆå¹¶çš„åˆ†æ”¯ &lt;code>feature&lt;/code> æ‰€æŒ‡å‘çš„æäº¤ D æ˜¯ &lt;code>master&lt;/code> çš„ç›´æ¥åç»§ï¼Œ å› æ­¤ Git ä¼šç›´æ¥å°† &lt;code>HEAD&lt;/code> æŒ‡é’ˆå‘å‰ç§»åŠ¨ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœé¡ºç€ä¸€ä¸ªåˆ†æ”¯èµ°ä¸‹å»ä¸€å®šèƒ½å¤Ÿåˆ°è¾¾å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆ Git åœ¨åˆå¹¶ä¸¤è€…æ—¶åªä¼šç®€å•çš„å°†æŒ‡é’ˆå‘å‰æ¨è¿›ï¼ˆå³ç§»ï¼‰ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹çš„åˆå¹¶æ“ä½œæ²¡æœ‰éœ€è¦è§£å†³çš„åˆ†æ­§â€”â€”è¿™å°±å«åšå¿«è¿›ï¼ˆfast-forwardï¼‰ã€‚&lt;/p>
&lt;h2 id="git-çš„ä¸åŒåˆå¹¶ç­–ç•¥">Git çš„ä¸åŒåˆå¹¶ç­–ç•¥&lt;/h2>
&lt;p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Git æ—¶ï¼Œé€šå¸¸ä¼šåŸºäºä¸»åˆ†æ”¯æ‹‰å‡ºè‹¥å¹²æ¡åŠŸèƒ½åˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œå¼€å‘å®Œæ¯•åå†å°†åŠŸèƒ½åˆ†æ”¯åˆå…¥ä¸»åˆ†æ”¯ã€‚æœ‰ä»¥ä¸‹ä¸åŒçš„åˆ†æ”¯åˆå¹¶ç­–ç•¥ï¼š&lt;/p>
&lt;ul>
&lt;li>é€šè¿‡ &lt;code>merge&lt;/code> æ˜¾å¼åˆå¹¶&lt;/li>
&lt;li>é€šè¿‡ &lt;code>rebase&lt;/code> æˆ– &lt;code>fast-forward&lt;/code> éšå¼åˆå¹¶&lt;/li>
&lt;li>&lt;code>squash&lt;/code> åéšå¼åˆå¹¶&lt;/li>
&lt;/ul>
&lt;h3 id="é€šè¿‡-merge-æ˜¾å¼åˆå¹¶">é€šè¿‡ &lt;code>merge&lt;/code> æ˜¾å¼åˆå¹¶&lt;/h3>
&lt;p>è¿™æ˜¯æœ€å¸¸è§å’Œæœ€ç›´æ¥çš„åˆå¹¶æ–¹å¼ï¼Œä¹Ÿæ˜¯ GitHub å’Œ GitLab ç­‰ä»£ç æ‰˜ç®¡å¹³å°çš„é»˜è®¤å®ç°æ–¹å¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/Dec-29-2020-merge.gif" alt="Dec-29-2020 22-40-46">&lt;/p>
&lt;p>å½“æˆ‘ä»¬å°†åŠŸèƒ½åˆ†æ”¯åˆå…¥ä¸»åˆ†æ”¯æ—¶ï¼ŒGit ä¼šå¯¹ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œé€’å½’ä¸‰è·¯åˆå¹¶ï¼Œå¹¶ä»¥åˆå¹¶ç»“æœåˆ›å»ºä¸€ä¸ªæ–°çš„ Merge æäº¤ã€‚è¿™ä¸ª Merge æäº¤å’Œæ™®é€šçš„æäº¤æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒæœ‰ä¸¤ä¸ªçˆ¶æäº¤ï¼š&lt;/p>
&lt;pre>&lt;code>$ git cat-file -p 44ba027
tree 5a1692ba62ef346b59e65e4aa441c731bebc51ff
parent 75bf5c59c2e7e493c98e026a415f16b8f0445e4a
parent bbbe6a4c02aa709299ac891779448daf8203df53
author xx &amp;lt;xx@xx.com&amp;gt; 1609141855 +0800
committer xx &amp;lt;xx@xx.com&amp;gt; 1609141855 +0800
Merge branch 'feature' into 'master'
&lt;/code>&lt;/pre>&lt;p>æˆ‘ä»¬èƒ½åœ¨æäº¤å†å²ä¸­ï¼Œå¾ˆæ˜äº†åœ°æ ¹æ® Merge æäº¤æŸ¥çœ‹å‘ç”Ÿçš„åˆå¹¶äº‹ä»¶ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œå¤§é‡çš„ Merge æäº¤ä¼šä½¿ä½ çš„æäº¤å†å²æœ‰å¾ˆå¤šåˆ†å‰ï¼Œç”šè‡³ååˆ†å‡Œä¹±ï¼Œæœ‰äº›å¼€å‘è€…æˆ–è€…å›¢é˜Ÿå¯èƒ½ä¼šæƒ³è¦ä¸€ä¸ªçœ‹ä¸Šå»æ›´åŠ æ•´æ´çš„çº¿æ€§æäº¤å†å²ã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ Git ä¸ä¼šåœ¨å¿«è¿›åˆå¹¶çš„æƒ…å†µä¸‹åˆ›å»ºå•ç‹¬çš„ Merge æäº¤ã€‚å‡å¦‚æˆ‘ä»¬æƒ³åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½åˆ›å»ºä¸€ä¸ª Merge æäº¤ï¼Œéœ€è¦åœ¨æ‰§è¡Œ &lt;code>git merge&lt;/code> å‘½ä»¤æ—¶æ·»åŠ  &lt;code>--no-ff&lt;/code> é€‰é¡¹ã€‚&lt;/p>
&lt;h3 id="é€šè¿‡-rebase-æˆ–-fast-forward-éšå¼åˆå¹¶">é€šè¿‡ &lt;code>rebase&lt;/code> æˆ– &lt;code>fast-forward&lt;/code> éšå¼åˆå¹¶&lt;/h3>
&lt;p>æˆ‘ä»¬å¯ä»¥ç”¨ &lt;code>rebase&lt;/code> æ›¿æ¢ &lt;code>merge&lt;/code> è¿›è¡Œåˆå¹¶ï¼Œæˆ‘åœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« &lt;a href="https://waynerv.github.io/posts/git-rebase-intro/">git-rebase æµ…æ&lt;/a>ä¸­è¯¦ç»†ä»‹ç»è¿‡ &lt;code>rebase&lt;/code> çš„åŸç†å’Œç”¨æ³•ï¼Œç®€å•æ¥è¯´ &lt;code>rebase&lt;/code> æ“ä½œä¼šæ‰¾åˆ°ä¸¤ä¸ªåˆ†æ”¯çš„æœ€è¿‘çš„ç¥–å…ˆæäº¤ï¼Œå¹¶åŸºäºç›®æ ‡åˆ†æ”¯æŒ‰é¡ºåºé‡æ–°åº”ç”¨å½“å‰åˆ†æ”¯åœ¨ç¥–å…ˆæäº¤ä¹‹åçš„æ›´æ”¹ã€‚å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹å›¾çš„ &lt;code>master&lt;/code> å’Œ &lt;code>feature&lt;/code> ä¸¤ä¸ªåˆ†æ”¯ï¼Œæ‰§è¡Œä¸‹åˆ—æ“ä½œï¼š&lt;/p>
&lt;pre>&lt;code>$ git checkout feature
$ git rebase master
$ git checkout master
$ git merge feature
&lt;/code>&lt;/pre>&lt;p>è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/Dec-31-2020-rebase&amp;amp;fast-forfward.gif" alt="Dec-31-2020-rebase&amp;fast-forfward">&lt;/p>
&lt;p>æˆ‘ä»¬é¦–å…ˆç”¨ &lt;code>rebase&lt;/code> å°† &lt;code>master&lt;/code> åˆå¹¶åˆ°äº† &lt;code>feature&lt;/code>ï¼Œå³ä½¿ä¸¤ä¸ªåˆ†æ”¯éƒ½æœ‰ä¸åŒçš„æäº¤ï¼Œä¹Ÿå¾—åˆ°äº†ä¸€æ¡å®Œå…¨çº¿æ€§çš„ &lt;code>feature&lt;/code> åˆ†æ”¯ï¼Œè€Œä¸”æ²¡æœ‰é¢å¤–çš„ Merge æäº¤ã€‚&lt;/p>
&lt;p>æ¥ç€åˆåˆ‡æ¢åˆ° &lt;code>master&lt;/code> åˆ†æ”¯åˆå¹¶äº† &lt;code>feature&lt;/code>ã€‚&lt;code>rebase&lt;/code> ä¹‹åçš„ &lt;code>feature&lt;/code> åˆ†æ”¯ä¸Šï¼Œæ‰€æœ‰æäº¤éƒ½æ˜¯ &lt;code>master&lt;/code> çš„åç»§æäº¤ï¼Œå› æ­¤æˆ‘ä»¬å°†ç›´æ¥æ‰§è¡Œå¿«è¿›åˆå¹¶ã€‚å¿«è¿›åˆå¹¶åªæœ‰åœ¨ &lt;code>master&lt;/code> åˆ†æ”¯ä¸­æ²¡æœ‰æ¯” &lt;code>feature&lt;/code> æ›´æ–°çš„æäº¤æ—¶æ‰ä¼šå‘ç”Ÿï¼ˆä½¿ç”¨ &lt;code>rebase&lt;/code> èƒ½å¤Ÿç¡®ä¿è¯¥ç»“æœï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;code>master&lt;/code> çš„ &lt;code>HEAD&lt;/code> å¯ä»¥ç›´æ¥å³ç§»åˆ° &lt;code>feature&lt;/code> åˆ†æ”¯çš„æœ€æ–°æäº¤ã€‚è¿™æ ·åˆå¹¶ä¹Ÿä¸ä¼šç”Ÿæˆå•ç‹¬çš„ Merge æäº¤ï¼Œå®ƒåªæ˜¯å°†åˆ†æ”¯æ ‡ç­¾å¿«é€ŸæŒ‡å‘äº†æ–°çš„æäº¤ã€‚&lt;/p>
&lt;p>é€šè¿‡ &lt;code>rebase&lt;/code> æˆ– &lt;code>fast-forward&lt;/code> éšå¼çš„åˆå¹¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°ä¸€æ¡æ•´æ´çº¿æ€§çš„æäº¤å†å²ï¼Œä½†åŒæ—¶ä¹Ÿä¼šä¸¢å¤±è¿™äº›æäº¤æ›¾ç»çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚&lt;/p>
&lt;h3 id="squash-åéšå¼åˆå¹¶">&lt;code>squash&lt;/code> åéšå¼åˆå¹¶&lt;/h3>
&lt;p>è¿˜æœ‰ä¸€ç§åˆå¹¶å˜æ›´çš„ç­–ç•¥æ˜¯ï¼Œåœ¨æ‰§è¡Œå¿«è¿›åˆå¹¶æˆ– &lt;code>rebase&lt;/code> ä¹‹å‰ï¼Œå°†æ‰€æœ‰åŠŸèƒ½åˆ†æ”¯çš„æäº¤é€šè¿‡ &lt;code>rebase&lt;/code> äº¤äº’æ¨¡å¼çš„ &lt;code>squash&lt;/code> å‘½ä»¤å‹ç¼©æˆä¸€ä¸ªæäº¤ã€‚è¿™æ ·å¯ä»¥è¿›ä¸€æ­¥ä¿æŒä¸»åˆ†æ”¯æäº¤å†å²çš„çº¿æ€§å’Œæ•´æ´ã€‚å®ƒå°†ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½å•ç‹¬ä¿å­˜åœ¨ä¸€æ¬¡æäº¤ä¸­ï¼Œä½†ä¹Ÿå¤±å»äº†å¯¹æ•´ä¸ªåŠŸèƒ½åˆ†æ”¯å¼€å‘è¿‡ç¨‹çš„è®°å½•å’Œç»†èŠ‚ã€‚å…·ä½“çš„æ“ä½œæ–¹æ³•å¯å‚è€ƒ&lt;a href="https://waynerv.github.io/posts/git-rebase-intro/#%E9%87%8D%E5%86%99%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2">é‡å†™æäº¤å†å²&lt;/a>ã€‚&lt;/p>
&lt;p>è¿™ä¸‰ç§ç­–ç•¥éƒ½æœ‰æ˜æ˜¾çš„ä¼˜ç¼ºç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“çš„åœºæ™¯ä»¥åŠè‡ªå·±çš„éœ€æ±‚è¿›è¡Œé€‰æ‹©ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Merge_(version_control)">Merge (version control)&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://git-scm.com/docs/git-merge">git-merge - Join two or more development histories together&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://blog.developer.atlassian.com/pull-request-merge-strategies-the-great-debate/#:~:text=And%20the%20merge%20can%20complete,of%20an%20earlier%20feature%20branch">Pull Request Merge Strategies: The Great Debate&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6">Git åˆ†æ”¯ - åˆ†æ”¯çš„æ–°å»ºä¸åˆå¹¶&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://segmentfault.com/a/1190000021712743">git mergeçš„åŸç†ï¼ˆé€’å½’ä¸‰è·¯åˆå¹¶ç®—æ³•ï¼‰&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></content><category scheme="https://waynerv.github.io/categories/%E5%B7%A5%E5%85%B7/" term="å·¥å…·" label="å·¥å…·"/><category scheme="https://waynerv.github.io/tags/git/" term="Git" label="Git"/></entry><entry><title type="text">ä½¿ç”¨ Hugo å’Œ GitHub Pages éƒ¨ç½²ä¸ªäººåšå®¢</title><link rel="alternate" type="text/html" href="https://waynerv.github.io/posts/setup-blog-with-hugo-and-github-pages/"/><id>https://waynerv.github.io/posts/setup-blog-with-hugo-and-github-pages/</id><updated>2021-01-04T03:47:46+00:00</updated><published>2020-12-24T21:47:50+08:00</published><author><name>Waynerv</name><uri>https://waynerv.github.io</uri><email>ampedee@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ä½œä¸ºä¸€ä¸ªå·²ç»å…¥è¡Œäº†ä¸€å¹´å¤šçš„ï¼ˆè€ï¼‰æŠ€æœ¯äººï¼Œç»´æŠ¤ä¸€ä¸ªçœ‹å¾—è¿‡å»çš„ä¸ªäººåšå®¢æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ åˆšå­¦â€¦â€¦</summary><content type="html">&lt;p>ä½œä¸ºä¸€ä¸ªå·²ç»å…¥è¡Œäº†ä¸€å¹´å¤šçš„ï¼ˆè€ï¼‰æŠ€æœ¯äººï¼Œç»´æŠ¤ä¸€ä¸ªçœ‹å¾—è¿‡å»çš„ä¸ªäººåšå®¢æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚&lt;/p>
&lt;p>åˆšå­¦ç¼–ç¨‹çš„æ—¶å€™ï¼Œæˆ‘è¿˜å¼€æºè¿‡ä¸€ä¸ªåŸºäº Flask å’Œ MongoDB çš„&lt;a href="https://github.com/waynerv/originblog">åšå®¢é¡¹ç›®&lt;/a>ï¼Œä½†åé¢å°±æ²¡æ€ä¹ˆä½¿ç”¨å’Œç»´æŠ¤äº†ï¼Œé™¤å¼€ä¸»è§‚ä¸Šçš„æ‡’ï¼Œè¿˜å› ä¸ºï¼š&lt;/p>
&lt;ul>
&lt;li>è‡ªå»ºåšå®¢ç»•ä¸å¼€ä¸»æœºå’ŒåŸŸåï¼Œè¿™æ˜¯ä¸€ç¬”æŒç»­çš„ç»æµæˆæœ¬ã€‚å›½å†…çš„ä¸»æœºå¾€å¾€æ˜¯ç¬¬ä¸€å¹´å‰²è‚‰ç¬¬äºŒå¹´å®°çŒªï¼Œå›½å¤–çš„ä¸»æœºè®¿é—®å»¶è¿Ÿå¾ˆé«˜ã€‚&lt;/li>
&lt;li>å›½å†…ä¸»æœºæ›´éº»çƒ¦çš„æ˜¯è¿˜éœ€è¦å®šæœŸå¤‡æ¡ˆï¼Œç¬¬ä¸€ä¸ªåšå®¢å°±æ˜¯å› ä¸ºå¤‡æ¡ˆåˆ°æœŸä¸­æ–­äº†ã€‚&lt;/li>
&lt;li>åšå®¢åŠŸèƒ½çš„å®ç°æŠ€æœ¯éš¾åº¦ä¸å¤§ï¼Œå¼€å§‹è¿˜æœ‰ä¸€äº›æ–°é²œæ„Ÿï¼Œæœ‰äº†å·¥ä½œç»éªŒåå°±å¾ˆéš¾æœ‰å…´è¶£ç»§ç»­ç»´æŠ¤äº†ã€‚&lt;/li>
&lt;/ul>
&lt;p>åˆšå¥½æœ€è¿‘æœ‰å†™ä¸€äº›æ–‡ç« çš„æ‰“ç®—ï¼Œå†³å®šæ‰¾ä¸ªç®€å•ã€çœäº‹ï¼ˆæœ€åå‘ç°å¹¶æ²¡æœ‰ï¼‰ä¸”ä¸èŠ±é’±çš„è·¯å­æŠŠåšå®¢å†æèµ·æ¥ï¼Œç»è¿‡ä¸€ç•ªç ”ç©¶ï¼Œé€‰æ‹©äº†ç”Ÿæˆé™æ€ç«™ç‚¹å‘å¸ƒåˆ° GitHub Pages çš„æ–¹æ¡ˆã€‚&lt;/p>
&lt;h2 id="å·¥ä½œæµ">å·¥ä½œæµ&lt;/h2>
&lt;p>æ•´ä¸ªæ–¹æ¡ˆçš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”¨ Markdown æ ¼å¼å†™ä½œæ–‡ç« ã€‚&lt;/li>
&lt;li>ä½¿ç”¨ç”Ÿæˆå™¨å°† markdown æ–‡ä»¶è½¬æ¢æˆé™æ€ç«™ç‚¹ã€‚&lt;/li>
&lt;li>å°†ç”Ÿæˆçš„ç«™ç‚¹å†…å®¹æ¨é€åˆ° GitHub å¹¶å‘å¸ƒã€‚&lt;/li>
&lt;/ol>
&lt;p>å†™ markdown æ²¡å•¥å¥½è¯´çš„ï¼Œä»€ä¹ˆç¼–è¾‘å™¨éƒ½å¯ä»¥ï¼Œæˆ‘ä¸€ç›´ç”¨çš„æ˜¯ Typoraã€‚&lt;/p>
&lt;p>é™æ€ç«™ç‚¹ç”Ÿæˆå™¨æˆ‘é€‰æ‹©äº† Hugoï¼ŒåŸå› æ˜¯æœ€è¿‘åˆšå¥½åœ¨å­¦ Goï¼Œæ­¤å¤–è¿˜æœ‰ Gatsbyã€Jekyllã€Hexoç­‰å¾ˆå¤šé€‰é¡¹ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥è¦åšçš„å·¥ä½œæ˜¯ç”Ÿæˆé™æ€ç«™ç‚¹å¹¶é€šè¿‡ GitHub Pages å‘å¸ƒã€‚&lt;/p>
&lt;h2 id="ç”Ÿæˆé™æ€ç«™ç‚¹">ç”Ÿæˆé™æ€ç«™ç‚¹&lt;/h2>
&lt;p>ä½¿ç”¨ Hugo ç”Ÿæˆé™æ€åšå®¢ç«™ç‚¹éå¸¸ç®€å•ï¼Œå…·ä½“çš„æ­¥éª¤å’Œç”¨æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„ &lt;a href="https://gohugo.io/getting-started/quick-start/">Quick Start&lt;/a>ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å®‰è£… Hugoã€‚&lt;code>macOS&lt;/code> ä¸‹å¯ä»¥ç›´æ¥ä½¿ç”¨ &lt;code>homebrew&lt;/code>å®‰è£…ï¼š&lt;code>brew install hugo&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç«™ç‚¹ã€‚è¿™ä¼šç”Ÿæˆä¸€ä¸ªç‰¹å®šç›®å½•ç»“æ„çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç”¨æ¥ç»´æŠ¤æ‰€æœ‰çš„ç«™ç‚¹å†…å®¹ã€‚å‡è®¾æˆ‘ä»¬æƒ³æŠŠå®ƒå‘½åä¸º &lt;code>hugo-blog&lt;/code>ï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºå¹¶åˆ‡æ¢åˆ°è¯¥ç›®å½•ï¼Œåç»­çš„æ“ä½œå’Œå‘½ä»¤éƒ½ä¼šåœ¨è¿™ä¸ªæ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š&lt;/p>
&lt;pre>&lt;code>hugo new site hugo-blog
cd hugo-blog
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>å®‰è£…ä¸€ä¸ªä¸»é¢˜ã€‚è¿™ä¸€æ­¥æ˜¯å¿…éœ€çš„ï¼Œå¦åˆ™ä¼šå› ä¸ºç¼ºå°‘åŸºç¡€æ¨¡æ¿æ— æ³•ç”Ÿæˆç«™ç‚¹ã€‚å®‰è£…ä¸»é¢˜æœ‰ 3 ç§æ–¹å¼ï¼Œä»¥ &lt;code>eureka&lt;/code> ä¸»é¢˜ä¸ºä¾‹ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç›´æ¥ä¸‹è½½ä¸»é¢˜çš„å‹ç¼©æ–‡ä»¶ï¼Œå°†è§£å‹å¾—åˆ°çš„æ–‡ä»¶å¤¹é‡å‘½åä¸ºä¸»é¢˜åç§° &lt;code>eureka&lt;/code> æ”¾åˆ° &lt;code>themes/&lt;/code>ç›®å½•ä¸‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡ &lt;code>git submodule&lt;/code> å®‰è£…ï¼š&lt;/p>
&lt;pre>&lt;code>git init
git submodule add https://github.com/wangchucheng/hugo-eureka.git themes/eureka
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>é€šè¿‡ &lt;code>Hugo Modules&lt;/code> å®‰è£…ï¼ˆè¿™ç§æ–¹å¼è¦æ±‚æœ¬æœºå®‰è£…æœ‰ &lt;a href="https://golang.org/dl/">Go 1.12&lt;/a> åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä¸”åªæœ‰éƒ¨åˆ†ä¸»é¢˜æ”¯æŒï¼‰ï¼š&lt;/p>
&lt;pre>&lt;code>hugo mod init &amp;lt;module_name&amp;gt;
&lt;/code>&lt;/pre>&lt;p>&lt;code>&amp;lt;module_name&amp;gt;&lt;/code> å¹¶ä¸é‡è¦ï¼Œéšä¾¿èµ·ä¸ªåå­—å°±è¡Œã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å®‰è£…åéœ€è¦å¯ç”¨ä¸»é¢˜ï¼Œæ–¹æ³•æ˜¯å°†ä¸»é¢˜åç§°å†™å…¥åˆ°æ ¹ç›®å½•ä¸‹çš„é»˜è®¤é…ç½®æ–‡ä»¶ &lt;code>config.yml&lt;/code> ä¸­ï¼š&lt;/p>
&lt;pre>&lt;code>echo 'theme = &amp;quot;eureka&amp;quot;' &amp;gt;&amp;gt; config.toml
&lt;/code>&lt;/pre>&lt;p>å¦‚æœæ˜¯é€šè¿‡ &lt;code>Hugo Modules&lt;/code> å®‰è£…ï¼Œéœ€è¦æŠŠä¸»é¢˜åç§°æ›¿æ¢æˆæ¨¡å—åç§°ï¼š&lt;/p>
&lt;pre>&lt;code>echo 'theme = &amp;quot;github.com/wangchucheng/hugo-eureka&amp;quot;' &amp;gt;&amp;gt; config.toml
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>æ·»åŠ ä¸€ç¯‡æ–‡ç« ã€‚å¯ä»¥ç›´æ¥åœ¨ &lt;code>content/posts&lt;/code> ç›®å½•ä¸‹åˆ›å»º markdown æ–‡ä»¶ï¼Œä½†éœ€è¦æ‰‹åŠ¨å†™å…¥ä¸€äº›å…ƒä¿¡æ¯ï¼Œå› æ­¤æ¨èä½¿ç”¨ Hugo è‡ªå¸¦çš„å‘½ä»¤ï¼š&lt;code>hugo new posts/my-first-post.md&lt;/code>ï¼Œæ·»åŠ çš„æ–‡ä»¶ä¼šä»¥å¦‚ä¸‹å…ƒä¿¡æ¯å¼€å¤´ï¼š&lt;/p>
&lt;pre>&lt;code>---
title: &amp;quot;My First Post&amp;quot;
date: 2019-03-26T08:47:11+01:00
draft: true
---
&lt;/code>&lt;/pre>&lt;p>åœ¨ä¸‹æ–¹æ¥ç€å†™å…¥æ–‡ç« å†…å®¹å³å¯ã€‚æ³¨æ„æ­¤æ—¶è¯¥æ–‡ä»¶ä¸ºè‰ç¨¿çŠ¶æ€ï¼Œå†™ä½œå®Œæˆåéœ€è¦æ”¹æˆ &lt;code>draft: false&lt;/code> æ‰èƒ½éƒ¨ç½²ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯åŠ¨ Hugo é¢„è§ˆæœåŠ¡å™¨ã€‚Hugo å¯ä»¥å¯åŠ¨ä¸€ä¸ª Web æœåŠ¡å™¨ï¼ŒåŒæ—¶æ„å»ºç«™ç‚¹å†…å®¹åˆ°å†…å­˜ä¸­å¹¶åœ¨æ£€æµ‹åˆ°æ–‡ä»¶æ›´æ”¹åé‡æ–°æ¸²æŸ“ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒå®æ—¶é¢„è§ˆå¯¹ç«™ç‚¹æ‰€åšçš„æ›´æ”¹ã€‚&lt;/p>
&lt;pre>&lt;code>hugo server -D
&lt;/code>&lt;/pre>&lt;p>æ·»åŠ  &lt;code>-D&lt;/code> é€‰é¡¹ä»¥è¾“å‡ºè‰ç¨¿çŠ¶æ€çš„æ–‡ç« ï¼Œæ‰§è¡ŒæˆåŠŸåå¯ä»¥é€šè¿‡ &lt;code>http://localhost:1313/&lt;/code> è®¿é—®ç«™ç‚¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‡ªå®šä¹‰ä¸»é¢˜é…ç½®ã€‚ç«™ç‚¹çš„é…ç½®é¡¹é»˜è®¤ä¿å­˜åœ¨æ ¹ç›®å½•çš„ &lt;code>config.toml&lt;/code> æ–‡ä»¶ä¸­ï¼Œé…ç½®é¡¹è¾ƒå¤šæ—¶é€šå¸¸ä¼šç”¨ä¸»é¢˜æä¾›çš„é¢„è®¾é…ç½®æ–‡ä»¶æ¥æ›¿æ¢è¯¥æ–‡ä»¶ï¼Œè¿˜å¯ä»¥é€šè¿‡&lt;code>config&lt;/code> ç›®å½•åŠ å¤šä¸ªæ–‡ä»¶çš„æ–¹å¼æ¥ç»„ç»‡é…ç½®ã€‚é»˜è®¤é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p>
&lt;pre>&lt;code>baseURL = &amp;quot;http://example.org/&amp;quot; # å‘å¸ƒåœ°å€ï¼Œç”±ä¸»æœºåä»¥åŠè·¯å¾„ç»„æˆ
languageCode = &amp;quot;en-us&amp;quot; # è¯­è¨€ä»£ç ï¼Œä¸­æ–‡å¯ä»¥è®¾ç½®ä¸º&amp;quot;zh&amp;quot;
title = &amp;quot;My New Hugo Site&amp;quot; # ç«™ç‚¹æ ‡é¢˜
&lt;/code>&lt;/pre>&lt;p>è¿™ä¸€æ­¥åº”è¯¥æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¸­æœ€éº»çƒ¦ä¹Ÿæ˜¯æœ€å®¹æ˜“å‡ºé—®é¢˜çš„ä¸€æ­¥ï¼Œè§†ä¹ä½ é€‰æ‹©çš„ä¸»é¢˜ä¸æƒ³è¦çš„åŠŸèƒ½ä¸åŒï¼Œéœ€è¦è‡ªå®šä¹‰çš„é…ç½®é¡¹ä¹Ÿä¸åŒï¼Œæ•°é‡ä»å‡ ä¸ªåˆ°ä¸Šç™¾ä¸ªä¸ç­‰ã€‚æœ‰äº›ä¸»é¢˜ä¼šæœ‰è¯¦ç»†çš„æ–‡æ¡£è§£é‡Šé…ç½®è¿‡ç¨‹ï¼Œæœ‰äº›åˆ™ä¸€ç¬”å¸¦è¿‡åªèƒ½è‡ªå·±å»æ‘¸ç´¢ï¼Œé…ç½®è¾ƒå¤šæ—¶ç›¸äº’é—´å¯èƒ½è¿˜æœ‰ä¾èµ–å…³ç³»ï¼Œæœ€å¥½æ›´æ”¹ä¸€ä¸ªé…ç½®å°±åˆ·æ–°ä¸€æ¬¡é¡µé¢ç¡®è®¤ä¸‹ç»“æœã€‚&lt;/p>
&lt;p>å»ºè®®èµ·æ­¥æ—¶ä¸€åˆ‡ä»ç®€ï¼ŒèŠ±å¤§æŠŠæ—¶é—´æå„ç§èŠ±é‡Œèƒ¡å“¨çš„æ ·å¼å’ŒåŠŸèƒ½ï¼Œè¿˜ä¸å¦‚å¤šå†™å‡ ç¯‡æ–‡ç« ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ„å»ºé™æ€é¡µé¢ã€‚ç«™ç‚¹é…ç½®æˆæˆ‘ä»¬ç†æƒ³çš„æ•ˆæœä¹‹åå°±å¯ä»¥æ„å»ºé™æ€é¡µé¢äº†ï¼š&lt;/p>
&lt;pre>&lt;code>hugo -D
&lt;/code>&lt;/pre>&lt;p>æ·»åŠ  &lt;code>-D&lt;/code> é€‰é¡¹å¯ä»¥åœ¨ç»“æœä¸­åŒ…æ‹¬è‰ç¨¿å†…å®¹ï¼Œé»˜è®¤æƒ…å†µä¸‹é™æ€é¡µé¢ä¼šè¾“å‡ºåˆ°æ ¹ç›®å½•ä¸‹çš„ &lt;code>public&lt;/code> æ–‡ä»¶å¤¹ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="é€šè¿‡-github-pages-å‘å¸ƒ">é€šè¿‡ GitHub Pages å‘å¸ƒ&lt;/h2>
&lt;p>è¿™ä¸€æ­¥ Hugo çš„å®˜æ–¹æ–‡æ¡£åŒæ ·åœ¨ &lt;a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">Host on GitHub&lt;/a> ä¸­è¿›è¡Œäº†è¯¦ç»†çš„ä»‹ç»ï¼Œå¹¶ä¸”è¿˜å¾ˆè´´å¿ƒçš„æä¾›äº†è‡ªåŠ¨åŒ–æ“ä½œçš„ Shell è„šæœ¬ã€‚&lt;/p>
&lt;p>æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é€šè¿‡ä¸ªäººä¸»é¡µå‘å¸ƒï¼šå¿…é¡»åˆ›å»ºä¸€ä¸ª &lt;code>&amp;lt;USERNAME&amp;gt;.github.io&lt;/code> ä»“åº“æ¥æ‰˜ç®¡ç”Ÿæˆçš„é™æ€å†…å®¹ï¼Œå‘å¸ƒåçš„åŸŸåä¸º &lt;code>https://&amp;lt;USERNAME&amp;gt;.github.io&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡é¡¹ç›®ä¸»é¡µå‘å¸ƒï¼šå¯ä»¥éšæ„åˆ›å»º &lt;code>&amp;lt;PROJECT_NAME&amp;gt;&lt;/code> ä»“åº“ï¼Œå‘å¸ƒåçš„åŸŸåä¸º &lt;code>https://&amp;lt;USERNAME&amp;gt;.github.io/&amp;lt;PROJECT_NAME&amp;gt;&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>è§†é€‰æ‹©çš„å‘å¸ƒæ–¹å¼ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦å°† &lt;code>config.yml&lt;/code> ä¸­çš„ &lt;code>baseUrl&lt;/code> è®¾ç½®ä¸ºä¸åŒçš„å€¼ã€‚&lt;/p>
&lt;h3 id="é€šè¿‡ä¸ªäººä¸»é¡µå‘å¸ƒ">é€šè¿‡ä¸ªäººä¸»é¡µå‘å¸ƒ&lt;/h3>
&lt;p>å»ºè®®éç‰¹æ®Šæƒ…å†µä¸‹ä½¿ç”¨ç¬¬ 1 ç§æ–¹å¼ï¼ŒåŸå› æ˜¯è®¸å¤šä¸»é¢˜éƒ½ä¸èƒ½å¾ˆå¥½çš„æ”¯æŒç¬¬ 2 ç§ï¼Œå…·ä½“æ¥è¯´æ˜¯å°† &lt;code>config.toml&lt;/code> çš„ &lt;code>baseURL&lt;/code> è®¾ç½®ä¸ºå«å­è·¯å¾„çš„åœ°å€æ—¶ï¼Œä¸èƒ½æ­£ç¡®çš„å¤„ç†æ‰€æœ‰èµ„æºçš„æ„å»ºä½ç½®ã€‚æˆ‘å°è¯•äº† 3 ä¸ªä¸»é¢˜ï¼Œå‡é­é‡äº†ä¸åŒçš„é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>eureka&lt;/code>: æ„å»ºå¤±è´¥ï¼Œæç¤º :&lt;/p>
&lt;pre>&lt;code>Error: Error building site: POSTCSS: failed to transform &amp;quot;css/eureka.css&amp;quot; (text/css): resource &amp;quot;css/waynerv.github.io/css/eureka.css_fc3f76d7bee2760c3a903059afc3d9b2&amp;quot; not found in file cache
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>&lt;code>LoveIt&lt;/code>: æ„å»ºæˆåŠŸï¼Œä½†é™¤ä¸»é¡µä»¥å¤–çš„æ–‡ç« ã€åˆ†ç±»å’Œæ ‡ç­¾çš„é¡µé¢å‡æç¤º 404ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>MemE&lt;/code>: æ„å»ºæˆåŠŸï¼Œä½†æ–‡ç« ä¸­æ’å…¥çš„å›¾ç‰‡åŠ è½½ 404ï¼ˆæ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹çš„&lt;code>favicon&lt;/code> å´èƒ½æ­£å¸¸å±•ç¤ºï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªé—®é¢˜æˆ‘åœ¨ &lt;code>eureka&lt;/code> é¡¹ç›®æäº¤äº† issueï¼Œå¼€å‘è€…å›å¤å¯èƒ½æ˜¯ Hugo æœ¬èº«çš„æœºåˆ¶æ‰€å¯¼è‡´ï¼Œå¹¶å·²ç»åœ¨ Hugo è®ºå›ä¸­æå‡ºäº†æ­¤&lt;a href="https://discourse.gohugo.io/t/cached-resources-not-found-in-file-cache-when-baseurl-contains-subdirectory/30182/8">é—®é¢˜&lt;/a>ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å…³æ³¨åç»­è¿›å±•ã€‚&lt;/p>
&lt;h3 id="å‘å¸ƒæ­¥éª¤">å‘å¸ƒæ­¥éª¤&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>åœ¨ GitHub åˆ›å»ºä¸ªäººä¸»é¡µä»“åº“ï¼Œä»“åº“åç§°å¿…é¡»è®¾ç½®ä¸º &lt;code>&amp;lt;USERNAME&amp;gt;.github.io&lt;/code>ï¼Œè¿™ä¸ªä»“åº“ä»…å­˜æ”¾ç”Ÿæˆçš„é™æ€å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ GitHub åˆ›å»ºä¸€ä¸ªé¡¹ç›®ä»“åº“ &lt;code>hugo-blog&lt;/code> å¹¶æ·»åŠ ä¸ºæˆ‘ä»¬æœ¬åœ°é¡¹ç›®æ–‡ä»¶å¤¹çš„è¿œç¨‹ä»“åº“ã€‚è¿™ä¸ªä»“åº“ç”¨æ¥ç»´æŠ¤ç«™ç‚¹é…ç½®å’ŒåŸå§‹çš„æ–‡ç« å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‡è®¾æˆ‘ä»¬åœ¨å·²ç»é€šè¿‡ä¸Šæ–‡çš„æ­¥éª¤åœ¨ &lt;code>public&lt;/code> æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆäº†æƒ³å‘å¸ƒçš„é™æ€å†…å®¹ï¼Œè¿è¡Œï¼š&lt;/p>
&lt;pre>&lt;code>git submodule add -b main https://github.com/&amp;lt;USERNAME&amp;gt;/&amp;lt;USERNAME&amp;gt;.github.io.git public
&lt;/code>&lt;/pre>&lt;p>åœ¨ &lt;code>public&lt;/code> ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª git å­æ¨¡å—ï¼Œä¹‹åè¿™ä¸ªç›®å½•å°†ä»¥ &lt;code>https://github.com/&amp;lt;USERNAME&amp;gt;/&amp;lt;USERNAME&amp;gt;.github.io&lt;/code> ä½œä¸ºè¿œç¨‹ä»“åº“ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¡®ä¿é…ç½®æ–‡ä»¶ä¸­çš„ &lt;code>baseUrl&lt;/code> å·²ç»è®¾ç½®ä¸ºäº† &lt;code>&amp;lt;USERNAME&amp;gt;.github.io&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Hugo ä¸ºæˆ‘ä»¬æ¥ä¸‹æ¥çš„éƒ¨ç½²æ“ä½œæä¾›äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„ Shell è„šæœ¬ï¼š&lt;/p>
&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>#!/bin/sh
# ä»»ä¸€æ­¥éª¤æ‰§è¡Œå¤±è´¥éƒ½ä¼šç»ˆæ­¢æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹
set -e
printf &amp;quot;\033[0;32mDeploying updates to GitHub...\033[0m\n&amp;quot;
# æ„å»ºé™æ€å†…å®¹
hugo # if using a theme, replace with `hugo -t &amp;lt;YOURTHEME&amp;gt;`
# åˆ‡æ¢åˆ° Public æ–‡ä»¶å¤¹
cd public
# æ·»åŠ æ›´æ”¹åˆ° git
git add .
# æäº¤æ›´æ”¹
msg=&amp;quot;rebuilding site $(date)&amp;quot;
if [ -n &amp;quot;$*&amp;quot; ]; then
msg=&amp;quot;$*&amp;quot;
fi
git commit -m &amp;quot;$msg&amp;quot;
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main
&lt;/code>&lt;/pre>&lt;p>å°†å¦‚ä¸Šå†…å®¹ä¿å­˜åˆ° &lt;code>deploy.sh&lt;/code> æ–‡ä»¶ä¸­ï¼Œå¹¶æ‰§è¡Œ &lt;code>chmod +x deploy.sh&lt;/code> ä¸ºå…¶æ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚æ¥ç€æ‰§è¡Œéƒ¨ç½²è„šæœ¬ï¼š&lt;/p>
&lt;pre>&lt;code>./deploy.sh
&lt;/code>&lt;/pre>&lt;p>å¤§åŠŸå‘Šæˆï¼ç¨ç­‰å‡ åˆ†é’Ÿå°±å¯ä»¥åœ¨ &lt;code>https://&amp;lt;USERNAME&amp;gt;.github.io&lt;/code> çœ‹åˆ°æˆ‘ä»¬çš„ä¸ªäººåšå®¢äº†ã€‚&lt;/p>
&lt;h3 id="é€šè¿‡-github-actions-è‡ªåŠ¨éƒ¨ç½²">é€šè¿‡ GitHub Actions è‡ªåŠ¨éƒ¨ç½²&lt;/h3>
&lt;p>ç›®å‰æˆ‘ä»¬çš„ã€Œåˆ›ä½œ-å‘å¸ƒã€æµç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨é¡¹ç›®ä»“åº“ç¼–è¾‘åŸå§‹å†…å®¹å¹¶è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰§è¡Œè‡ªåŠ¨è„šæœ¬ç”Ÿæˆé™æ€ç«™ç‚¹å¹¶æ¨é€åˆ°ä¸ªäººä¸»é¡µä»“åº“å®Œæˆå‘å¸ƒã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>è¿™å¥—æµç¨‹å·²ç»å¾ˆæµç•…ï¼Œä½†è¿˜æœ‰ä¸€äº›æ”¹è¿›ç©ºé—´ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;a href="https://github.com/features/actions">GitHub Actions&lt;/a>ï¼Œåœ¨æ¯æ¬¡å‘è¿œç¨‹çš„é¡¹ç›®ä»“åº“æ¨é€åŸå§‹å†…å®¹æ›´æ”¹æ—¶è‡ªåŠ¨æ‰§è¡Œç¬¬ 2 æ­¥è¿›è¡Œå‘å¸ƒã€‚&lt;/p>
&lt;p>GitHub ä¸Šæœ‰è®¸å¤šè¿™ç±»è‡ªåŠ¨åŒ–éƒ¨ç½²ä»»åŠ¡çš„å¼€æº Actions é¡¹ç›®ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å…¶ä¸­ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ &lt;a href="https://github.com/peaceiris/actions-hugo#getting-started">GitHub Actions for Hugo&lt;/a>ã€‚å…·ä½“çš„æ“ä½œæ­¥éª¤æˆªå›¾å’Œè¯¦ç»†é…ç½®é¡¹å¯ä»¥æŸ¥çœ‹è¯¥é¡¹ç›®çš„ &lt;a href="https://github.com/peaceiris/actions-hugo#github-actions-for-hugo">README&lt;/a>ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸‹é…ç½®è¿‡ç¨‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æ·»åŠ ç›®å½•å’Œæ–‡ä»¶ï¼š&lt;code>.github/workflows/gh-pages.yml&lt;/code>ï¼Œ&lt;code>gh-pages.yml&lt;/code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;pre>&lt;code>name: github pages
on:
push:
branches:
- main # æ¯æ¬¡æ¨é€åˆ° main åˆ†æ”¯éƒ½ä¼šè§¦å‘éƒ¨ç½²ä»»åŠ¡
jobs:
deploy:
runs-on: ubuntu-18.04
steps:
- uses: actions/checkout@v2
with:
submodules: true # Fetch Hugo themes (true OR recursive)
fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod
- name: Setup Hugo
uses: peaceiris/actions-hugo@v2
with:
hugo-version: '0.79.1'
extended: true
- name: Build
run: hugo --minify
- name: Deploy
uses: peaceiris/actions-gh-pages@v3
with:
deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }}
external_repository: &amp;lt;USERNAME&amp;gt;/&amp;lt;USERNAME&amp;gt;.github.io # æ›¿æ¢æˆä¸Šæ–‡æ‰€åˆ›å»ºçš„ä¸ªäººä¸»é¡µä»“åº“
publish_branch: main
publish_dir: ./public
&lt;/code>&lt;/pre>&lt;p>è¿™ä¸ªæ–‡ä»¶æ‰€å®šä¹‰çš„ &lt;code>workflow&lt;/code> åŸºäºé¡¹ç›®ä»“åº“è¿è¡Œï¼Œä½†æˆ‘ä»¬éœ€è¦å°†è¿è¡Œè¿‡ç¨‹ç”Ÿæˆçš„é™æ€æ–‡ä»¶æ¨é€åˆ°ä¸ªäººä¸»é¡µä»“åº“ &lt;code>&amp;lt;USERNAME&amp;gt;.github.io&lt;/code> å®Œæˆå‘å¸ƒï¼Œå› æ­¤åœ¨ &lt;code>Deploy&lt;/code> ä»»åŠ¡ä¸­æŒ‰ç…§æ–‡æ¡£çš„ &lt;a href="https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-deploy-to-external-repository-external_repository">Deploy to external repository &lt;code>external_repository&lt;/code>&lt;/a> ä¸€èŠ‚åšäº†ä¸“é—¨çš„é…ç½®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨æœ¬åœ°ç”Ÿæˆ SSH éƒ¨ç½²å¯†é’¥ï¼š&lt;/p>
&lt;pre>&lt;code>ssh-keygen -t rsa -b 4096 -C &amp;quot;$(git config user.email)&amp;quot; -f gh-pages -N &amp;quot;&amp;quot;
# å°†åœ¨å½“å‰ç›®å½•ç”Ÿæˆå¦‚ä¸‹å¯†é’¥æ–‡ä»¶:
# gh-pages.pub (å…¬é’¥)
# gh-pages (ç§é’¥)
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>åœ¨ GitHub åˆ†åˆ«è¿›å…¥é¡¹ç›®ä»“åº“å’Œä¸ªäººä¸»é¡µä»“åº“çš„ &lt;code>Settings&lt;/code> é¡µé¢ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å°†å…¬é’¥ &lt;code>gh-pages.pub&lt;/code> ä½œä¸º &lt;code>Secret&lt;/code> æ·»åŠ åˆ°é¡¹ç›®ä»“åº“ï¼Œå¹¶è®¾ç½® &lt;code>Name&lt;/code> ä¸º &lt;code>ACTIONS_DEPLOY_KEY&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†ç§é’¥ &lt;code>gh-pages&lt;/code> ä½œä¸º &lt;code>Deploy Key&lt;/code> æ·»åŠ åˆ°ä¸ªäººä¸»é¡µä»“åº“ï¼Œå¹¶è®¾ç½®ä¸º &lt;code>Allow write access&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æ•ˆæœã€‚&lt;/p>
&lt;p>åœ¨æœ¬åœ°åšä¸€äº›æ›´æ”¹ï¼Œé¢„è§ˆæ•ˆæœåæäº¤å¹¶æ¨é€ï¼Œç„¶ååœ¨é¡¹ç›®ä»“åº“çš„ GitHub Actions é¡µé¢æ£€æŸ¥ç›¸åº”çš„ &lt;code>workflow&lt;/code> æ˜¯å¦è¿è¡ŒæˆåŠŸã€‚ä¸å‡ºæ„å¤–çš„è¯ï¼Œå¾ˆå¿«ä¸ªäººä¸»é¡µä»“åº“å°†æ–°å¢ä¸€ä¸ªç”±è¯¥ &lt;code>workflow&lt;/code> åˆ›å»ºçš„æäº¤ï¼Œè®¿é—®ä¸ªäººåšå®¢é¡µé¢ä¹Ÿä¼šå‘ç°é¡µé¢å·²ç»æ›´æ–°ã€‚&lt;/p>
&lt;h2 id="ä¸ªäººä½“éªŒ">ä¸ªäººä½“éªŒ&lt;/h2>
&lt;p>ç”±äºå…ˆåé€‰æ‹©çš„ 3 ä¸ªä¸»é¢˜å‡é­é‡äº†ä¸Šè¿°å‘å¸ƒåœ°å€ä¸èƒ½åŒ…å«å­è·¯å¾„çš„é—®é¢˜ï¼Œæˆ‘åœ¨åŸºæœ¬æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ“ä½œçš„å‰æä¸‹ï¼Œä¾ç„¶èŠ±äº†è¶…è¿‡ 10 ä¸ªå°æ—¶æ‰æŠŠ&lt;a href="https://waynerv.github.io/">åšå®¢&lt;/a>ä¸Šçº¿ï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´åœ¨é…ç½®ä¸»é¢˜ä»¥åŠå¯»æ‰¾é—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¸Šã€‚æœ¬ä»¥ä¸ºé€‰æ‹©äº†ä¸€ä¸ªç®€å•å¿«æ·çš„çœå¿ƒæ–¹æ¡ˆï¼Œç»“æœè¿˜æ˜¯å…ä¸äº†è¿‡ç¨‹çš„ä¸€é¡¿è¸©å‘å’ŒæŠ˜è…¾ã€‚&lt;/p>
&lt;p>è™½ç„¶æ­å»ºåšå®¢çš„æµç¨‹ä¸ç®—çœå¿ƒï¼Œä½†æˆ‘æ‰€é‡åˆ°çš„è¿™äº›é—®é¢˜ä¹Ÿç®—æ˜¯ä¸ªä¾‹ã€‚ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œæˆ‘ä»¬å¯ä»¥åƒå†™ä»£ç ä¸€æ ·å†™åšå®¢ï¼Œå¯¹æ–‡ç« ä¿®æ”¹æäº¤å³è‡ªåŠ¨å‘å¸ƒï¼Œä¹Ÿä¸éœ€è¦è€ƒè™‘åšå®¢çš„æ ·å¼ã€åå°åŠŸèƒ½åŠä¸»æœºç»´æŠ¤ç­‰é—®é¢˜ï¼Œå¯¹æå‡å†™ä½œæ•ˆç‡ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥çœä¸‹æ¥å¾ˆå¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œç»¼åˆæ¥çœ‹ä½“éªŒè¿˜æ˜¯ä¸é”™çš„ã€‚&lt;/p></content><category scheme="https://waynerv.github.io/categories/%E4%B8%AA%E4%BA%BA/" term="ä¸ªäºº" label="ä¸ªäºº"/><category scheme="https://waynerv.github.io/tags/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/></entry><entry><title type="text">git rebase æµ…æ</title><link rel="alternate" type="text/html" href="https://waynerv.github.io/posts/git-rebase-intro/"/><id>https://waynerv.github.io/posts/git-rebase-intro/</id><updated>2021-01-04T03:47:46+00:00</updated><published>2020-12-23T23:45:24+08:00</published><author><name>Waynerv</name><uri>https://waynerv.github.io</uri><email>ampedee@gmail.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ä¹‹æ‰€ä»¥å†™è¿™ç¯‡æ–‡ç« ï¼Œæ˜¯å› ä¸ºä¹‹å‰å¯¹ git rebase -i çš„ç”¨æ³•ä¸€ç›´æ˜¯ä¸€çŸ¥åŠè§£ï¼Œä¸€æ¬¡åœ¨éœ€è¦åˆå¹¶å¤šä¸ªæäº¤æ—¶åˆšâ€¦â€¦</summary><content type="html">&lt;p>ä¹‹æ‰€ä»¥å†™è¿™ç¯‡æ–‡ç« ï¼Œæ˜¯å› ä¸ºä¹‹å‰å¯¹ &lt;code>git rebase -i&lt;/code> çš„ç”¨æ³•ä¸€ç›´æ˜¯ä¸€çŸ¥åŠè§£ï¼Œä¸€æ¬¡åœ¨éœ€è¦åˆå¹¶å¤šä¸ªæäº¤æ—¶åˆšå¥½ç”¨åˆ°ï¼Œä¸€é¡¿æ“ä½œå·®ç‚¹æŠŠæäº¤éƒ½æä¸¢äº†ï¼Œå¹¸å¥½åé¢é¡ºåˆ©æ‰¾å›ï¼Œå› æ­¤è®°å½•ä¸€ä¸‹å­¦ä¹  &lt;code>rebase&lt;/code> å‘½ä»¤çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;h2 id="ç†è§£-rebase-å‘½ä»¤">ç†è§£ Rebase å‘½ä»¤&lt;/h2>
&lt;p>&lt;code>git rebase&lt;/code> å‘½ä»¤çš„æ–‡æ¡£æè¿°æ˜¯ &lt;code>Reapply commits on top of another base tip&lt;/code>ï¼Œä»å­—é¢ä¸Šç†è§£æ˜¯ã€Œåœ¨å¦ä¸€ä¸ªåŸºç«¯ä¹‹ä¸Šé‡æ–°åº”ç”¨æäº¤ã€ï¼Œè¿™ä¸ªå®šä¹‰å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼Œæ¢ä¸ªè§’åº¦å¯ä»¥ç†è§£ä¸ºã€Œå°†åˆ†æ”¯çš„åŸºç¡€ä»ä¸€ä¸ªæäº¤æ”¹æˆå¦ä¸€ä¸ªæäº¤ï¼Œä½¿å…¶çœ‹èµ·æ¥å°±åƒæ˜¯ä»å¦ä¸€ä¸ªæäº¤ä¸­åˆ›å»ºäº†åˆ†æ”¯ä¸€æ ·ã€ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/git-rebase-visual.png" alt="git-rebase.png">&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬ä» &lt;code>Master&lt;/code> çš„æäº¤ A åˆ›å»ºäº† &lt;code>Feature&lt;/code> åˆ†æ”¯è¿›è¡Œæ–°çš„åŠŸèƒ½å¼€å‘ï¼Œè¿™æ—¶ A å°±æ˜¯ &lt;code>Feature&lt;/code> çš„åŸºç«¯ã€‚æ¥ç€ &lt;code>Matser&lt;/code> æ–°å¢äº†ä¸¤ä¸ªæäº¤ B å’Œ Cï¼Œ &lt;code>Feature&lt;/code> æ–°å¢äº†ä¸¤ä¸ªæäº¤ D å’Œ Eã€‚ç°åœ¨æˆ‘ä»¬å‡ºäºæŸç§åŸå› ï¼Œæ¯”å¦‚æ–°åŠŸèƒ½çš„å¼€å‘ä¾èµ– Bã€C æäº¤ï¼Œéœ€è¦å°† &lt;code>Master&lt;/code> çš„ä¸¤ä¸ªæ–°æäº¤æ•´åˆåˆ° &lt;code>Feature&lt;/code> åˆ†æ”¯ï¼Œä¸ºäº†ä¿æŒæäº¤å†å²çš„æ•´æ´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ° &lt;code>Feature&lt;/code> åˆ†æ”¯æ‰§è¡Œ &lt;code>rebase&lt;/code> æ“ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git rebase master
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>rebase&lt;/code> çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯é¦–å…ˆæ‰¾åˆ°è¿™ä¸¤ä¸ªåˆ†æ”¯ï¼ˆå³å½“å‰åˆ†æ”¯ &lt;code>Feature&lt;/code>ã€ &lt;code>rebase&lt;/code> æ“ä½œçš„ç›®æ ‡åŸºåº•åˆ†æ”¯ &lt;code>Master&lt;/code>ï¼‰ çš„æœ€è¿‘å…±åŒç¥–å…ˆæäº¤ Aï¼Œç„¶åå¯¹æ¯”å½“å‰åˆ†æ”¯ç›¸å¯¹äºè¯¥ç¥–å…ˆæäº¤çš„å†æ¬¡æäº¤ï¼ˆD å’Œ Eï¼‰ï¼Œæå–ç›¸åº”çš„ä¿®æ”¹å¹¶å­˜ä¸ºä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åå°†å½“å‰åˆ†æ”¯æŒ‡å‘ç›®æ ‡åŸºåº• &lt;code>Master&lt;/code> æ‰€æŒ‡å‘çš„æäº¤ C, æœ€åä»¥æ­¤ä½œä¸ºæ–°çš„åŸºç«¯å°†ä¹‹å‰å¦å­˜ä¸ºä¸´æ—¶æ–‡ä»¶çš„ä¿®æ”¹ä¾åºåº”ç”¨ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ä¸Šæ–‡ç†è§£æˆå°† &lt;code>Feature&lt;/code> åˆ†æ”¯çš„åŸºç¡€ä»æäº¤ A æ”¹æˆäº†æäº¤ Cï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯ä»æäº¤ C åˆ›å»ºäº†è¯¥åˆ†æ”¯ï¼Œå¹¶æäº¤äº† D å’Œ Eã€‚ä½†å®é™…ä¸Šè¿™åªæ˜¯ã€Œçœ‹èµ·æ¥ã€ï¼Œåœ¨å†…éƒ¨ Git å¤åˆ¶äº†æäº¤ D å’Œ E çš„å†…å®¹ï¼Œåˆ›å»ºæ–°çš„æäº¤ D' å’Œ E' å¹¶å°†å…¶åº”ç”¨åˆ°ç‰¹å®šåŸºç¡€ä¸Šï¼ˆAâ†’Bâ†’Cï¼‰ã€‚å°½ç®¡æ–°çš„ &lt;code>Feature&lt;/code> åˆ†æ”¯å’Œä¹‹å‰çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„ï¼Œä½†å®ƒæ˜¯ç”±å…¨æ–°çš„æäº¤ç»„æˆçš„ã€‚&lt;/p>
&lt;p>&lt;code>rebase&lt;/code> æ“ä½œçš„å®è´¨æ˜¯ä¸¢å¼ƒä¸€äº›ç°æœ‰çš„æäº¤ï¼Œç„¶åç›¸åº”åœ°æ–°å»ºä¸€äº›å†…å®¹ä¸€æ ·ä½†å®é™…ä¸Šä¸åŒçš„æäº¤ã€‚&lt;/p>
&lt;h2 id="ä¸»è¦ç”¨é€”">ä¸»è¦ç”¨é€”&lt;/h2>
&lt;p>&lt;code>rebase&lt;/code> é€šå¸¸ç”¨äºé‡å†™æäº¤å†å²ã€‚ä¸‹é¢çš„ä½¿ç”¨åœºæ™¯åœ¨å¤§å¤šæ•° Git å·¥ä½œæµä¸­æ˜¯ååˆ†å¸¸è§çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>æˆ‘ä»¬ä» &lt;code>master&lt;/code> åˆ†æ”¯æ‹‰å–äº†ä¸€æ¡ &lt;code>feature&lt;/code> åˆ†æ”¯åœ¨æœ¬åœ°è¿›è¡ŒåŠŸèƒ½å¼€å‘&lt;/li>
&lt;li>è¿œç¨‹çš„ &lt;code>master&lt;/code> åˆ†æ”¯åœ¨ä¹‹ååˆåˆå¹¶äº†ä¸€äº›æ–°çš„æäº¤&lt;/li>
&lt;li>æˆ‘ä»¬æƒ³åœ¨ &lt;code>feature&lt;/code> åˆ†æ”¯é›†æˆ &lt;code>master&lt;/code> çš„æœ€æ–°æ›´æ”¹&lt;/li>
&lt;/ul>
&lt;h3 id="å’Œ-merge-çš„åŒºåˆ«">å’Œ &lt;code>merge&lt;/code> çš„åŒºåˆ«&lt;/h3>
&lt;p>ä»¥ä¸Šåœºæ™¯åŒæ ·å¯ä»¥ä½¿ç”¨ &lt;code>merge&lt;/code> æ¥è¾¾æˆç›®çš„ï¼Œä½†ä½¿ç”¨ &lt;code>rebase&lt;/code> å¯ä»¥ä½¿æˆ‘ä»¬ä¿æŒä¸€ä¸ªçº¿æ€§ä¸”æ›´åŠ æ•´æ´çš„æäº¤å†å²ã€‚å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹åˆ†æ”¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash"> D---E feature
/
A---B---C master
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æˆ‘ä»¬å°†åˆ†åˆ«ä½¿ç”¨ &lt;code>merge&lt;/code> å’Œ &lt;code>rebase&lt;/code>ï¼ŒæŠŠ &lt;code>master&lt;/code> åˆ†æ”¯çš„ Bã€C æäº¤é›†æˆåˆ° &lt;code>feature&lt;/code> åˆ†æ”¯ï¼Œå¹¶åœ¨ &lt;code>feature&lt;/code> åˆ†æ”¯æ–°å¢ä¸€ä¸ªæäº¤ Fï¼Œç„¶åå†å°† &lt;code>feature&lt;/code> åˆ†æ”¯åˆå…¥ &lt;code>master&lt;/code> ï¼Œæœ€åå¯¹æ¯”ä¸¤ç§æ–¹æ³•æ‰€å½¢æˆçš„æäº¤å†å²çš„åŒºåˆ«ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä½¿ç”¨ &lt;code>merge&lt;/code>&lt;/p>
&lt;ol>
&lt;li>åˆ‡æ¢åˆ° &lt;code>feature&lt;/code> åˆ†æ”¯ï¼š &lt;code>git checkout feature&lt;/code>ã€‚&lt;/li>
&lt;li>åˆå¹¶ &lt;code>master&lt;/code> åˆ†æ”¯çš„æ›´æ–°ï¼š &lt;code>git merge master&lt;/code>ã€‚&lt;/li>
&lt;li>æ–°å¢ä¸€ä¸ªæäº¤ Fï¼š &lt;code>git add . &amp;amp;&amp;amp; git commit -m &amp;quot;commit F&amp;quot;&lt;/code> ã€‚&lt;/li>
&lt;li>åˆ‡å› &lt;code>master&lt;/code> åˆ†æ”¯å¹¶æ‰§è¡Œå¿«è¿›åˆå¹¶ï¼š &lt;code>git chekcout master &amp;amp;&amp;amp; git merge feature&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/Dec-30-2020-merge-example.gif" alt="Dec-30-2020-merge-example">&lt;/p>
&lt;p>æˆ‘ä»¬å°†å¾—åˆ°å¦‚ä¸‹æäº¤å†å²ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">* 6fa5484 &lt;span class="o">(&lt;/span>HEAD -&amp;gt; master, feature&lt;span class="o">)&lt;/span> commit F
* 875906b Merge branch &lt;span class="s1">&amp;#39;master&amp;#39;&lt;/span> into feature
&lt;span class="p">|&lt;/span>&lt;span class="se">\ &lt;/span>
&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> 5b05585 commit E
&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> f5b0fc0 commit D
* * d017dff commit C
* * 9df916f commit B
&lt;span class="p">|&lt;/span>/
* cb932a6 commit A
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨ &lt;code>rebase&lt;/code>&lt;/p>
&lt;p>æ­¥éª¤ä¸ä½¿ç”¨ &lt;code>merge&lt;/code> åŸºæœ¬ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ç¬¬ 2 æ­¥çš„å‘½ä»¤æ›¿æ¢æˆï¼š &lt;code>git rebase master&lt;/code>ã€‚&lt;/p>
&lt;p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://waynerv.github.io/images/Dec-30-2020-rebase-example.gif" alt="Dec-30-2020-rebase-example">&lt;/p>
&lt;p>æˆ‘ä»¬å°†å¾—åˆ°å¦‚ä¸‹æäº¤å†å²ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">* 74199ce &lt;span class="o">(&lt;/span>HEAD -&amp;gt; master, feature&lt;span class="o">)&lt;/span> commit F
* e7c7111 commit E
* d9623b0 commit D
* 73deeed commit C
* c50221f commit B
* ef13725 commit A
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ &lt;code>rebase&lt;/code> æ–¹æ³•å½¢æˆçš„æäº¤å†å²æ˜¯å®Œå…¨çº¿æ€§çš„ï¼ŒåŒæ—¶ç›¸æ¯” &lt;code>merge&lt;/code> æ–¹æ³•å°‘äº†ä¸€æ¬¡ &lt;code>merge&lt;/code> æäº¤ï¼Œçœ‹ä¸Šå»æ›´åŠ æ•´æ´ã€‚&lt;/p>
&lt;h3 id="ä¸ºä»€ä¹ˆè¦ä¿æŒæäº¤å†å²çš„æ•´æ´">ä¸ºä»€ä¹ˆè¦ä¿æŒæäº¤å†å²çš„æ•´æ´&lt;/h3>
&lt;p>ä¸€ä¸ªçœ‹ä¸Šæ›´æ•´æ´çš„æäº¤å†å²æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ&lt;/p>
&lt;ol>
&lt;li>æ»¡è¶³æŸäº›å¼€å‘è€…çš„æ´ç™–ã€‚&lt;/li>
&lt;li>å½“ä½ å› ä¸ºæŸäº› bug éœ€è¦å›æº¯æäº¤å†å²æ—¶ï¼Œæ›´å®¹æ˜“å®šä½åˆ° bug æ˜¯ä»å“ªä¸€ä¸ªæäº¤å¼•å…¥ã€‚å°¤å…¶æ˜¯å½“ä½ éœ€è¦é€šè¿‡ &lt;code>git bisect&lt;/code> ä»å‡ åä¸Šç™¾ä¸ªæäº¤ä¸­æ’æŸ¥ bugï¼Œæˆ–è€…æœ‰ä¸€äº›ä½“é‡è¾ƒå¤§çš„åŠŸèƒ½åˆ†æ”¯éœ€è¦é¢‘ç¹çš„ä»è¿œç¨‹çš„ä¸»åˆ†æ”¯æ‹‰å–æ›´æ–°æ—¶ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä½¿ç”¨ &lt;code>rebase&lt;/code> æ¥å°†è¿œç¨‹çš„å˜æ›´æ•´åˆåˆ°æœ¬åœ°ä»“åº“æ˜¯ä¸€ç§æ›´å¥½çš„é€‰æ‹©ã€‚ç”¨ &lt;code>merge&lt;/code> æ‹‰å–è¿œç¨‹å˜æ›´çš„ç»“æœæ˜¯ï¼Œæ¯æ¬¡ä½ æƒ³è·å–é¡¹ç›®çš„æœ€æ–°è¿›å±•æ—¶ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå¤šä½™çš„ &lt;code>merge&lt;/code> æäº¤ã€‚è€Œä½¿ç”¨ &lt;code>rebase&lt;/code> çš„ç»“æœæ›´ç¬¦åˆæˆ‘ä»¬çš„æœ¬æ„ï¼šæˆ‘æƒ³åœ¨å…¶ä»–äººçš„å·²å®Œæˆå·¥ä½œçš„åŸºç¡€ä¸Šè¿›è¡Œæˆ‘çš„æ›´æ”¹ã€‚&lt;/p>
&lt;h3 id="å…¶ä»–é‡å†™æäº¤å†å²çš„æ–¹æ³•">å…¶ä»–é‡å†™æäº¤å†å²çš„æ–¹æ³•&lt;/h3>
&lt;p>å½“æˆ‘ä»¬ä»…ä»…åªæƒ³ä¿®æ”¹æœ€è¿‘çš„ä¸€æ¬¡æäº¤æ—¶ï¼Œä½¿ç”¨ &lt;code>git commit --amend&lt;/code> ä¼šæ›´åŠ æ–¹ä¾¿ã€‚&lt;/p>
&lt;p>å®ƒé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š&lt;/p>
&lt;ul>
&lt;li>æˆ‘ä»¬åˆšåˆšå®Œæˆäº†ä¸€æ¬¡æäº¤ï¼Œä½†è¿˜æ²¡æœ‰æ¨é€åˆ°å…¬å…±çš„åˆ†æ”¯ã€‚&lt;/li>
&lt;li>çªç„¶å‘ç°ä¸Šä¸ªæäº¤è¿˜ç•™äº†äº›å°å°¾å·´æ²¡æœ‰å®Œæˆï¼Œæ¯”å¦‚ä¸€è¡Œå¿˜è®°åˆ é™¤çš„æ³¨é‡Šæˆ–è€…ä¸€ä¸ªå¾ˆå°çš„ç¬”è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«é€Ÿçš„å®Œæˆä¿®æ”¹ï¼Œä½†åˆä¸æƒ³å†æ–°å¢ä¸€ä¸ªå•ç‹¬çš„æäº¤ã€‚&lt;/li>
&lt;li>æˆ–è€…æˆ‘ä»¬åªæ˜¯è§‰å¾—ä¸Šä¸€æ¬¡æäº¤çš„æäº¤ä¿¡æ¯å†™çš„ä¸å¤Ÿå¥½ï¼Œæƒ³åšä¸€äº›ä¿®æ”¹ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æ·»åŠ æ–°å¢çš„ä¿®æ”¹ï¼ˆæˆ–è·³è¿‡ï¼‰ï¼Œä½¿ç”¨ &lt;code>git commit --amend&lt;/code> å‘½ä»¤æ‰§è¡Œæäº¤ï¼Œæ‰§è¡Œåä¼šè¿›å…¥ä¸€ä¸ªæ–°çš„ç¼–è¾‘å™¨çª—å£ï¼Œå¯ä»¥å¯¹ä¸Šä¸€æ¬¡æäº¤çš„æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œä¿å­˜åå°±ä¼šå°†æ‰€åšçš„è¿™äº›æ›´æ”¹åº”ç”¨åˆ°ä¸Šä¸€æ¬¡æäº¤ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬å·²ç»å°†ä¸Šä¸€æ¬¡æäº¤æ¨é€åˆ°äº†è¿œç¨‹çš„åˆ†æ”¯ï¼Œç°åœ¨å†æ‰§è¡Œæ¨é€å°†ä¼šæç¤ºå‡ºé”™å¹¶è¢«æ‹’ç»ï¼Œåœ¨ç¡®ä¿è¯¥åˆ†æ”¯ä¸æ˜¯ä¸€ä¸ªå…¬å…±åˆ†æ”¯çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>git push --force&lt;/code> å¼ºåˆ¶æ¨é€ã€‚&lt;/p>
&lt;p>æ³¨æ„ä¸ &lt;code>rebase&lt;/code> ä¸€æ ·ï¼ŒGit åœ¨å†…éƒ¨å¹¶ä¸ä¼šçœŸæ­£åœ°ä¿®æ”¹å¹¶æ›¿æ¢ä¸Šä¸€ä¸ªæäº¤ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„æäº¤å¹¶é‡æ–°æŒ‡å‘è¿™ä¸ªæ–°çš„æäº¤ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-rebase-çš„äº¤äº’æ¨¡å¼é‡å†™æäº¤å†å²">ä½¿ç”¨ &lt;code>rebase&lt;/code> çš„äº¤äº’æ¨¡å¼é‡å†™æäº¤å†å²&lt;/h2>
&lt;p>&lt;code>git rebase&lt;/code> å‘½ä»¤æœ‰æ ‡å‡†å’Œäº¤äº’ä¸¤ç§æ¨¡å¼ï¼Œä¹‹å‰çš„ç¤ºä¾‹æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯é»˜è®¤çš„æ ‡å‡†æ¨¡å¼ï¼Œåœ¨å‘½ä»¤åæ·»åŠ  &lt;code>-i&lt;/code> æˆ– &lt;code>--interactive&lt;/code> é€‰é¡¹å³å¯ä½¿ç”¨äº¤äº’æ¨¡å¼ã€‚&lt;/p>
&lt;h3 id="ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«">ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«&lt;/h3>
&lt;p>æˆ‘ä»¬å‰é¢æåˆ°ï¼Œ &lt;code>rebase&lt;/code> æ˜¯ã€Œåœ¨å¦ä¸€ä¸ªåŸºç«¯ä¹‹ä¸Šé‡æ–°åº”ç”¨æäº¤ã€ï¼Œè€Œåœ¨é‡æ–°åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿™äº›æäº¤ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œè‡ªç„¶ä¹Ÿå¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚åœ¨ &lt;code>rebase&lt;/code> çš„æ ‡å‡†æ¨¡å¼ä¸‹ï¼Œå½“å‰å·¥ä½œåˆ†æ”¯çš„æäº¤ä¼šè¢«ç›´æ¥åº”ç”¨åˆ°ä¼ å…¥åˆ†æ”¯çš„é¡¶ç«¯ï¼›è€Œåœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œåˆ™å…è®¸æˆ‘ä»¬åœ¨é‡æ–°åº”ç”¨ä¹‹å‰é€šè¿‡ç¼–è¾‘å™¨ä»¥åŠç‰¹å®šçš„å‘½ä»¤è§„åˆ™å¯¹è¿™äº›æäº¤è¿›è¡Œåˆå¹¶ã€é‡æ–°æ’åºåŠåˆ é™¤ç­‰é‡å†™æ“ä½œã€‚&lt;/p>
&lt;p>ä¸¤è€…æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ä¹Ÿå› æ­¤æœ‰æ‰€ä¸åŒï¼š&lt;/p>
&lt;ol>
&lt;li>æ ‡å‡†æ¨¡å¼å¸¸ç”¨äºåœ¨å½“å‰åˆ†æ”¯ä¸­é›†æˆæ¥è‡ªå…¶ä»–åˆ†æ”¯çš„æœ€æ–°ä¿®æ”¹ã€‚&lt;/li>
&lt;li>äº¤äº’æ¨¡å¼å¸¸ç”¨äºå¯¹å½“å‰åˆ†æ”¯çš„æäº¤å†å²è¿›è¡Œç¼–è¾‘ï¼Œå¦‚å°†å¤šä¸ªå°æäº¤åˆå¹¶æˆå¤§çš„æäº¤ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ä¸ä»…ä»…æ˜¯åˆ†æ”¯">ä¸ä»…ä»…æ˜¯åˆ†æ”¯&lt;/h3>
&lt;p>è™½ç„¶æˆ‘ä»¬ä¹‹å‰çš„ç¤ºä¾‹éƒ½æ˜¯åœ¨ä¸åŒçš„ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´æ‰§è¡Œ rebase æ“ä½œï¼Œä½†äº‹å®ä¸Š rebase å‘½ä»¤ä¼ å…¥çš„å‚æ•°å¹¶ä¸ä»…é™äºåˆ†æ”¯ã€‚&lt;/p>
&lt;p>ä»»ä½•çš„æäº¤å¼•ç”¨ï¼Œéƒ½å¯ä»¥è¢«è§†ä½œæœ‰æ•ˆçš„ &lt;code>rebase&lt;/code> åŸºåº•å¯¹è±¡ï¼ŒåŒ…æ‹¬ä¸€ä¸ªæäº¤ IDã€åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°æˆ– &lt;code>HEAD~1&lt;/code> è¿™æ ·çš„ç›¸å¯¹å¼•ç”¨ã€‚&lt;/p>
&lt;p>è‡ªç„¶åœ°ï¼Œå‡å¦‚æˆ‘ä»¬å¯¹å½“å‰åˆ†æ”¯çš„æŸæ¬¡å†å²æäº¤æ‰§è¡Œ &lt;code>rebase&lt;/code>ï¼Œå…¶ç»“æœå°±æ˜¯ä¼šå°†è¿™æ¬¡æäº¤ä¹‹åçš„æ‰€æœ‰æäº¤é‡æ–°åº”ç”¨åœ¨å½“å‰åˆ†æ”¯ï¼Œåœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œå³å…è®¸æˆ‘ä»¬å¯¹è¿™äº›æäº¤è¿›è¡Œæ›´æ”¹ã€‚&lt;/p>
&lt;h3 id="é‡å†™æäº¤å†å²">é‡å†™æäº¤å†å²&lt;/h3>
&lt;p>ç»ˆäºè¿›å…¥åˆ°æœ¬æ–‡çš„ä¸»é¢˜ï¼Œå‰é¢æåˆ°ï¼Œå‡å¦‚æˆ‘ä»¬åœ¨äº¤äº’æ¨¡å¼å¯¹å½“å‰åˆ†æ”¯çš„æŸæ¬¡æäº¤æ‰§è¡Œ &lt;code>rebase&lt;/code>ï¼Œå³ï¼ˆé—´æ¥ï¼‰å®ç°äº†å¯¹è¿™æ¬¡æäº¤ä¹‹åçš„æ‰€æœ‰æäº¤è¿›è¡Œé‡å†™ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€šè¿‡ä¸‹é¢çš„ç¤ºä¾‹è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬åœ¨ &lt;code>feature&lt;/code> åˆ†æ”¯æœ‰å¦‚ä¸‹æäº¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">74199cebdd34d107bb67b6da5533a2e405f4c330 &lt;span class="o">(&lt;/span>HEAD -&amp;gt; feature&lt;span class="o">)&lt;/span> commit F
e7c7111d807c1d5209b97a9c75b09da5cd2810d4 commit E
d9623b0ef9d722b4a83d58a334e1ce85545ea524 commit D
73deeedaa944ef459b17d42601677c2fcc4c4703 commit C
c50221f93a39f3474ac59228d69732402556c93b commit B
ef1372522cdad136ce7e6dc3e02aab4d6ad73f79 commit A
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦æ‰§è¡Œçš„æ“ä½œæ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>å°† Bã€C åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æäº¤ ï¼Œå¹¶ä»…ä¿ç•™åŸæäº¤ C çš„æäº¤ä¿¡æ¯&lt;/li>
&lt;li>åˆ é™¤æäº¤ D&lt;/li>
&lt;li>å°†æäº¤ E ç§»åŠ¨åˆ°æäº¤ F ä¹‹åå¹¶é‡æ–°å‘½åï¼ˆå³ä¿®æ”¹æäº¤ä¿¡æ¯ï¼‰ä¸ºæäº¤ H&lt;/li>
&lt;li>åœ¨æäº¤ F ä¸­åŠ å…¥ä¸€ä¸ªæ–°çš„æ–‡ä»¶æ›´æ”¹ï¼Œå¹¶é‡æ–°å‘½åä¸ºæäº¤ G&lt;/li>
&lt;/ul>
&lt;p>ç”±äºæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æäº¤æ˜¯ Bâ†’Câ†’Dâ†’Eï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†æäº¤ A ä½œä¸ºæ–°çš„ã€ŒåŸºç«¯ã€ï¼Œæäº¤ A ä¹‹åçš„æ‰€æœ‰æäº¤ä¼šè¢«é‡æ–°åº”ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git rebase -i ef1372522cdad136ce7e6dc3e02aab4d6ad73f79 &lt;span class="c1"># å‚æ•°æ˜¯æäº¤ A çš„ ID&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥ä¼šè¿›å…¥åˆ°å¦‚ä¸‹çš„ç¼–è¾‘å™¨ç•Œé¢ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">pick c50221f commit B
pick 73deeed commit C
pick d9623b0 commit D
pick e7c7111 commit E
pick 74199ce commit F
&lt;span class="c1"># å˜åŸº ef13725..74199ce åˆ° ef13725ï¼ˆ5 ä¸ªæäº¤ï¼‰&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="c1"># å‘½ä»¤:&lt;/span>
&lt;span class="c1"># p, pick &amp;lt;æäº¤&amp;gt; = ä½¿ç”¨æäº¤&lt;/span>
&lt;span class="c1"># r, reword &amp;lt;æäº¤&amp;gt; = ä½¿ç”¨æäº¤ï¼Œä½†ä¿®æ”¹æäº¤è¯´æ˜&lt;/span>
&lt;span class="c1"># e, edit &amp;lt;æäº¤&amp;gt; = ä½¿ç”¨æäº¤ï¼Œè¿›å…¥ shell ä»¥ä¾¿è¿›è¡Œæäº¤ä¿®è¡¥&lt;/span>
&lt;span class="c1"># s, squash &amp;lt;æäº¤&amp;gt; = ä½¿ç”¨æäº¤ï¼Œä½†èåˆåˆ°å‰ä¸€ä¸ªæäº¤&lt;/span>
&lt;span class="c1"># f, fixup &amp;lt;æäº¤&amp;gt; = ç±»ä¼¼äº &amp;#34;squash&amp;#34;ï¼Œä½†ä¸¢å¼ƒæäº¤è¯´æ˜æ—¥å¿—&lt;/span>
&lt;span class="c1"># x, exec &amp;lt;å‘½ä»¤&amp;gt; = ä½¿ç”¨ shell è¿è¡Œå‘½ä»¤ï¼ˆæ­¤è¡Œå‰©ä½™éƒ¨åˆ†ï¼‰&lt;/span>
&lt;span class="c1"># b, break = åœ¨æ­¤å¤„åœæ­¢ï¼ˆä½¿ç”¨ &amp;#39;git rebase --continue&amp;#39; ç»§ç»­å˜åŸºï¼‰&lt;/span>
&lt;span class="c1"># d, drop &amp;lt;æäº¤&amp;gt; = åˆ é™¤æäº¤&lt;/span>
......
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼ˆæ³¨æ„ä¸Šé¢æäº¤ ID ä¹‹åçš„æäº¤ä¿¡æ¯åªèµ·åˆ°æè¿°ä½œç”¨ï¼Œåœ¨è¿™é‡Œä¿®æ”¹å®ƒä»¬ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚ï¼‰&lt;/p>
&lt;p>å…·ä½“çš„æ“ä½œå‘½ä»¤åœ¨ç¼–è¾‘å™¨çš„æ³¨é‡Šä¸­å·²è§£é‡Šçš„ç›¸å½“è¯¦ç»†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¯¹æäº¤ Bã€C ä½œå¦‚ä¸‹ä¿®æ”¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">pick c50221f commit B
f 73deeed commit C
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”±äºæäº¤ B æ˜¯è¿™äº›æäº¤ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å¯¹å…¶æ‰§è¡Œ &lt;code>squash&lt;/code> æˆ–è€… &lt;code>fixup&lt;/code> å‘½ä»¤ï¼ˆæ²¡æœ‰å‰ä¸€ä¸ªæäº¤äº†ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦å¯¹æäº¤ B æ‰§è¡Œ &lt;code>reword&lt;/code> å‘½ä»¤ä»¥ä¿®æ”¹å…¶æäº¤ä¿¡æ¯ï¼Œå› ä¸ºä¹‹ååœ¨å°†æäº¤ C èåˆåˆ°æäº¤ B ä¸­æ—¶ï¼Œä¼šå…è®¸æˆ‘ä»¬å¯¹èåˆä¹‹åçš„æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹ã€‚&lt;/p>
&lt;p>æ³¨æ„è¯¥ç•Œé¢æäº¤çš„å±•ç¤ºé¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹ç”±æ—§åˆ°æ–°ï¼Œå› æ­¤æˆ‘ä»¬å°†æäº¤ C çš„å‘½ä»¤æ”¹ä¸º &lt;code>sï¼ˆæˆ– squashï¼‰&lt;/code> æˆ–è€… &lt;code>fï¼ˆæˆ– fixupï¼‰&lt;/code> ä¼šå°†å…¶èåˆåˆ°ï¼ˆä¸Šæ–¹çš„ï¼‰å‰ä¸€ä¸ªæäº¤ Bï¼Œä¸¤ä¸ªå‘½ä»¤çš„åŒºåˆ«ä¸ºæ˜¯å¦ä¿ç•™ C çš„æäº¤ä¿¡æ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤æäº¤ Dï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">d d9623b0 commit D
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç§»åŠ¨æäº¤ E åˆ°æäº¤ F ä¹‹åå¹¶ä¿®æ”¹å…¶æäº¤ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">pick 74199ce commit F
r e7c7111 commit E
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨æäº¤ F ä¸­åŠ å…¥ä¸€ä¸ªæ–°çš„æ–‡ä»¶æ›´æ”¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">e 74199ce commit F
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¿å­˜é€€å‡ºã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>æ¥ä¸‹æ¥ä¼šæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œæˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªæäº¤æ‰€ä¿®æ”¹æˆ–ä¿ç•™çš„å‘½ä»¤ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¯¹æäº¤ B çš„ &lt;code>pick&lt;/code> å‘½ä»¤ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå› æ­¤ä¸éœ€è¦äº¤äº’ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¥ç€æ‰§è¡Œå¯¹æäº¤ C çš„ &lt;code>squash&lt;/code> å‘½ä»¤ï¼Œä¼šè¿›å…¥ä¸€ä¸ªæ–°çš„ç¼–è¾‘å™¨ç•Œé¢å…è®¸æˆ‘ä»¬ä¿®æ”¹åˆå¹¶äº†Bã€C ä¹‹åçš„æäº¤ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># è¿™æ˜¯ä¸€ä¸ª 2 ä¸ªæäº¤çš„ç»„åˆã€‚&lt;/span>
&lt;span class="c1"># è¿™æ˜¯ç¬¬ä¸€ä¸ªæäº¤è¯´æ˜ï¼š&lt;/span>
commit B
&lt;span class="c1"># è¿™æ˜¯æäº¤è¯´æ˜ #2ï¼š&lt;/span>
commit C
......
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å°† &lt;code>commit B&lt;/code> è¿™ä¸€è¡Œåˆ é™¤åä¿å­˜é€€å‡ºï¼Œèåˆä¹‹åçš„æäº¤å°†ä½¿ç”¨ &lt;code>commit C&lt;/code> ä½œä¸ºæäº¤ä¿¡æ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹æäº¤ D çš„ &lt;code>drop&lt;/code> æ“ä½œä¹Ÿä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œæ²¡æœ‰äº¤äº’æ­¥éª¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰§è¡Œ &lt;code>rebase&lt;/code> çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿå†²çªï¼Œè¿™æ—¶å€™ &lt;code>rebase&lt;/code> ä¼šæš‚æ—¶ä¸­æ­¢ï¼Œéœ€è¦æˆ‘ä»¬ç¼–è¾‘å†²çªçš„æ–‡ä»¶å»æ‰‹åŠ¨åˆå¹¶å†²çªã€‚è§£å†³å†²çªåé€šè¿‡ &lt;code>git add/rm &amp;lt;conflicted_files&amp;gt;&lt;/code> å°†å…¶æ ‡è®°ä¸ºå·²è§£å†³ï¼Œç„¶åæ‰§è¡Œ &lt;code>git rebase --continue&lt;/code> å¯ä»¥ç»§ç»­ä¹‹åçš„ &lt;code>rebase&lt;/code> æ­¥éª¤ï¼›æˆ–è€…ä¹Ÿå¯ä»¥æ‰§è¡Œ &lt;code>git rebase --abort&lt;/code> æ”¾å¼ƒ &lt;code>rebase&lt;/code> æ“ä½œå¹¶æ¢å¤åˆ°æ“ä½œä¹‹å‰çš„çŠ¶æ€ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”±äºæˆ‘ä»¬ä¸Šç§»äº†æäº¤ F çš„ä½ç½®ï¼Œå› æ­¤æ¥ä¸‹æ¥å°†æ‰§è¡Œå¯¹ F çš„ &lt;code>edit&lt;/code> æ“ä½œã€‚è¿™æ—¶å°†è¿›å…¥ä¸€ä¸ªæ–°çš„ Shell ä¼šè¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">åœæ­¢åœ¨ 74199ce... commit F
æ‚¨ç°åœ¨å¯ä»¥ä¿®è¡¥è¿™ä¸ªæäº¤ï¼Œä½¿ç”¨
git commit --amend
å½“æ‚¨å¯¹å˜æ›´æ„Ÿåˆ°æ»¡æ„ï¼Œæ‰§è¡Œ
git rebase --continue
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„ä»£ç æ–‡ä»¶å¹¶æ‰§è¡Œ &lt;code>git commit --amend&lt;/code> å°†å…¶åˆå¹¶åˆ°å½“å‰çš„ä¸Šä¸€ä¸ªæäº¤ï¼ˆå³ Fï¼‰ï¼Œç„¶ååœ¨ç¼–è¾‘å™¨ç•Œé¢ä¸­å°†å…¶æäº¤ä¿¡æ¯ä¿®æ”¹ä¸º &lt;code>commit G&lt;/code>ï¼Œæœ€åæ‰§è¡Œ &lt;code>git rebase --continue&lt;/code> ç»§ç»­ &lt;code>rebase&lt;/code> æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ€åæ‰§è¡Œå¯¹æäº¤ E çš„ &lt;code>reword&lt;/code> æ“ä½œï¼Œåœ¨ç¼–è¾‘å™¨ç•Œé¢ä¸­å°†å…¶æäº¤ä¿¡æ¯ä¿®æ”¹ä¸º &lt;code>commit H&lt;/code> ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å¤§åŠŸå‘Šæˆï¼æœ€åè®©æˆ‘ä»¬ç¡®è®¤ä¸€ä¸‹ &lt;code>rebase&lt;/code> ä¹‹åçš„æäº¤å†å²ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">64710dc88ef4fbe8fe7aac206ec2e3ef12e7bca9 &lt;span class="o">(&lt;/span>HEAD -&amp;gt; feature&lt;span class="o">)&lt;/span> commit H
8ab4506a672dac5c1a55db34779a185f045d7dd3 commit G
1e186f890710291aab5b508a4999134044f6f846 commit C
ef1372522cdad136ce7e6dc3e02aab4d6ad73f79 commit A
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œå…¨ç¬¦åˆé¢„æœŸï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥çœ‹åˆ°æäº¤ Aä¹‹åçš„æ‰€æœ‰æäº¤ ID éƒ½å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¹Ÿå°è¯äº†æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„ Git é‡æ–°åˆ›å»ºäº†è¿™äº›æäº¤ã€‚&lt;/p>
&lt;h2 id="rebase-çš„è¿›é˜¶ç”¨æ³•">Rebase çš„è¿›é˜¶ç”¨æ³•&lt;/h2>
&lt;h3 id="åˆå¹¶ä¹‹å‰æ‰§è¡Œ-rebase">åˆå¹¶ä¹‹å‰æ‰§è¡Œ &lt;code>rebase&lt;/code>&lt;/h3>
&lt;p>å¦ä¸€ç§ä½¿ç”¨ &lt;code>rebase&lt;/code> çš„å¸¸è§åœºæ™¯æ˜¯åœ¨æ¨é€åˆ°è¿œç¨‹è¿›è¡Œåˆå¹¶ä¹‹å‰æ‰§è¡Œ &lt;code>rebase&lt;/code>ï¼Œä¸€èˆ¬è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿æäº¤å†å²çš„æ•´æ´ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬é¦–å…ˆåœ¨è‡ªå·±çš„åŠŸèƒ½åˆ†æ”¯é‡Œè¿›è¡Œå¼€å‘ï¼Œå½“å¼€å‘å®Œæˆæ—¶éœ€è¦å…ˆå°†å½“å‰åŠŸèƒ½åˆ†æ”¯ &lt;code>rebase&lt;/code> åˆ°æœ€æ–°çš„ä¸»åˆ†æ”¯ä¸Šï¼Œæå‰è§£å†³å¯èƒ½å‡ºç°çš„å†²çªï¼Œç„¶åå†å‘è¿œç¨‹æäº¤ä¿®æ”¹ã€‚ è¿™æ ·çš„è¯ï¼Œè¿œç¨‹ä»“åº“çš„ä¸»åˆ†æ”¯ç»´æŠ¤è€…å°±ä¸å†éœ€è¦è¿›è¡Œæ•´åˆä¸”åˆ›å»ºä¸€æ¡é¢å¤–çš„ &lt;code>merge&lt;/code> æäº¤ï¼Œåªéœ€è¦æ‰§è¡Œå¿«è¿›åˆå¹¶å³å¯ã€‚å³ä½¿æ˜¯åœ¨å¤šä¸ªåˆ†æ”¯å¹¶è¡Œå¼€å‘çš„æƒ…å†µï¼Œæœ€ç»ˆä¹Ÿèƒ½å¾—åˆ°ä¸€æ¡å®Œå…¨çº¿æ€§çš„æäº¤å†å²ã€‚&lt;/p>
&lt;h3 id="rebase-åˆ°å…¶ä»–åˆ†æ”¯">&lt;code>rebase&lt;/code> åˆ°å…¶ä»–åˆ†æ”¯&lt;/h3>
&lt;p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code>rebase&lt;/code> å¯¹ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œå¯¹æ¯”ï¼Œå–å‡ºç›¸åº”çš„ä¿®æ”¹ï¼Œç„¶ååº”ç”¨åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä¸Šã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash"> F---G patch
/
D---E feature
/
A---B---C master
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡è®¾æˆ‘ä»¬åŸºäº &lt;code>feature&lt;/code> åˆ†æ”¯çš„æäº¤ D åˆ›å»ºäº†åˆ†æ”¯ &lt;code>patch&lt;/code>ï¼Œå¹¶ä¸”æ–°å¢äº†æäº¤ Fã€Gï¼Œç°åœ¨æˆ‘ä»¬æƒ³å°† &lt;code>patch&lt;/code> æ‰€åšçš„æ›´æ”¹åˆå¹¶åˆ° &lt;code>master&lt;/code> å¹¶å‘å¸ƒï¼Œä½†æš‚æ—¶è¿˜ä¸æƒ³åˆå¹¶ &lt;code>feature&lt;/code> ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ &lt;code>rebase&lt;/code> çš„ &lt;code>--onto &amp;lt;branch&amp;gt;&lt;/code> é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git rebase â€”onto master feature patch
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šæ“ä½œå°†å–å‡º &lt;code>patch&lt;/code> åˆ†æ”¯ï¼Œå¯¹æ¯”å®ƒåŸºäº &lt;code>feature&lt;/code> æ‰€åšçš„æ›´æ”¹ï¼Œ ç„¶åæŠŠè¿™äº›æ›´æ”¹åœ¨ &lt;code>master&lt;/code> åˆ†æ”¯ä¸Šé‡æ–°åº”ç”¨ï¼Œè®© &lt;code>patch&lt;/code> çœ‹èµ·æ¥å°±åƒç›´æ¥åŸºäº &lt;code>master&lt;/code> è¿›è¡Œæ›´æ”¹ä¸€æ ·ã€‚æ‰§è¡Œåçš„ &lt;code>patch&lt;/code> å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">A---B---C---F&lt;span class="s1">&amp;#39;---G&amp;#39;&lt;/span> patch
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ° &lt;code>master&lt;/code> åˆ†æ”¯ï¼Œå¹¶å¯¹ &lt;code>patch&lt;/code> æ‰§è¡Œå¿«è¿›åˆå¹¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git checkout master
git merge patch
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é€šè¿‡-rebase-æ‰§è¡Œ-git-pull">é€šè¿‡ &lt;code>rebase&lt;/code> æ‰§è¡Œ &lt;code>git pull&lt;/code>&lt;/h3>
&lt;p>Git åœ¨æœ€è¿‘çš„æŸä¸ªç‰ˆæœ¬èµ·ï¼Œç›´æ¥è¿è¡Œ &lt;code>git pull&lt;/code> ä¼šæœ‰å¦‚ä¸‹æç¤ºæ¶ˆæ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">warning: ä¸å»ºè®®åœ¨æ²¡æœ‰ä¸ºåç¦»åˆ†æ”¯æŒ‡å®šåˆå¹¶ç­–ç•¥æ—¶æ‰§è¡Œ pull æ“ä½œã€‚ æ‚¨å¯ä»¥åœ¨æ‰§è¡Œä¸‹ä¸€æ¬¡ pull æ“ä½œä¹‹å‰æ‰§è¡Œä¸‹é¢ä¸€æ¡å‘½ä»¤æ¥æŠ‘åˆ¶æœ¬æ¶ˆæ¯ï¼š
git config pull.rebase &lt;span class="nb">false&lt;/span> &lt;span class="c1"># åˆå¹¶ï¼ˆç¼ºçœç­–ç•¥ï¼‰&lt;/span>
git config pull.rebase &lt;span class="nb">true&lt;/span> &lt;span class="c1"># å˜åŸº&lt;/span>
git config pull.ff only &lt;span class="c1"># ä»…å¿«è¿›&lt;/span>
......
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸæ¥ &lt;code>git pull&lt;/code> æ—¶ä¹Ÿå¯ä»¥é€šè¿‡ &lt;code>rebase&lt;/code> æ¥è¿›è¡Œåˆå¹¶ï¼Œè¿™æ˜¯å› ä¸º &lt;code>git pull&lt;/code> å®é™…ä¸Šç­‰äº &lt;code>git fetch&lt;/code> + &lt;code>git merge&lt;/code> ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¬¬äºŒæ­¥ç›´æ¥ç”¨ &lt;code>git rebase&lt;/code> æ›¿æ¢ &lt;code>git merge&lt;/code>æ¥åˆå¹¶ &lt;code>fetch&lt;/code> å–å¾—çš„å˜æ›´ï¼Œä½œç”¨åŒæ ·æ˜¯é¿å…é¢å¤–çš„ &lt;code>merge&lt;/code> æäº¤ä»¥ä¿æŒçº¿æ€§çš„æäº¤å†å²ã€‚&lt;/p>
&lt;p>ä¸¤è€…çš„åŒºåˆ«åœ¨ä¸Šæ–‡ä¸­å·²è¿›è¡Œè¿‡å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¯¹æ¯”ç¤ºä¾‹ä¸­çš„ &lt;code>Matser&lt;/code> åˆ†æ”¯å½“æˆè¿œç¨‹åˆ†æ”¯ï¼ŒæŠŠ &lt;code>Feature&lt;/code> åˆ†æ”¯å½“æˆæœ¬åœ°åˆ†æ”¯ï¼Œå½“æˆ‘ä»¬åœ¨æœ¬åœ°æ‰§è¡Œ &lt;code>git pull&lt;/code> æ—¶ï¼Œå…¶å®å°±æ˜¯æ‹‰å– &lt;code>Master&lt;/code> çš„æ›´æ”¹ç„¶ååˆå¹¶åˆ° &lt;code>Feature&lt;/code> åˆ†æ”¯ã€‚å¦‚æœä¸¤ä¸ªåˆ†æ”¯éƒ½æœ‰ä¸åŒçš„æäº¤ï¼Œé»˜è®¤çš„ &lt;code>git merge&lt;/code> æ–¹å¼ä¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ merge æäº¤ä»¥æ•´åˆè¿™äº›æäº¤ï¼›è€Œä½¿ç”¨ &lt;code>git rebase&lt;/code> åˆ™ç›¸å½“äºåŸºäºè¿œç¨‹åˆ†æ”¯çš„æœ€æ–°æäº¤é‡æ–°åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œç„¶åå†é‡æ–°åº”ç”¨æœ¬åœ°æ‰€æ·»åŠ çš„æäº¤ã€‚&lt;/p>
&lt;p>å…·ä½“çš„ä½¿ç”¨æ–¹å¼æœ‰å¤šç§ï¼š&lt;/p>
&lt;ul>
&lt;li>æ¯æ¬¡æ‰§è¡Œ pull å‘½ä»¤æ—¶æ·»åŠ ç‰¹å®šé€‰é¡¹ï¼š &lt;code>git pull --rebase&lt;/code> ã€‚&lt;/li>
&lt;li>ä¸ºå½“å‰ä»“åº“è®¾å®šé…ç½®é¡¹ï¼š &lt;code>git config pull.rebase true&lt;/code>ï¼Œåœ¨ &lt;code>git config&lt;/code> åæ·»åŠ  &lt;code>--global&lt;/code> é€‰é¡¹å¯ä»¥ä½¿è¯¥é…ç½®é¡¹å¯¹æ‰€æœ‰ä»“åº“ç”Ÿæ•ˆã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="æ½œåœ¨å¼Šç«¯å’Œåå¯¹æ„è§">æ½œåœ¨å¼Šç«¯å’Œåå¯¹æ„è§&lt;/h2>
&lt;p>ä»ä»¥ä¸Šåœºæ™¯æ¥çœ‹ &lt;code>rebase&lt;/code> åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä½†æˆ‘ä»¬ä¹Ÿéœ€è¦æ„è¯†åˆ°å®ƒä¸æ˜¯ä¸‡èƒ½çš„ï¼Œç”šè‡³å¯¹æ–°æ‰‹æ¥è¯´æœ‰äº›å±é™©ï¼Œç¨æœ‰ä¸æ…å°±ä¼šå‘ç° &lt;code>git log&lt;/code> é‡Œçš„æäº¤ä¸è§äº†ï¼Œæˆ–è€…å¡åœ¨ &lt;code>rebase&lt;/code> çš„æŸä¸ªæ­¥éª¤ä¸çŸ¥é“å¦‚ä½•æ¢å¤ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¸Šé¢å·²ç»æåˆ°äº† &lt;code>rebase&lt;/code> æœ‰ä¿æŒæ•´æ´çš„çº¿æ€§æäº¤å†å²çš„ä¼˜ç‚¹ï¼Œä½†ä¹Ÿéœ€è¦æ„è¯†åˆ°å®ƒæœ‰ä»¥ä¸‹æ½œåœ¨çš„å¼Šç«¯ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ¶‰åŠåˆ°å·²ç»æ¨é€è¿‡çš„æäº¤ï¼Œéœ€è¦å¼ºåˆ¶æ¨é€æ‰èƒ½å°†æœ¬åœ° &lt;code>rebase&lt;/code> åçš„æäº¤æ¨é€åˆ°è¿œç¨‹ã€‚å› æ­¤ç»å¯¹ä¸è¦åœ¨ä¸€ä¸ªå…¬å…±åˆ†æ”¯ï¼ˆä¹Ÿå°±æ˜¯è¯´è¿˜æœ‰å…¶ä»–äººåŸºäºè¿™ä¸ªåˆ†æ”¯è¿›è¡Œå¼€å‘ï¼‰æ‰§è¡Œ &lt;code>rebase&lt;/code>ï¼Œå¦åˆ™å…¶ä»–äººä¹‹åæ‰§è¡Œ &lt;code>git pull&lt;/code> ä¼šæŠŠä»–ä»¬æœ¬åœ°çš„æäº¤å†å²ä¹Ÿè¦†ç›–æ‰ï¼Œç”šè‡³å’Œä»–ä»¬å·²å®Œæˆçš„å·¥ä½œå‘ç”Ÿå†²çªï¼Œè¾ƒä¸¥é‡çš„æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¹ä½ çš„äººèº«å®‰å…¨å¸¦æ¥é£é™©ã€‚&lt;/li>
&lt;li>å¯¹æ–°æ‰‹ä¸å‹å¥½ï¼Œæ–°æ‰‹å¾ˆæœ‰å¯èƒ½åœ¨äº¤äº’æ¨¡å¼ä¸­è¯¯æ“ä½œã€Œä¸¢å¤±ã€æŸäº›æäº¤ï¼ˆä½†å…¶å®æ˜¯èƒ½å¤Ÿæ‰¾å›çš„ï¼‰ã€‚&lt;/li>
&lt;li>å‡å¦‚ä½ é¢‘ç¹çš„ä½¿ç”¨ &lt;code>rebase&lt;/code> æ¥é›†æˆä¸»åˆ†æ”¯çš„æ›´æ–°ï¼Œä¸€ä¸ªæ½œåœ¨çš„åæœæ˜¯ä½ ä¼šé‡åˆ°è¶Šæ¥è¶Šå¤šéœ€è¦åˆå¹¶çš„å†²çªã€‚å°½ç®¡ä½ å¯ä»¥åœ¨ &lt;code>rebase&lt;/code> è¿‡ç¨‹ä¸­å¤„ç†è¿™äº›å†²çªï¼Œä½†è¿™å¹¶éé•¿ä¹…ä¹‹è®¡ï¼Œæ›´æ¨èçš„åšæ³•æ˜¯é¢‘ç¹çš„åˆå…¥ä¸»åˆ†æ”¯ç„¶ååˆ›å»ºæ–°çš„åŠŸèƒ½åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€ä¸ªé•¿æ—¶é—´å­˜åœ¨çš„åŠŸèƒ½åˆ†æ”¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–æœ‰ä¸€äº›è§‚ç‚¹æ˜¯æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…é‡å†™æäº¤å†å²ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æœ‰ä¸€ç§è§‚ç‚¹è®¤ä¸ºï¼Œä»“åº“çš„æäº¤å†å²å³æ˜¯ è®°å½•å®é™…å‘ç”Ÿè¿‡ä»€ä¹ˆã€‚ å®ƒæ˜¯é’ˆå¯¹å†å²çš„æ–‡æ¡£ï¼Œæœ¬èº«å°±æœ‰ä»·å€¼ï¼Œä¸èƒ½ä¹±æ”¹ã€‚ ä»è¿™ä¸ªè§’åº¦çœ‹æ¥ï¼Œæ”¹å˜æäº¤å†å²æ˜¯ä¸€ç§äºµæ¸ï¼Œä½ ä½¿ç”¨ è°è¨€ æ©ç›–äº†å®é™…å‘ç”Ÿè¿‡çš„äº‹æƒ…ã€‚ å¦‚æœç”±åˆå¹¶äº§ç”Ÿçš„æäº¤å†å²æ˜¯ä¸€å›¢ç³Ÿæ€ä¹ˆåŠï¼Ÿ æ—¢ç„¶äº‹å®å°±æ˜¯å¦‚æ­¤ï¼Œé‚£ä¹ˆè¿™äº›ç—•è¿¹å°±åº”è¯¥è¢«ä¿ç•™ä¸‹æ¥ï¼Œè®©åäººèƒ½å¤ŸæŸ¥é˜…ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»¥åŠé¢‘ç¹çš„ä½¿ç”¨ &lt;code>rebase&lt;/code> å¯èƒ½ä¼šä½¿ä»å†å²æäº¤ä¸­å®šä½ bug å˜å¾—æ›´åŠ å›°éš¾ï¼Œè¯¦è§ &lt;a href="https://medium.com/@fredrikmorken/why-you-should-stop-using-git-rebase-5552bee4fed1">https://medium.com/@fredrikmorken/why-you-should-stop-using-git-rebase-5552bee4fed1&lt;/a>ã€‚&lt;/p>
&lt;h2 id="æ‰¾å›ä¸¢å¤±çš„æäº¤">æ‰¾å›ä¸¢å¤±çš„æäº¤&lt;/h2>
&lt;p>åœ¨äº¤äº’å¼æ¨¡å¼ä¸‹è¿›è¡Œ &lt;code>rebase&lt;/code> å¹¶å¯¹æäº¤æ‰§è¡Œ &lt;code>squash&lt;/code> æˆ– &lt;code>drop&lt;/code> ç­‰å‘½ä»¤åï¼Œä¼šä»åˆ†æ”¯çš„ &lt;code>git log&lt;/code> ä¸­ç›´æ¥åˆ é™¤æäº¤ã€‚å¦‚æœä½ ä¸å°å¿ƒæ“ä½œå¤±è¯¯ï¼Œä¼šä»¥ä¸ºè¿™äº›æäº¤å·²ç»æ°¸ä¹…æ¶ˆå¤±äº†è€Œå“å‡ºä¸€èº«å†·æ±—ã€‚&lt;/p>
&lt;p>ä½†è¿™äº›æäº¤å¹¶æ²¡æœ‰çœŸæ­£åœ°è¢«åˆ é™¤ï¼Œå¦‚ä¸Šæ‰€è¯´ï¼ŒGit å¹¶ä¸ä¼šä¿®æ”¹ï¼ˆæˆ–åˆ é™¤ï¼‰åŸæ¥çš„æäº¤ï¼Œè€Œæ˜¯é‡æ–°åˆ›å»ºäº†ä¸€æ‰¹æ–°çš„æäº¤ï¼Œå¹¶å°†å½“å‰åˆ†æ”¯é¡¶ç«¯æŒ‡å‘äº†æ–°æäº¤ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>git reflog&lt;/code> æ‰¾åˆ°å¹¶ä¸”é‡æ–°æŒ‡å‘åŸæ¥çš„æäº¤æ¥æ¢å¤å®ƒä»¬ï¼Œè¿™ä¼šæ’¤é”€æ•´ä¸ª &lt;code>rebase&lt;/code>ã€‚æ„Ÿè°¢ Git ï¼Œå³ä½¿ä½ æ‰§è¡Œ &lt;code>rebase&lt;/code> æˆ–è€… &lt;code>commit --amend&lt;/code> ç­‰é‡å†™æäº¤å†å²çš„æ“ä½œï¼Œå®ƒä¹Ÿä¸ä¼šçœŸæ­£åœ°ä¸¢å¤±ä»»ä½•æäº¤ã€‚&lt;/p>
&lt;h3 id="git-reflog">&lt;code>git reflog&lt;/code>&lt;/h3>
&lt;p>&lt;code>reflogs&lt;/code> æ˜¯ Git ç”¨æ¥è®°å½•æœ¬åœ°ä»“åº“åˆ†æ”¯é¡¶ç«¯çš„æ›´æ–°çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒä¼šè®°å½•æ‰€æœ‰åˆ†æ”¯é¡¶ç«¯æ›¾ç»æŒ‡å‘è¿‡çš„æäº¤ï¼Œå› æ­¤ &lt;code>reflogs&lt;/code> å…è®¸æˆ‘ä»¬æ‰¾åˆ°å¹¶åˆ‡æ¢åˆ°ä¸€ä¸ªå½“å‰æ²¡æœ‰è¢«ä»»ä½•åˆ†æ”¯æˆ–æ ‡ç­¾å¼•ç”¨çš„æäº¤ã€‚&lt;/p>
&lt;p>æ¯å½“åˆ†æ”¯é¡¶ç«¯ç”±äºä»»ä½•åŸå› è¢«æ›´æ–°ï¼ˆé€šè¿‡åˆ‡æ¢åˆ†æ”¯ã€æ‹‰å–æ–°çš„å˜æ›´ã€é‡å†™å†å²æˆ–è€…æ·»åŠ æ–°çš„æäº¤ï¼‰ï¼Œä¸€æ¡æ–°çš„è®°å½•å°†è¢«æ·»åŠ åˆ° &lt;code>reflogs&lt;/code> ä¸­ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°æ‰€åˆ›å»ºè¿‡çš„æ¯ä¸€æ¬¡æäº¤éƒ½ä¸€å®šä¼šè¢«è®°å½•åœ¨ &lt;code>reflogs&lt;/code> ä¸­ã€‚å³ä½¿åœ¨é‡å†™äº†æäº¤å†å²ä¹‹åï¼Œ &lt;code>reflogs&lt;/code> ä¹Ÿä¼šåŒ…å«å…³äºåˆ†æ”¯çš„æ—§çŠ¶æ€çš„ä¿¡æ¯ï¼Œå¹¶å…è®¸æˆ‘ä»¬åœ¨éœ€è¦æ—¶æ¢å¤åˆ°è¯¥çŠ¶æ€ã€‚&lt;/p>
&lt;p>æ³¨æ„ &lt;code>reflogs&lt;/code> å¹¶ä¸ä¼šæ°¸ä¹…ä¿å­˜ï¼Œå®ƒæœ‰ 90 å¤©çš„è¿‡æœŸæ—¶é—´ã€‚&lt;/p>
&lt;h3 id="è¿˜åŸæäº¤å†å²">è¿˜åŸæäº¤å†å²&lt;/h3>
&lt;p>æˆ‘ä»¬ä»ä¸Šä¸€ä¸ªä¾‹å­ç»§ç»­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³æ¢å¤ &lt;code>feature&lt;/code> åˆ†æ”¯åœ¨ &lt;code>rebase&lt;/code> ä¹‹å‰çš„ Aâ†’Bâ†’Câ†’Dâ†’Eâ†’F æäº¤å†å²ï¼Œä½†è¿™æ—¶å€™çš„ &lt;code>git log&lt;/code> ä¸­å·²ç»æ²¡æœ‰åé¢ 5 ä¸ªæäº¤ï¼Œæ‰€ä»¥éœ€è¦ä» &lt;code>reflogs&lt;/code> ä¸­å¯»æ‰¾ï¼Œè¿è¡Œ &lt;code>git reflog&lt;/code> ç»“æœå¦‚ä¸‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">64710dc &lt;span class="o">(&lt;/span>HEAD -&amp;gt; feature&lt;span class="o">)&lt;/span> HEAD@&lt;span class="o">{&lt;/span>0&lt;span class="o">}&lt;/span>: rebase &lt;span class="o">(&lt;/span>&lt;span class="k">continue&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>finish&lt;span class="o">)&lt;/span>: returning to refs/heads/feature
64710dc &lt;span class="o">(&lt;/span>HEAD -&amp;gt; feature&lt;span class="o">)&lt;/span> HEAD@&lt;span class="o">{&lt;/span>1&lt;span class="o">}&lt;/span>: rebase &lt;span class="o">(&lt;/span>&lt;span class="k">continue&lt;/span>&lt;span class="o">)&lt;/span>: commit H
8ab4506 HEAD@&lt;span class="o">{&lt;/span>2&lt;span class="o">}&lt;/span>: rebase &lt;span class="o">(&lt;/span>&lt;span class="k">continue&lt;/span>&lt;span class="o">)&lt;/span>: commit G
1e186f8 HEAD@&lt;span class="o">{&lt;/span>3&lt;span class="o">}&lt;/span>: rebase &lt;span class="o">(&lt;/span>squash&lt;span class="o">)&lt;/span>: commit C
c50221f HEAD@&lt;span class="o">{&lt;/span>4&lt;span class="o">}&lt;/span>: rebase &lt;span class="o">(&lt;/span>start&lt;span class="o">)&lt;/span>: checkout ef1372522cdad136ce7e6dc3e02aab4d6ad73f79
74199ce HEAD@&lt;span class="o">{&lt;/span>5&lt;span class="o">}&lt;/span>: checkout: moving from master to feature
......
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>reflogs&lt;/code> å®Œæ•´çš„è®°å½•äº†æˆ‘ä»¬åˆ‡æ¢åˆ†æ”¯å¹¶è¿›è¡Œ &lt;code>rebase&lt;/code> çš„å…¨è¿‡ç¨‹ï¼Œç»§ç»­å‘ä¸‹æ£€ç´¢ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä» &lt;code>git log&lt;/code> ä¸­æ¶ˆå¤±çš„æäº¤ F:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">74199ce HEAD@&lt;span class="o">{&lt;/span>15&lt;span class="o">}&lt;/span>: commit: commit F
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ &lt;code>git reset&lt;/code> å°† &lt;code>feature&lt;/code> åˆ†æ”¯çš„é¡¶ç«¯é‡æ–°æŒ‡å‘åŸæ¥çš„æäº¤ Fï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># æˆ‘ä»¬æƒ³å°†å·¥ä½œåŒºä¸­çš„æ–‡ä»¶ä¹Ÿä¸€å¹¶è¿˜åŸï¼Œå› æ­¤ä½¿ç”¨äº†--hardé€‰é¡¹ &lt;/span>
$ git reset --hard 74199ce
HEAD ç°åœ¨ä½äº 74199ce commit F
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å†è¿è¡Œ &lt;code>git log&lt;/code> ä¼šå‘ç°ä¸€åˆ‡åˆå›åˆ°äº†ä»å‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">74199cebdd34d107bb67b6da5533a2e405f4c330 &lt;span class="o">(&lt;/span>HEAD -&amp;gt; feature&lt;span class="o">)&lt;/span> commit F
e7c7111d807c1d5209b97a9c75b09da5cd2810d4 commit E
d9623b0ef9d722b4a83d58a334e1ce85545ea524 commit D
73deeedaa944ef459b17d42601677c2fcc4c4703 commit C
c50221f93a39f3474ac59228d69732402556c93b commit B
ef1372522cdad136ce7e6dc3e02aab4d6ad73f79 commit A
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase">git rebase | Atlassian Git Tutorial&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.atlassian.com/git/tutorials/rewriting-history">git amend | Atlassian Git Tutorial&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Git Pull | Atlassian Git Tutorial&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA">Git - å˜åŸº&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://git-scm.com/docs/git-rebase">Git - git-rebase Documentation&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://git-scm.com/docs/git-reflog">Git - git-reflog Documentation&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://medium.com/@fredrikmorken/why-you-should-stop-using-git-rebase-5552bee4fed1">Why you should stop using Git rebase&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://medium.com/@fabisiakradoslaw/understand-how-does-git-rebase-work-and-compare-with-git-merge-and-git-interactive-rebase-cce2c9775e43">Understand how does git rebase work and compare with git merge and git interactive rebase&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></content><category scheme="https://waynerv.github.io/categories/%E5%B7%A5%E5%85%B7/" term="å·¥å…·" label="å·¥å…·"/><category scheme="https://waynerv.github.io/tags/git/" term="Git" label="Git"/></entry></feed>